"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[397],{397:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.r(e),r.d(e,{default:()=>y});var a=r(760),s=r(43),o=r(999),i=r(111),c=r(135),l=r(146),u=r(823),d=r(394),h=r(569),p=r(323),f=r(579),m=t([c,h,p]);function y(){const[t,e]=(0,s.useState)(u.A.DEFAULT_OBJECTIVE),r=(0,p.A)(t),n=(0,h.R)(r,t);(0,s.useEffect)((function(){(0,d.f2)(".bucket-wrapper, .vardrop, .var-scen-label, .vardrop .dot-histogram-wrapper, .main-histogram, .tut-drop-graphics-wrapper"),r.setReadyHash((t=>t+1))}),[t]);return(0,f.jsxs)("div",{className:"tutorial-view",children:[(0,f.jsx)("select",{value:t,onChange:t=>e(t.target.value),children:Object.keys(u.A.SELECTED_OBJS).map((t=>(0,f.jsx)("option",{value:t,children:u.A.SELECTED_OBJS[t]},t)))}),(0,f.jsxs)("div",{className:"scrollama scrollama-1",children:[(0,f.jsx)("div",{className:"tut-graph-wrapper",children:(0,f.jsxs)("div",{className:"tut-graph",children:[(0,f.jsx)("svg",{id:"pag-bar-graph"}),(0,f.jsx)(i.A,{levelInterp:r.bucketInterper,width:300,height:u.A.BAR_CHART_HEIGHT,colorInterp:u.A.INTERP_COLOR}),(0,f.jsx)("p",{className:"fancy-font objective-label",children:u.A.SELECTED_OBJS[t]})]})}),(0,f.jsxs)("div",{className:"tut-drop-graphics-wrapper",children:[(0,f.jsx)("div",{className:"main-waterdrop",children:(0,f.jsx)(l.A,{levelInterp:r.dropInterper,width:400,height:u.A.BAR_CHART_HEIGHT,colorInterp:u.A.INTERP_COLOR})}),(0,f.jsx)("div",{className:"main-histogram",children:(0,f.jsx)(c.A,{width:330,height:220,data:r.objectiveDelivs,domain:[0,a.max(r.objectiveDelivs)]})}),u.A.VARIATIONS.map((t=>{let{idx:e,clas:n,desc:s}=t;return(0,f.jsxs)("div",{className:"vardrop ".concat(n),desc:s,children:[(0,f.jsxs)("div",{children:[(0,f.jsx)(l.A,{levelInterp:r.variationInterpers[e],width:200,height:2*u.A.BAR_CHART_HEIGHT/3/2,colorInterp:u.A.INTERP_COLOR}),(0,f.jsx)(c.A,{width:330,height:220,data:r.objectiveVariationDelivs[e],domain:[0,a.max(r.objectiveDelivs)]})]}),(0,f.jsx)("p",{className:"var-scen-label",children:s})]},e)})),(0,f.jsx)("p",{className:"fancy-font objective-label",children:u.A.SELECTED_OBJS[t]})]}),(0,f.jsxs)(o.h,{offset:.9,onStepEnter:async t=>{var e;let{data:r,direction:n}=t;"up"!==n&&(null===(e=r.animHandler)||void 0===e||e.do())},onStepExit:async t=>{var e;let{data:r,direction:n}=t;"down"!==n&&(null===(e=r.animHandler)||void 0===e||e.undo())},children:[n.map(((t,e)=>(0,f.jsx)(o.p,{data:t,children:(0,f.jsx)("div",{className:"tut-text-card",children:t.text})},e))),(0,f.jsx)(o.p,{data:{},children:(0,f.jsx)("div",{className:"tut-text-card",style:{marginBottom:"40vh"},children:(0,f.jsx)("button",{onClick:()=>{window.scrollTo(0,0);for(let e=n.length-1;e>=0;e--){var t;null===(t=n[e].animHandler)||void 0===t||t.undo()}},children:"Back to Top"})})},"last")]})]})]})}[c,h,p]=m.then?(await m)():m,n()}catch(g){n(g)}}))},111:(t,e,r)=>{r.d(e,{A:()=>u});var n=r(760),a=r(43),s=r(684),o=r(579);const i=40,c=10,l=3;function u(t){let{levelInterp:e,colorInterp:r=s.YW,width:u=200,height:d=400,resolution:h=c}=t;const p=(0,a.useId)(),f=(0,a.useRef)(),m=(0,a.useMemo)((()=>(0,s.kd)(0,1,h+1).map((t=>e(t)))),[e,h]),g=(0,s.ZC)(m),y=u-2*l,v=d-l;return(0,a.useLayoutEffect)((()=>{const t=f.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(l,", ").concat(l/2,")"));t.append("defs").append("clipPath").attr("id","bucket-mask-"+p).append("path").attr("class","bucket-mask-path"),t.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(p,")")),t.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",l).attr("fill","none")}),[p]),(0,a.useLayoutEffect)((()=>{const t=f.current.attr("width",u).attr("height",d).select(".svg-container");t.select(".bucket-mask-path").attr("d",(0,s.wh)(y,v)),t.select(".bucket-outline").attr("d",(0,s.wh)(y,v).split("z")[0])}),[u,d,y,v]),(0,a.useLayoutEffect)((()=>{const t=f.current.select(".graph-area").selectAll(".bucketBox").data(m).join("rect").attr("class","bucketBox").attr("width",2*y).attr("height",2*v).attr("x",-y/2).attr("fill",((t,e)=>r(e/h)));t.transition("liquidLevel").ease(n.easeElasticOut.period(.6)).delay(((t,e)=>e*(100/h))).duration(1e3).attr("y",(t=>v-t*v)),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(n.easeQuad).attrTween("transform",(function(t,e){const r=g?Math.abs(g[e]-t):0;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*r+.5),4*Math.PI))*r*i*(1-t),", ").concat(y/2,", ",0,")")}))}),[m,g,u,d,y,v,h,r]),(0,o.jsx)("div",{className:"bucket-wrapper",children:(0,o.jsx)("svg",{ref:t=>{f.current=n.select(t)}})})}},987:(t,e,r)=>{r.d(e,{u:()=>s});var n=r(760),a=r(684);function s(t,e,r,s,o){const i=t.length/r;let c=n.histogram().value((t=>t)).domain(e).thresholds((0,a.kd)(...e,Math.ceil(s/(o/i))))(t),l=(0,a.Q2)(c,r,i),u=[];for(let n=0;n<l.length;n++)for(let e=0;e<l[n];e++)u.push([(c[n].x1+c[n].x0)/2,(e+.5)/i*t.length]);return u}},684:(t,e,r)=>{r.d(e,{Q2:()=>i,YW:()=>l,ZC:()=>c,kd:()=>s,wh:()=>o});var n=r(760),a=r(43);function s(t,e,r){return n.range(r).map((n=>n/(r-1)*(e-t)+t))}function o(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,s=t*a+t*(1-a)/2,o=t*(1-a)/2,i=[{x:n.interpolate(s,t)(r),y:n.interpolate(e,0)(r)},{x:s,y:e},{x:o,y:e},{x:n.interpolate(o,0)(r),y:n.interpolate(e,0)(r)}];return n.line().x((function(t){return t.x})).y((function(t){return t.y}))(i)+"z"}function i(t,e,r){let a=t.map((t=>Math.round(t.length/e))),s=n.sum(a);for(;s>r;)a[n.minIndex(t,((t,r)=>0!==t.length?t.length/e-a[r]:1/0))]-=1,s=n.sum(a);for(;s<r;)a[n.maxIndex(t,((t,r)=>0!==t.length?t.length/e-a[r]:-1/0))]+=1,s=n.sum(a);return a}function c(t,e){const r=(0,a.useRef)({value:t,prev:null}),n=r.current.value;return(e?e(t,n):t===n)||(r.current={value:t,prev:n}),r.current.prev}const l=t=>n.interpolateBlues(n.scaleLinear([.2,1])(t))},554:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Vk:()=>o,Zl:()=>i,jx:()=>l});var a=r(343),s=t([a]);a=(s.then?(await s)():s)[0];const o="scens",i="delivs",c="delivs_unord",l=await async function(){const t=await(await fetch("./select_complete_objectives.json")).json();for(const e of t){for(const t of e[o])t[c]=Array.from(t[i]),t[i]=Array.from(t[i]).sort(((t,e)=>e-t));e[o]=(0,a.Et)(e[o],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(t=>{let{obj:e}=t;return e}))}();Object.keys(l),Object.keys(Object.values(l)[0][o]);n()}catch(o){n(o)}}),1)},63:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Vk:()=>i,Xe:()=>h,Zl:()=>c,iL:()=>d,jx:()=>u,pk:()=>o,sQ:()=>l});var a=r(343),s=t([a]);a=(s.then?(await s)():s)[0];const o=1200,i="scens",c="delivs",l="delivs_unord",u=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const e of t){e[i]=e[i];for(const t of e[i]){const e=t[c].map((t=>Math.min(Math.max(0,t),o)));t[l]=e,t[c]=Array.from(e).sort(((t,e)=>e-t))}e[i]=(0,a.Et)(e[i],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(t=>{let{obj:e}=t;return e}))}(),d=Object.keys(u),h=Object.keys(Object.values(u)[0][i]);n()}catch(o){n(o)}}),1)},135:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{A:()=>f});var a=r(760),s=r(43),o=r(987),i=r(63),c=r(579),l=t([i]);i=(l.then?(await l)():l)[0];const d=20,h={top:10,right:10,bottom:40,left:10},p={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}};function f(t){let{data:e,domain:r=[0,a.max(e)],width:n=600,height:i=400}=t;const l=(0,s.useRef)(),u=(0,s.useMemo)((()=>(0,o.u)(e,r,e.length/d,n,i)),[e]),f=[0,e.length],m=a.scaleLinear().domain(r).range([0,n]),g=a.scaleLinear().domain(f).range([i,0]);return(0,s.useEffect)((()=>{l.current.selectAll("*").remove();l.current.attr("width",n+h.left+h.right).attr("height",i+h.top+h.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(h.left,",").concat(h.top,")")).append("g").attr("transform","translate(0, ".concat(i,")")).call(a.axisBottom().scale(m).tickFormat(a.format(".2s"))).call((t=>{t.selectAll("line").attr("stroke","gray"),t.selectAll("path").attr("stroke","gray"),t.selectAll("text").attr("fill","gray")})).append("text").attr("fill","black").attr("font-size","2em").attr("transform","translate(".concat(n/2,", ",30,")")).text("Deliveries (TAF)")}),[e]),(0,s.useEffect)((()=>{const t=l.current.select(".graph-area").selectAll(".icons").data(u).join((t=>t.append("g").call((t=>t.append("path"))))).attr("class","icons").call((t=>{t.selectAll("path").attr("d",a.symbol(p,i/d))}));t.attr("transform",(t=>"translate(".concat(m(t[0]),",").concat(g(t[1]),")"))),t.attr("fill","steelblue")}),[u]),(0,c.jsx)("div",{className:"dot-histogram-wrapper",children:(0,c.jsx)("svg",{ref:t=>{l.current=a.select(t)}})})}n()}catch(u){n(u)}}))},146:(t,e,r)=>{r.d(e,{A:()=>f});var n=r(760),a=r(43),s=r(684),o=r(394),i=r(579);const c=Math.SQRT1_2,l=1,u=l+c,d=40,h=10,p=3;function f(t){let{levelInterp:e,colorInterp:r=s.YW,width:c=200,height:f=400,resolution:m=h}=t;const g=(0,a.useId)(),y=(0,a.useRef)(),v=(0,a.useMemo)((()=>(0,s.kd)(0,1,m+1).map((t=>e(t)))),[e,m]),A=(0,s.ZC)(v),b=c-2*p,x=f-p;return(0,a.useLayoutEffect)((()=>{const t=y.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(p,", ").concat(p/2,")"));t.append("defs").append("clipPath").attr("id","bucket-mask-"+g).append("path").attr("class","bucket-mask-path"),t.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(g,")")),t.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",p).attr("fill","none")}),[g]),(0,a.useLayoutEffect)((()=>{const t=y.current.attr("width",c).attr("height",f).select(".svg-container"),e=function(t,e){let[r,a]=e;const s=(0,o.bp)(0,1,t,20);return n.line().x((function(t){return t[0]+r})).y((function(t){return t[1]+a}))(s)+"z"}(x*(2*l)/u,[c/2,f*l/u]);t.select(".bucket-mask-path").attr("d",e),t.select(".bucket-outline").attr("d",e)}),[c,f,b,x]),(0,a.useLayoutEffect)((()=>{const t=y.current.select(".graph-area").selectAll(".bucketBox").data(v).join("rect").attr("class","bucketBox").attr("width",2*b).attr("height",2*x).attr("x",-b/2).attr("fill",((t,e)=>r(e/m)));t.transition("liquidLevel").ease(n.easeElasticOut.period(.6)).delay(((t,e)=>e*(100/m))).duration(1e3).attr("y",(t=>x-t*x)),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(n.easeQuad).attrTween("transform",(function(t,e){const r=A?Math.abs(A[e]-t):0;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*r+.5),4*Math.PI))*r*d*(1-t),", ").concat(b/2,", ",0,")")}))}),[v,A,c,f,b,x,m,r]),(0,i.jsx)("div",{className:"waterdrop-wrapper",children:(0,i.jsx)("svg",{ref:t=>{y.current=n.select(t)}})})}},823:(t,e,r)=>{r.d(e,{A:()=>a});r(760);function n(t,e){let{scen_num_str:r,desc:n}=t;return{idx:e,scen_num_str:r,desc:n,scen_str:"expl".concat(r),clas:"drop".concat(e+1)}}const a={BAR_CHART_WIDTH:500,BAR_CHART_HEIGHT:400,INTERP_COLOR:r(684).YW,DEFAULT_OBJECTIVE:"DEL_NOD_AG_TOTAL",BASELINE_SCENARIO:"expl0000",VARIATIONS:[{scen_num_str:"0129",desc:"natural flows"},{scen_num_str:"0015",desc:"reduce delta regs."},{scen_num_str:"0320",desc:"prioritize carryover"},{scen_num_str:"0360",desc:"municipal priority"},{scen_num_str:"0261",desc:"rebalancing"}].map(n),SELECTED_OBJS:{DEL_NOD_AG_TOTAL:"DEL_NOD_AG_TOTAL",DEL_SJV_AG_TOTAL:"DEL_SJV_AG_TOTAL",DEL_NOD_MI_TOTAL:"DEL_NOD_MI_TOTAL",DEL_SJV_MI_TOTAL:"DEL_SJV_MI_TOTAL",DEL_SOCAL_MI_TOTAL:"DEL_SOCAL_MI_TOTAL",CVP_SWP_EXPORTS:"CVP_SWP_EXPORTS",NDO:"NDO",SAC_IN:"SAC_IN",SJR_IN:"SJR_IN",STO_NOD_TOTAL:"STO_NOD_TOTAL",STO_SOD_TOTAL:"STO_SOD_TOTAL"}}},479:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{W:()=>y});var a=r(760),s=r(554),o=r(823),i=r(394),c=r(63),l=r(684),u=r(343),d=t([s,c,u]);[s,c,u]=d.then?(await d)():d;const p="expl0000";function f(t){const e=s.jx[t][c.Vk][p][c.sQ],r=a.max(e);return a.scaleLinear().domain((0,l.kd)(0,1,e.length)).range(e.map((t=>t/r)).sort().reverse()).clamp(!0)}function m(t){const e=s.jx[t][c.Vk][p][c.sQ],r=a.max(e);return t=>(0,u.si)(a.scaleLinear().domain((0,l.kd)(0,1,e.length)).range(e.map((t=>t/r)).sort().reverse()).clamp(!0)(t))}function g(){return{initChartAnimGroup:function(t){let e,r,n,i,{deps:l,objective:u}=t;const d=40,h=30,f=40,m=60;return function(){{a.select("#pag-bar-graph > *").remove();const t=a.select("#pag-bar-graph").attr("width",o.A.BAR_CHART_WIDTH+m+h).attr("height",o.A.BAR_CHART_HEIGHT+d+f).attr("opacity",1).append("g").attr("class","svg-group").attr("transform","translate(".concat(m,",").concat(d,")")),l=s.jx[u][c.Vk][p][c.sQ];i=a.max(l);const g=l.map(((t,e)=>({val:t,placeFromLeft:e,year:e+1}))).sort(((t,e)=>e.val-t.val)),y=a.scaleBand().domain(g.map((t=>{let{year:e}=t;return e})).sort(((t,e)=>t-e))).range([0,o.A.BAR_CHART_WIDTH]).padding(.4),v=a.scaleLinear().domain([0,i]).range([o.A.BAR_CHART_HEIGHT,0]),A=a.axisBottom(y).tickSize(0).tickFormat((t=>"year ".concat(t))).tickValues(y.domain().filter(((t,e)=>0===e||(e+1)%10===0)));t.append("g").attr("class","anim-xaxis"),t.append("g").attr("class","axis-y"),t.select(".anim-xaxis").attr("opacity",1).attr("transform","translate(0, ".concat(o.A.BAR_CHART_HEIGHT,")")).call(A).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),t.select(".axis-y").call(a.axisLeft(v).tickFormat(a.format(".2s"))).append("text").text("Deliveries (TAF)").attr("fill","black").attr("font-weight","bold").attr("transform","translate(-50, ".concat(o.A.BAR_CHART_HEIGHT/2,") rotate(-90)")),e=y,r=A,n=g}}(),{barsAppear:{do:function(){{const t=a.scaleLinear().domain([0,i]).range([o.A.BAR_CHART_HEIGHT,0]);a.select("#pag-bar-graph .svg-group").selectAll(".bars").data(n,(t=>t.placeFromLeft)).join("rect").attr("class","bars").attr("x",(t=>e(t.year))).attr("y",o.A.BAR_CHART_HEIGHT).attr("width",e.bandwidth()).attr("height",0).attr("opacity",1).attr("fill","steelblue").transition().duration(500).delay((t=>10*t.placeFromLeft)).attr("y",(e=>t(e.val))).attr("height",(e=>o.A.BAR_CHART_HEIGHT-t(e.val)))}},undo:function(){a.select("#pag-bar-graph .svg-group").selectAll(".bars").data(n,(t=>t.placeFromLeft)).transition().duration(500).delay((t=>10*(n.length-t.placeFromLeft-1))).attr("y",o.A.BAR_CHART_HEIGHT).attr("height",0)}},barsCondense:{do:async function(){{const t=o.A.BAR_CHART_WIDTH/8,e=a.select("#pag-bar-graph .svg-group");e.select(".anim-xaxis").call(r.tickFormat(""));const s=e.selectAll(".bars");s.style("mix-blend-mode","multiply").transition().duration(500).attr("opacity",.05).transition().delay((t=>100+1e3*(1-(1-t.placeFromLeft/n.length)**4))).duration(500).attr("width",t).attr("x",o.A.BAR_CHART_WIDTH/2-t/2).end().catch((()=>{})).then((()=>{e.select(".anim-xaxis").transition().transition(500).attr("transform","translate(0, ".concat(o.A.BAR_CHART_HEIGHT+50,")")).attr("opacity",0),s.transition().delay(500).attr("x",0),e.transition().delay(500).attr("transform","translate(".concat(m+o.A.BAR_CHART_WIDTH/2-t/2,",").concat(d,")"))}))}},undo:function(){{const t=a.select("#pag-bar-graph .svg-group"),s=t.selectAll(".bars");t.select(".anim-xaxis").transition().transition(500).attr("transform","translate(0, ".concat(o.A.BAR_CHART_HEIGHT,")")).attr("opacity",1),t.select(".anim-xaxis").call(r.tickFormat((t=>"year ".concat(t)))),t.transition().delay(500).attr("transform","translate(".concat(m,",").concat(d,")")),s.transition().delay((t=>100+1e3*(1-(t.placeFromLeft/n.length)**4))).duration(500).attr("x",(t=>e(t.year))).attr("width",e.bandwidth()).transition().duration(500).attr("opacity",1).end().catch((()=>{})).then((()=>{s.style("mix-blend-mode","normal")}))}}}}},initBucketsFillAnim:function(t){let{deps:e,objective:r}=t;return{do:function(){a.selectAll(".tut-graph-wrapper .bucket-wrapper").style("display","initial"),a.select("#pag-bar-graph").attr("opacity",0),e.setBucketInterper((()=>f(r)))},undo:function(){e.setBucketInterper((()=>a.scaleLinear().range([0,0]))),a.selectAll(".tut-graph-wrapper .bucket-wrapper").style("display","none"),a.select("#pag-bar-graph").transition().attr("opacity",1)}}},initDropFillAnim:function(t){let{deps:e,objective:r}=t;return{do:function(){(0,i.YB)(".main-waterdrop"),(0,i.YB)(".tut-drop-graphics-wrapper",a,"grid"),(0,i.f2)(".tut-graph-wrapper, .bucket-wrapper"),e.setDropInterper((()=>m(r)))},undo:function(){(0,i.f2)(".tut-drop-graphics-wrapper, .main-waterdrop"),(0,i.YB)(".bucket-wrapper"),(0,i.YB)(".tut-graph-wrapper",a,"flex"),e.setDropInterper((()=>a.scaleLinear().range([0,0])))}}},initShowVariationsAnim:function(t){let{deps:e}=t;return{do:function(){a.selectAll(".vardrop").style("display","initial").classed("hasarrow",!0),a.selectAll(".tut-drop-graphics-wrapper .objective-label").style("display","none"),e.setVariationInterpers(e.objectiveVariationInterpers),a.selectAll(".var-scen-label").style("display","block"),a.selectAll(".var-scen-label").style("opacity","1"),a.select(".main-waterdrop").transition().style("transform","translateY(100px) scale(0.5)"),a.select(".main-waterdrop .var-scen-label").transition().style("transform","scale(2)"),a.select(".main-histogram").style("display","initial"),a.selectAll(".vardrop .dot-histogram-wrapper").style("display","initial")},undo:function(){a.select(".main-waterdrop").transition().style("transform","none"),a.select(".main-waterdrop .var-scen-label").transition().style("transform","scale(1)"),a.select(".main-histogram").style("display","none"),a.selectAll(".vardrop .dot-histogram-wrapper").style("display","none"),a.selectAll(".var-scen-label").style("display","none"),a.selectAll(".tut-drop-graphics-wrapper .objective-label").style("display","initial"),a.selectAll(".vardrop").style("display","none").classed("hasarrow",!1),e.setVariationInterpers(o.A.VARIATIONS.map((()=>a.scaleLinear().range([0,0]))))}}}}}const y=g();n()}catch(h){n(h)}}))},394:(t,e,r)=>{r.d(e,{YB:()=>h,bp:()=>d,f2:()=>p});var n=r(760);const a=Math.SQRT1_2,s=1,o=a+a,i=s+a,c=(a+s/2)/i;function l(t){if(t>=c){return Math.SQRT1_2*(1-t)/(1-c)}const e=2*(1-t/(o/i))-1,r=Math.acos(e);return Math.sin(r)}function u(t){return(t-a/i)*(1+Math.SQRT2)}function d(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:10;if(Math.abs(t-e)<.01)return[];const o=r/2/s*a,c=1/n,d=[],h=[];let p,f,m,g;for(let s=1;s<=Math.ceil(1/c)&&(p=l(t+(s-1)*c),f=u(t+(s-1)*c),m=l(t+s*c),g=u(t+s*c),!(g/(1+Math.SQRT2)+a/i>=e));s++){const t=[-p*o,-f*o],e=[p*o,-f*o],r=[m*o,-g*o],n=[-m*o,-g*o];d.push(e,r),h.push(t,n)}m=l(e),g=u(e);const y=[-p*o,-f*o],v=[p*o,-f*o],A=[m*o,-g*o],b=[-m*o,-g*o];return d.push(v,A),h.push(y,b),d.push(...h.reverse()),d}function h(t,e,r){(e||n).selectAll(t).style("display",r||"block")}function p(t,e){(e||n).selectAll(t).style("display","none")}},569:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{R:()=>c});var a=r(43),s=r(479),o=t([s]);function c(t,e,r){const[n,o]=(0,a.useState)([]);return(0,a.useEffect)((function(){if(0===t.readyHash)return;const n={deps:t,objective:e,scenario:r},a=s.W.initChartAnimGroup(n),i=s.W.initBucketsFillAnim(n),c=s.W.initDropFillAnim(n),l=s.W.initShowVariationsAnim(n),u=[{name:"barsAppear",animHandler:a.barsAppear,text:"Bar Graph"},{name:"barsCondense",animHandler:a.barsCondense,text:"Gradient"},{name:"bucketsFill",animHandler:i,text:"Bucket"},{name:"forNowLetsFocus",animHandler:c,text:"Waterdrop"},{name:"ifChangeReality",animHandler:l,text:"Different Scenarios"}];o(u)}),[t.readyHash]),n}s=(o.then?(await o)():o)[0],n()}catch(i){n(i)}}))},323:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{A:()=>h});var a=r(760),s=r(43),o=r(684),i=r(554),c=r(823),l=r(343),u=t([i,l]);function h(t){const[e,r]=(0,s.useState)(0),[n,u]=(0,s.useState)((()=>a.scaleLinear().range([0,0]))),[d,h]=(0,s.useState)((()=>a.scaleLinear().range([0,0]))),[p,f]=(0,s.useState)((()=>c.A.VARIATIONS.map((()=>a.scaleLinear().range([0,0]))))),[m,g]=(0,s.useState)((()=>[])),[y,v]=(0,s.useState)((()=>c.A.VARIATIONS.map((()=>[])))),[A,b]=(0,s.useState)((()=>c.A.VARIATIONS.map((()=>a.scaleLinear().range([0,0])))));return(0,s.useEffect)((()=>{u((()=>a.scaleLinear().range([0,0]))),h((()=>a.scaleLinear().range([0,0]))),f((()=>c.A.VARIATIONS.map((()=>a.scaleLinear().range([0,0])))));const e=i.jx[t][i.Vk][c.A.BASELINE_SCENARIO][i.Zl],r=a.max(e);g((()=>e));const n=c.A.VARIATIONS.map((e=>{let{scen_str:r}=e;return i.jx[t][i.Vk][r][i.Zl]})),s=n.map((t=>e=>(0,l.si)(a.scaleLinear().domain((0,o.kd)(0,1,t.length)).range(t.map((t=>t/r)).sort().reverse()).clamp(!0)(e))));v((()=>n)),b((()=>s))}),[t]),{readyHash:e,setReadyHash:r,bucketInterper:n,setBucketInterper:u,dropInterper:d,setDropInterper:h,variationInterpers:p,setVariationInterpers:f,objectiveDelivs:m,objectiveVariationDelivs:y,objectiveVariationInterpers:A}}[i,l]=u.then?(await u)():u,n()}catch(d){n(d)}}))},343:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{C5:()=>S,Et:()=>p,Ft:()=>J,Ng:()=>k,Ul:()=>Z,XC:()=>f,Yb:()=>P,bp:()=>I,cv:()=>N,hh:()=>V,i7:()=>W,iJ:()=>Y,js:()=>m,nC:()=>D,si:()=>g,u:()=>z,xC:()=>E});var a=r(981),s=r(760),o=r(783),i=r.n(o),c=r(43),l=r(63),u=r(684),d=t([l]);function p(t,e){const r=Object.groupBy(t,e);for(const n of Object.keys(r))r[n]=r[n][0];return r}l=(d.then?(await d)():d)[0];const f={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}},m="M0,-1L0.5,-0.5A0.707,0.707,0,1,1,-0.5,-0.5L0,-1Z";function g(t){return t-=.0088,Math.min(1,Math.max(0,(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.2326))}const y=Math.SQRT1_2,v=1,A=y+y,b=v+y,x=.75;function w(t){if(t>=x){return Math.SQRT1_2*(1-t)/(1-x)}const e=2*(1-t/(A/b))-1,r=Math.acos(e);return Math.sin(r)}function T(t){return(t-y/b)*(1+Math.SQRT2)}function _(t){return t/(1+Math.SQRT2)+y/b}function I(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const n=r/2/v*y,a=.1,s=[],o=[];let i,c,l,u;for(let m=1;m<=Math.ceil(10)&&(i=w(t+(m-1)*a),c=T(t+(m-1)*a),l=w(t+m*a),u=T(t+m*a),!(_(u)>=e));m++){const t=[-i*n,-c*n],e=[i*n,-c*n],r=[l*n,-u*n],a=[-l*n,-u*n];s.push(e,r),o.push(t,a)}l=w(e),u=T(e);const d=[-i*n,-c*n],h=[i*n,-c*n],p=[l*n,-u*n],f=[-l*n,-u*n];return s.push(h,p),o.push(d,f),s.push(...o.reverse()),s}function k(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const n=r/2/v*y,a=.1,s=[];let o,i,c,l;for(let f=1;f<=Math.ceil(10)&&(o=w(t+(f-1)*a),i=T(t+(f-1)*a),c=w(t+f*a),l=T(t+f*a),!(_(l)>=e));f++){const t=[-o*n,-i*n],e=[o*n,-i*n],r=[c*n,-l*n],a=[-c*n,-l*n];s.push([t,e,r]),s.push([t,r,a])}c=w(e),l=T(e);const u=[-o*n,-i*n],d=[o*n,-i*n],h=[c*n,-l*n],p=[-c*n,-l*n];return s.push([u,d,h]),s.push([u,h,p]),s}function S(t,e){return function(r){return e.map((function(e){return[e,s.mean(r,(function(r){return t(e-r)}))]}))}}function E(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function j(t){const e=t/2,r=3*Math.PI/2/16,n=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let a=0;a<=16;a++)n.push({x:Math.cos(a*r-Math.PI/4)*e,y:Math.sin(a*r-Math.PI/4)*e});return n}function O(t,e){const r=i().Bounds.create(t),n=r.min.x,a=r.max.x,o=r.min.y,c=r.max.y,l=s.scaleLinear([n,a]),u=s.scaleLinear([o,c]),d=[];for(let s=0;s<e;s++)for(;;){const e=l(Math.random()),r=u(Math.random());if(i().Vertices.contains(t,{x:e,y:r})){d.push([e,r]);break}}return d}const R=function(){const t=j(3),e=j(1),r=[];for(let n=0;n<t.length-2;n++)r.push([t[n],t[n+(n<2?1:2)],e[n+(n<2?1:2)],e[n]]);return r}();let M,L,H,C;function B(t){const e=s.sum(t.map((t=>t**2*3.14)));return Math.floor(2*Math.sqrt(e/3.14)/2)}function V(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(n&&H&&r.length===C)return H;M&&r.length===L||(M=s.range(4).map((()=>O(j(1),L=r.length))));const a=B(r.map((t=>{let{r:e}=t;return e}))),o=M[Math.floor(Math.random()*M.length)].map((t=>{let[e,r]=t;return[e*a,r*a]})),c=i().Engine,l=i().Bodies,u=i().Composite,d=c.create(),h=o.sort(((t,e)=>e[1]-t[1])),p=r.map(((t,e)=>{let{r:r,id:n}=t;const[a,s]=h[e];return l.circle(a,s,r,{restitution:0,id:n})})),f=R.map((t=>i().Body.create({position:i().Vertices.centre(t),vertices:t,isStatic:!0}))),m=i().Body.create({isStatic:!0});i().Body.setParts(m,f),i().Body.setCentre(m,{x:0,y:0}),i().Body.scale(m,a,a),u.add(d.world,[...p,m]);for(let s=0,i=60,y=.1;s<i*y;s++)c.update(d,1e3/i);const g=p.map((r=>{let{position:n,id:a}=r;return{id:a,x:n.x+t,y:n.y+e}}));return g.height=a/2/y*b,!n||H&&g.length===C||(H=g,C=g.length),g}function D(t,e){const[r,n]=(0,c.useState)(t);return[(0,c.useMemo)((()=>e(r)),[r]),(0,c.useCallback)((t=>{n(e(t))}),[])]}function N(t,e,r,n){const a=r[t][l.Vk][e][l.Zl];return s.scaleLinear().domain((0,u.kd)(0,1,a.length)).range(a.map((t=>Math.min(1,t/n)))).clamp(!0)}function P(t,e,r){return"median"===t?Object.keys(e[r][l.Vk]).sort(((t,n)=>s.mean(e[r][l.Vk][t][l.Zl])-s.mean(e[r][l.Vk][n][l.Zl]))):"deliveries"===t?Object.keys(e[r][l.Vk]).sort(((t,n)=>s.max(e[r][l.Vk][t][l.Zl])-s.max(e[r][l.Vk][n][l.Zl]))):"alphabetical"===t?Object.keys(e[r][l.Vk]).sort():void 0}function F(t,e,r){var n;const a=e.split(".");for(let s of a){if(!t)return r;t=t[s]}return null!==(n=t)&&void 0!==n?n:r}function G(t){return"string"===typeof t?e=>F(e,t):t}function Z(t,e){return e=G(e),t.sort(((t,r)=>{const n=e(t),a=e(r);return n<a?-1:n>a?1:0}))}function Q(t){return t*Math.PI/180}class W{constructor(t){let{fov:e,near:r,far:n,width:o,height:i,domElement:c,zoomFn:l}=t;this.raycaster=new a.tBo,this.fov=e,this.near=r,this.far=n,this.width=o,this.height=i,this.camera=new a.ubm(e,o/i,r,n+1),this.camera.position.set(0,0,this.far),this.zoom=s.zoom().scaleExtent([this.getScaleFromZ(this.far),this.getScaleFromZ(this.near)]).on("zoom",(t=>{this.d3ZoomHandler(t),this.curTransform=t.transform,l&&l(t)})),this.view=s.select(c),this.view.call(this.zoom),this.zoom.transform(this.view,s.zoomIdentity.translate(this.width/2,this.height/2).scale(this.getScaleFromZ(this.far)))}d3ZoomHandler(t){const e=t.transform.k,r=-(t.transform.x-this.width/2)/e,n=(t.transform.y-this.height/2)/e,a=this.getZFromScale(e);this.camera.position.set(r,n,a)}getScaleFromZ(t){const e=Q(this.fov/2),r=2*(Math.tan(e)*t);return this.height/r}getZFromScale(t){const e=Q(this.fov/2);return this.height/t/(2*Math.tan(e))}intersectObject(t,e,r){return this.raycaster.setFromCamera({x:t,y:e},this.camera),this.raycaster.intersectObject(r)}}class z{constructor(){this.threeGeom=new a.V23,this.idx=0}addMeshCoords(t,e,r){let n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=[];for(let o=0;o<t.length;o++){const[i,c,l]=t[o],u=new a.Pq0(e.x+i[0],e.y-i[1],n),d=new a.Pq0(e.x+c[0],e.y-c[1],n),h=new a.Pq0(e.x+l[0],e.y-l[1],n);this.threeGeom.vertices.push(u,d,h);const p=new a.nFj(3*this.idx+0,3*this.idx+1,3*this.idx+2);r&&(p.vertexColors.push(r),p.vertexColors.push(r),p.vertexColors.push(r)),this.threeGeom.faces.push(p),s.push(this.idx++)}return s}}function J(t,e,r,n){return{x:t/r*2-1,y:-e/n*2+1}}function Y(t){const[e,r]=(0,c.useState)(t),n=(0,c.useRef)(t);(0,c.useEffect)((()=>{n.current=e}),[e]);const a=(0,c.useCallback)((t=>{r(n.current=t)}),[]);return[e,a,n]}n()}catch(h){n(h)}}))},999:(t,e,r)=>{r.d(e,{h:()=>p,p:()=>x});var n=r(43);function a(t,e){var r=Object.keys(t);if(Object.getOwnPropertySymbols){var n=Object.getOwnPropertySymbols(t);e&&(n=n.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),r.push.apply(r,n)}return r}function s(t){for(var e=1;e<arguments.length;e++){var r=null!=arguments[e]?arguments[e]:{};e%2?a(Object(r),!0).forEach((function(e){o(t,e,r[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(r)):a(Object(r)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(r,e))}))}return t}function o(t,e,r){return e in t?Object.defineProperty(t,e,{value:r,enumerable:!0,configurable:!0,writable:!0}):t[e]=r,t}function i(t,e){return function(t){if(Array.isArray(t))return t}(t)||function(t,e){var r=null==t?null:"undefined"!==typeof Symbol&&t[Symbol.iterator]||t["@@iterator"];if(null==r)return;var n,a,s=[],o=!0,i=!1;try{for(r=r.call(t);!(o=(n=r.next()).done)&&(s.push(n.value),!e||s.length!==e);o=!0);}catch(c){i=!0,a=c}finally{try{o||null==r.return||r.return()}finally{if(i)throw a}}return s}(t,e)||function(t,e){if(!t)return;if("string"===typeof t)return c(t,e);var r=Object.prototype.toString.call(t).slice(8,-1);"Object"===r&&t.constructor&&(r=t.constructor.name);if("Map"===r||"Set"===r)return Array.from(t);if("Arguments"===r||/^(?:Ui|I)nt(?:8|16|32)(?:Clamped)?Array$/.test(r))return c(t,e)}(t,e)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance.\nIn order to be iterable, non-array objects must have a [Symbol.iterator]() method.")}()}function c(t,e){(null==e||e>t.length)&&(e=t.length);for(var r=0,n=new Array(e);r<e;r++)n[r]=t[r];return n}var l=function(t){return"string"===typeof t&&t.includes("px")},u={position:"fixed",left:0,width:"100%",height:0,borderTop:"2px dashed black",zIndex:9999},d={fontSize:"12px",fontFamily:"monospace",margin:0,padding:6},h=function(t){var e=t.offset,r=function(t){return l(t)?t:"".concat(100*t,"%")}(e);return n.createElement("div",{style:s(s({},u),{},{top:r})},n.createElement("p",{style:d},"trigger: ",e))},p=function(t){var e=t.debug,r=t.children,a=t.offset,s=void 0===a?.3:a,o=t.onStepEnter,c=void 0===o?function(){}:o,u=t.onStepExit,d=void 0===u?function(){}:u,p=t.onStepProgress,f=void 0===p?null:p,m=t.threshold,g=void 0===m?4:m,y=l(s),v=i((0,n.useState)(0),2),A=v[0],b=v[1],x=i((0,n.useState)(null),2),w=x[0],T=x[1],_=function(t){b(t)},I=function(t){T(window.innerHeight)};n.useEffect((function(){if(y)return window.addEventListener("resize",I),function(){window.removeEventListener("resize",I)}}),[]);var k="undefined"!==typeof window?w||window.innerHeight:0,S=y?+s.replace("px","")/k:s,E=(0,n.useMemo)((function(){return function(t,e){for(var r=Math.ceil(e/t),n=[],a=1/r,s=0;s<=r;s+=1)n.push(s*a);return n}(g,k)}),[k]);return n.createElement(n.Fragment,null,e&&n.createElement(h,{offset:s}),n.Children.map(r,(function(t,e){return n.cloneElement(t,{scrollamaId:"react-scrollama-".concat(e),offset:S,onStepEnter:c,onStepExit:d,onStepProgress:f,lastScrollTop:A,handleSetLastScrollTop:_,progressThreshold:E,innerHeight:k})})))};const f=new Map,m=new WeakMap;let g,y=0;function v(t){return Object.keys(t).sort().filter((e=>void 0!==t[e])).map((e=>{return"".concat(e,"_").concat("root"===e?(r=t.root)?(m.has(r)||(y+=1,m.set(r,y.toString())),m.get(r)):"0":t[e]);var r})).toString()}function A(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:{},n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:g;if("undefined"===typeof window.IntersectionObserver&&void 0!==n){const a=t.getBoundingClientRect();return e(n,{isIntersecting:n,target:t,intersectionRatio:"number"===typeof r.threshold?r.threshold:0,time:0,boundingClientRect:a,intersectionRect:a,rootBounds:a}),()=>{}}const{id:a,observer:s,elements:o}=function(t){let e=v(t),r=f.get(e);if(!r){const n=new Map;let a;const s=new IntersectionObserver((e=>{e.forEach((e=>{var r;const s=e.isIntersecting&&a.some((t=>e.intersectionRatio>=t));t.trackVisibility&&"undefined"===typeof e.isVisible&&(e.isVisible=s),null==(r=n.get(e.target))||r.forEach((t=>{t(s,e)}))}))}),t);a=s.thresholds||(Array.isArray(t.threshold)?t.threshold:[t.threshold||0]),r={id:e,observer:s,elements:n},f.set(e,r)}return r}(r);let i=o.get(t)||[];return o.has(t)||o.set(t,i),i.push(e),s.observe(t),function(){i.splice(i.indexOf(e),1),0===i.length&&(o.delete(t),s.unobserve(t)),0===o.size&&(s.disconnect(),f.delete(a))}}function b(){let{threshold:t,delay:e,trackVisibility:r,rootMargin:a,root:s,triggerOnce:o,skip:i,initialInView:c,fallbackInView:l,onChange:u}=arguments.length>0&&void 0!==arguments[0]?arguments[0]:{};const d=n.useRef(),h=n.useRef(),[p,f]=n.useState({inView:!!c});h.current=u;const m=n.useCallback((n=>{void 0!==d.current&&(d.current(),d.current=void 0),i||n&&(d.current=A(n,((t,e)=>{f({inView:t,entry:e}),h.current&&h.current(t,e),e.isIntersecting&&o&&d.current&&(d.current(),d.current=void 0)}),{root:s,rootMargin:a,threshold:t,trackVisibility:r,delay:e},l))}),[Array.isArray(t)?t.toString():t,s,a,o,i,r,l,e]);n.useEffect((()=>{d.current||!p.entry||o||i||f({inView:!!c})}));const g=[m,p.inView,p.entry];return g.ref=g[0],g.inView=g[1],g.entry=g[2],g}var x=function(t){var e=t.children,r=t.data,a=t.handleSetLastScrollTop,s=t.lastScrollTop,o=t.onStepEnter,c=void 0===o?function(){}:o,l=t.onStepExit,u=void 0===l?function(){}:l,d=t.onStepProgress,h=void 0===d?null:d,p=t.offset,f=t.scrollamaId,m=t.progressThreshold,g=t.innerHeight,y="undefined"!==typeof window?document.documentElement.scrollTop:0,v=s<y?"down":"up",A=function(t){return"-".concat(100*t,"% 0px -").concat(100-100*t,"% 0px")}(p),x=(0,n.useRef)(null),w=i((0,n.useState)(!1),2),T=w[0],_=w[1],I=b({rootMargin:A,threshold:0}),k=I.ref,S=I.entry,E=b({rootMargin:(0,n.useMemo)((function(){return function(t,e,r,n){if(!r.current)return"0px";var a=r.current.offsetHeight/n;return"down"===t?"".concat(100*(a-e),"% 0px ").concat(100*e-100,"% 0px"):"-".concat(100*e,"% 0px ").concat(100*a-(100-100*e),"% 0px")}(v,p,x,g)}),[v,p,x,g]),threshold:m}),j=E.ref,O=E.entry,R=(0,n.useCallback)((function(t){x.current=t,k(t),j(t)}),[k,j]);return n.useEffect((function(){if(T){var t=O.target.getBoundingClientRect(),e=t.height,n=t.top,a=Math.min(1,Math.max(0,(window.innerHeight*p-n)/e));h&&h({progress:a,scrollamaId:f,data:r,element:O.target,entry:O,direction:v})}}),[O]),n.useEffect((function(){S&&!S.isIntersecting&&T?(u({element:S.target,scrollamaId:f,data:r,entry:S,direction:v}),_(!1),a(y)):S&&S.isIntersecting&&!T&&(_(!0),c({element:S.target,scrollamaId:f,data:r,entry:S,direction:v}),a(y))}),[S]),n.cloneElement(n.Children.only(e),{"data-react-scrollama-id":f,ref:R,entry:S})}}}]);
//# sourceMappingURL=397.89c423f3.chunk.js.map