{"version":3,"file":"static/js/397.d7542904.chunk.js","mappings":"qQAae,SAASA,IACtB,MAAOC,EAAcC,IAAmBC,EAAAA,EAAAA,UAASC,EAAAA,EAAUC,oBACpDC,EAAYC,IAAiBJ,EAAAA,EAAAA,WAAS,GAEvCK,GAAgBC,EAAAA,EAAAA,GAAiBR,EAAcK,GAC/CI,GAASC,EAAAA,EAAAA,GAAaH,EAAeP,EAAcK,GAazD,OAXAM,EAAAA,EAAAA,YACE,YACEC,EAAAA,EAAAA,IACE,4HAGFL,EAAcM,cAAcC,GAAOA,EAAK,GAC1C,GACA,CAACd,EAAcK,KAIfU,EAAAA,EAAAA,MAAA,OAAKC,UAAU,gBAAeC,SAAA,EAC5BC,EAAAA,EAAAA,KAACC,EAAQ,CACPC,IAAKpB,EACLqB,OAAQpB,EACRqB,QAASC,OAAOC,KAAKrB,EAAAA,EAAUsB,eAAeC,KAAKC,IAAK,CACtDL,QAASK,EACTC,aAAczB,EAAAA,EAAUsB,cAAcE,UAG1CT,EAAAA,EAAAA,KAACW,EAAM,CACLC,MAAM,6BACNV,IAAKf,EACLgB,OAAQf,KAEVS,EAAAA,EAAAA,MAAA,OAAKC,UAAU,wBAAuBC,SAAA,EACpCC,EAAAA,EAAAA,KAACa,EAAiB,CAChB/B,aAAcA,EACdK,WAAYA,EACZE,cAAeA,KAEjBW,EAAAA,EAAAA,KAACc,EAAc,CAACvB,OAAQA,SAIhC,CAEA,SAASsB,EAAiBE,GAAmC,IAAlC,aAAEjC,EAAY,cAAEO,GAAe0B,EACxD,MAAM,UAAEC,EAAS,UAAEC,GAAc5B,EAE3B6B,GAAeC,EAAAA,EAAAA,UACnB,MACEC,KAAM/B,EAAcgC,gBACpBC,OAAQ,CAACL,EAAWD,MAEtB,CAAC3B,EAAcgC,kBAGXE,GAAaJ,EAAAA,EAAAA,UACjB,IACElC,EAAAA,EAAUuC,WAAWhB,KAAKiB,IAAS,IAC9BA,EACHC,SAAUrC,EAAcsC,mBAAmBF,EAAUG,KACrDC,SAAU,CACRT,KAAM/B,EAAcyC,yBAAyBL,EAAUG,KACvDN,OAAQ,CAACL,EAAWD,SAG1B,CAAC3B,EAAcyC,yBAA0BzC,EAAcsC,qBAGzD,OACE9B,EAAAA,EAAAA,MAAAkC,EAAAA,SAAA,CAAAhC,SAAA,EACEC,EAAAA,EAAAA,KAACgC,EAA0B,CACzBpB,MAAO3B,EAAAA,EAAUsB,cAAczB,GAC/BmD,eAAgB5C,EAAc4C,kBAGhCjC,EAAAA,EAAAA,KAACkC,EAAyB,CACxBtB,MAAO3B,EAAAA,EAAUsB,cAAczB,GAC/BqD,iBAAkB9C,EAAc+C,aAChClB,aAAcA,EACdK,WAAYA,MAIpB,CAEA,SAAST,EAAcuB,GAAc,IAAb,OAAE9C,GAAQ8C,EAChC,OACErC,EAAAA,EAAAA,KAACsC,EAAkB,CACjBC,UAAWA,KACT,IAAK,IAAIC,EAAIjD,EAAOkD,OAAS,EAAGD,GAAK,EAAGA,IAAK,CAAC,IAADE,EACtB,QAArBA,EAAAnD,EAAOiD,GAAGG,mBAAW,IAAAD,GAArBA,EAAuBE,MACzB,GACA7C,SAEDR,EAAOiB,KAAI,CAACqC,EAAOL,KAClBxC,EAAAA,EAAAA,KAAC8C,EAAAA,EAAI,CAAS1B,KAAMyB,EAAM9C,UACxBC,EAAAA,EAAAA,KAAC+C,EAAK,CAACF,MAAOA,KADLL,MAMnB,CAEA,SAASvC,EAAQ+C,GAA4B,IAA3B,IAAE9C,EAAG,OAAEC,EAAM,QAAEC,GAAS4C,EACxC,OACEhD,EAAAA,EAAAA,KAAA,UAAQiD,MAAO/C,EAAKgD,SAAWC,GAAMhD,EAAOgD,EAAEC,OAAOH,OAAOlD,SACzDK,EAAQI,KAAI,CAAA6C,EAA2Bb,KAAC,IAA3B,OAAEc,EAAM,aAAE5C,GAAc2C,EAAA,OACpCrD,EAAAA,EAAAA,KAAA,UAAQiD,MAAOK,EAAOvD,SACnBW,GADyB8B,EAEnB,KAIjB,CAEA,SAAS7B,EAAM4C,GAA0B,IAAzB,MAAE3C,EAAK,IAAEV,EAAG,OAAEC,GAAQoD,EACpC,OACE1D,EAAAA,EAAAA,MAAAkC,EAAAA,SAAA,CAAAhC,SAAA,EACEC,EAAAA,EAAAA,KAAA,SAAOwD,QAAQ,YAAWzD,SAAEa,KAC5BZ,EAAAA,EAAAA,KAAA,SACEyD,QAASvD,EACTgD,SAAWC,GAAMhD,EAAOgD,EAAEC,OAAOK,SACjCC,KAAK,WACLC,KAAK,YACLC,GAAG,gBAIX,CAEA,SAAS1B,EAAyB2B,GAK9B,IAL+B,MACjCjD,EAAK,iBACLuB,EAAgB,aAChBjB,EAAY,WACZK,GACDsC,EACC,OACEhE,EAAAA,EAAAA,MAAA,OAAKC,UAAU,4BAA2BC,SAAA,EACxCC,EAAAA,EAAAA,KAAC8D,EAAgB,CACf1B,aAAcD,EACdN,SAAUX,EACVN,MAAOA,IAERW,EAAWf,KAAI,CAACiB,EAAWe,KAC1BxC,EAAAA,EAAAA,KAAC+D,EAAsB,CAAStC,UAAWA,GAAde,OAIrC,CAEA,SAASsB,EAAgBE,GAAqC,IAApC,aAAE5B,EAAY,SAAEP,EAAQ,MAAEjB,GAAOoD,EACzD,OACEnE,EAAAA,EAAAA,MAAAkC,EAAAA,SAAA,CAAAhC,SAAA,EACEC,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,UAC7BC,EAAAA,EAAAA,KAACiE,EAAAA,EAAc,CACbC,YAAa9B,EACb+B,MAAO,IACPC,OAAQnF,EAAAA,EAAUoF,iBAClBC,YAAarF,EAAAA,EAAUsF,kBAG3BvE,EAAAA,EAAAA,KAAA,OAAKF,UAAU,iBAAgBC,UAC7BC,EAAAA,EAAAA,KAACwE,EAAAA,EAAY,CACXL,MAAO,IACPC,OAAQ,IACRhD,KAAMS,EAAST,KACfE,OAAQO,EAASP,YAGrBtB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,6BAA4BC,SAAEa,MAGjD,CAEA,SAASmD,EAAsBU,GAAiB,IAAhB,UAAEhD,GAAWgD,EAC3C,MAAM,IAAE7C,EAAG,KAAE8C,EAAI,KAAEC,EAAI,SAAEjD,EAAQ,SAAEG,GAAaJ,EAChD,OACE5B,EAAAA,EAAAA,MAAA,OAAKC,UAAS,WAAA8E,OAAaF,GAAkBC,KAAMA,EAAK5E,SAAA,EACtDF,EAAAA,EAAAA,MAAA,OAAAE,SAAA,EACEC,EAAAA,EAAAA,KAACiE,EAAAA,EAAc,CACbC,YAAaxC,EACbyC,MAAO,IACPC,OAAQnF,EAAAA,EAAUoF,iBAAmB,EACrCC,YAAarF,EAAAA,EAAUsF,gBAEzBvE,EAAAA,EAAAA,KAACwE,EAAAA,EAAY,CACXL,MAAO,IACPC,OAAQ,IACRhD,KAAMS,EAAST,KACfE,OAAQO,EAASP,aAGrBtB,EAAAA,EAAAA,KAAA,KAAGF,UAAU,iBAAgBC,SAAE4E,MAfO/C,EAkB5C,CAEA,SAASI,EAA0B6C,GAA6B,IAA5B,MAAEjE,EAAK,eAAEqB,GAAgB4C,EAC3D,OACE7E,EAAAA,EAAAA,KAAA,OAAKF,UAAU,oBAAmBC,UAChCF,EAAAA,EAAAA,MAAA,OAAKC,UAAU,YAAWC,SAAA,EACxBC,EAAAA,EAAAA,KAAA,OAAK4D,GAAG,mBACR5D,EAAAA,EAAAA,KAAC8E,EAAAA,EAAW,CACVZ,YAAajC,EACbkC,MAAO,IACPC,OAAQnF,EAAAA,EAAUoF,iBAClBC,YAAarF,EAAAA,EAAUsF,gBAEzBvE,EAAAA,EAAAA,KAAA,KAAGF,UAAU,6BAA4BC,SAAEa,QAInD,CAEA,SAAS0B,EAAkByC,GAA2B,IAA1B,UAAExC,EAAS,SAAExC,GAAUgF,EAWjD,OACElF,EAAAA,EAAAA,MAACmF,EAAAA,EAAS,CAACC,OAAQ,GAAKC,YAXNC,UAAgC,IAADC,EAAA,IAAxB,KAAEhE,EAAI,UAAEiE,GAAWC,EAC1B,OAAdD,IACY,QAAhBD,EAAAhE,EAAKuB,mBAAW,IAAAyC,GAAhBA,EAAkBG,KAAI,EAS4BC,WANjCL,UAAgC,IAADM,EAAA,IAAxB,KAAErE,EAAI,UAAEiE,GAAWK,EACzB,SAAdL,IACY,QAAhBI,EAAArE,EAAKuB,mBAAW,IAAA8C,GAAhBA,EAAkB7C,OAAM,EAIiD7C,SAAA,CACtEA,GACDC,EAAAA,EAAAA,KAAC8C,EAAAA,EAAI,CAAc1B,KAAM,CAAC,EAAErB,UAC1BC,EAAAA,EAAAA,KAAC2F,EAAW,CAACpD,UAAWA,KADf,UAKjB,E,0BAEA,MAAMQ,GAAQ6C,EAAAA,EAAAA,aAAW,SAAcC,EAAYC,GAAM,IAAjB,MAAEjD,GAAOgD,EAC/C,OACE7F,EAAAA,EAAAA,KAAA,OAAK8F,IAAKA,EAAKhG,UAAU,gBAAeC,SACrC8C,EAAMkD,MAGb,IAEMJ,GAAcC,EAAAA,EAAAA,aAAW,SAAoBI,EAAgBF,GAAM,IAArB,UAAEvD,GAAWyD,EAC/D,OACEhG,EAAAA,EAAAA,KAAA,OAAK8F,IAAKA,EAAKhG,UAAU,gBAAgBmG,MAAO,CAAEC,aAAc,QAASnG,UACvEC,EAAAA,EAAAA,KAAA,UACEmG,QAASA,KACPC,OAAOC,SAAS,EAAG,GACnB9D,GAAW,EACXxC,SACH,iBAKP,I,mJC5QO,MACMuG,EAAsB,QACtBC,EAAmB,SACnBC,EAAyB,eAEzBC,QAAwBtB,iBACnC,MAAMuB,cAAoBC,MAAM,sCAAsCC,OAEtE,IAAK,MAAMC,KAAOH,EAAM,CACtB,IAAK,MAAMI,KAAQD,EAAIP,GACrBQ,EAAKN,GAA0BO,MAAMC,KAAKF,EAAKP,IAC/CO,EAAKP,GAAoBQ,MAAMC,KAAKF,EAAKP,IAAmBU,MAC1D,CAACC,EAAGC,IAAMA,EAAID,IAGlBL,EAAIP,IAAuBc,EAAAA,EAAAA,IACzBP,EAAIP,IACJvF,IAAA,IAAC,KAAE4C,GAAM5C,EAAA,OAAK4C,CAAI,GAEtB,CAIA,OAFA0D,QAAQC,IAAI,kCAELF,EAAAA,EAAAA,IAAMV,GAAMrE,IAAA,IAAC,IAAEwE,GAAKxE,EAAA,OAAKwE,CAAG,GACrC,CAnBqC1B,GAqBT9E,OAAOC,KAAKmG,GACbpG,OAAOC,KAChCD,OAAOkH,OAAOd,GAAgB,GAAGH,I,+DCuCnC,SAASkB,EAAYzG,EAAyBa,GAAM,IAA9B,aAAE6F,EAAY,KAAE9C,GAAM5D,EAC1C,MAAO,CACLa,MACA6F,eACA9C,OACA+C,SAAS,OAAD9C,OAAS6C,GACjB/C,KAAK,OAADE,OAAShD,EAAM,GAEvB,CAEO,MAAM3C,EArBJ,CACL0I,gBAvDsB,IAwDtBtD,iBAvDmB,IAwDnBE,a,OA/CmBqD,GAgDnB1I,kBA9CwB,mBA+CxB2I,kBA9CwB,WA+CxBrG,WA7CkB,CAClB,CACEiG,aAAc,OACd9C,KAAM,iBAER,CACE8C,aAAc,OACd9C,KAAM,sBAER,CACE8C,aAAc,OACd9C,KAAM,wBAER,CACE8C,aAAc,OACd9C,KAAM,sBAER,CACE8C,aAAc,OACd9C,KAAM,gBAIqBnE,IAAIgH,GAuBjCjH,cArBoB,CACpBuH,iBAAkB,mBAClBC,iBAAkB,mBAClBC,iBAAkB,mBAClBC,iBAAkB,mBAClBC,mBAAoB,qBACpBC,gBAAiB,kBACjBC,IAAK,MACLC,OAAQ,SACRC,OAAQ,SACRC,cAAe,gBACfC,cAAe,iB,qKC1CnB,MAAMX,EAAoB,WAE1B,SAASY,IA8WP,MAAO,CACLC,mBA9WF,SAA2B3H,GAAmC,IACxD4H,EACAC,EACAC,EACAC,EACAC,GALsB,KAAEC,EAAI,UAAEC,EAAS,WAAE9J,GAAY4B,EAOzD,MAAMmI,EAA0B,GAA1BA,EAAqC,GAArCA,EAAiD,GAAjDA,EAA2D,GAqOjE,OAnOA,WACE,CACEC,EAAAA,OAAU,sBAAsBC,SAEhC,MAAMC,EAAWF,EAAAA,OACP,kBACPG,KACC,QACArK,EAAAA,EAAU0I,gBACRuB,EACAA,GAEHI,KACC,SACArK,EAAAA,EAAUoF,iBACR6E,EACAA,GAEHI,KAAK,UAAW,GAChBC,OAAO,KACPD,KAAK,QAAS,aACdA,KACC,YAAY,aAAD1E,OACEsE,EAAqB,KAAAtE,OAAIsE,EAAoB,MAGxDM,EACJ/C,EAAAA,GAAewC,GAAW3C,EAAAA,IAAqBuB,GAC7CrB,EAAAA,IAGJuC,EAAaC,EAAKhI,UAClB8H,EAAaE,EAAK/H,UAElB,MAAMwI,EAAiBD,EACpBhJ,KAAI,CAACN,EAAKwJ,KAAa,CACtBxJ,MACAwJ,gBACAC,KAAMD,EAAgB,MAEvBzC,MAAK,CAACC,EAAGC,IAAMA,EAAEjH,IAAMgH,EAAEhH,MAEtB0J,EAAIT,EAAAA,YAEP7H,OAAOmI,EAAejJ,KAAI6B,IAAA,IAAC,KAAEsH,GAAMtH,EAAA,OAAKsH,CAAI,IAAE1C,MAAK,CAACC,EAAGC,IAAMD,EAAIC,KACjE0C,MAAM,CAAC,EAAG5K,EAAAA,EAAU0I,kBACpBmC,QAAQ,IACLC,EAAIZ,EAAAA,cAEP7H,OAAO,CAACwH,EAAYC,IACpBc,MAAM,CAAC5K,EAAAA,EAAUoF,iBAAkB,IAEhC2F,EAAQb,EAAAA,WACAS,GACXK,SAAS,GACTC,YAAYC,GAAC,QAAAvF,OAAauF,KAC1BC,WACCR,EAAEtI,SAAS+I,QAAO,CAACC,EAAG9H,IAAY,IAANA,IAAYA,EAAI,GAAK,KAAO,KAG5D6G,EAASE,OAAO,KAAKD,KAAK,QAAS,cACnCD,EAASE,OAAO,KAAKD,KAAK,QAAS,UACnCD,EACGkB,OAAO,eACPjB,KAAK,UAAW,GAChBA,KAAK,YAAY,gBAAD1E,OAAkB3F,EAAAA,EAAUoF,iBAAgB,MAC5DmG,KAAKR,GACLS,UAAU,QACVnB,KAAK,YAAa,+BAClBrD,MAAM,cAAe,OACxBoD,EACGkB,OAAO,WACPC,KAAKrB,EAAAA,SAAYY,GAAGG,WAAWf,EAAAA,OAAU,SACzCI,OAAO,QACPxD,KAAK,oBACLuD,KAAK,OAAQ,SACbA,KAAK,cAAe,QACpBA,KACC,YAAY,kBAAD1E,OACO3F,EAAAA,EAAUoF,iBAAmB,EAAC,kBAGpDsE,EAAWiB,EACXhB,EAASoB,EACTnB,EAAkBY,CACpB,CACF,CA2IAiB,GAEO,CACLC,WAAY,CACVpF,GA7IJ,WACE,CACE,MAAMwE,EAAIZ,EAAAA,cAEP7H,OAAO,CAACwH,EAAYC,IACpBc,MAAM,CAAC5K,EAAAA,EAAUoF,iBAAkB,IAEtC8E,EAAAA,OAAU,6BACPsB,UAAU,SACVrJ,KAAKyH,GAAkBsB,GAAMA,EAAET,gBAC/BkB,KAAK,QACLtB,KAAK,QAAS,QACdA,KAAK,KAAMa,GAAMxB,EAASwB,EAAER,QAC5BL,KAAK,IAAKrK,EAAAA,EAAUoF,kBACpBiF,KAAK,QAASX,EAASkC,aACvBvB,KAAK,SAAU,GACfA,KAAK,UAAW,GAChBA,KAAK,OAAQ,aACbwB,aACAC,SAAS,KACTC,OAAOb,GAAwB,GAAlBA,EAAET,gBACfJ,KAAK,KAAMa,GAAMJ,EAAEI,EAAEjK,OACrBoJ,KAAK,UAAWa,GAAMlL,EAAAA,EAAUoF,iBAAmB0F,EAAEI,EAAEjK,MAC5D,CACF,EAsHI0C,KApHJ,WAEIuG,EAAAA,OAAU,6BACPsB,UAAU,SACVrJ,KAAKyH,GAAkBsB,GAAMA,EAAET,gBAC/BoB,aACAC,SAAS,KACTC,OAAOb,GAAuD,IAAhDtB,EAAgBpG,OAAS0H,EAAET,cAAgB,KACzDJ,KAAK,IAAKrK,EAAAA,EAAUoF,kBACpBiF,KAAK,SAAU,EAEtB,GA2GE2B,aAAc,CACZ1F,GA1GJJ,iBACE,CACE,MAAM+F,EAAWjM,EAAAA,EAAU0I,gBAAkB,EACvC0B,EAAWF,EAAAA,OAAU,6BAE3BE,EAASkB,OAAO,eAAeC,KAAK5B,EAAOsB,WAAW,KAEtD,MAAMiB,EAAO9B,EAASoB,UAAU,SAEhCU,EACGlF,MAAM,iBAAkB,YACxB6E,aACAC,SAAS,KACTzB,KAAK,UAAW,KAChBwB,aACAE,OACEb,GACC,IAC4D,KAA3D,GAAK,EAAIA,EAAET,cAAgBb,EAAgBpG,SAAW,KAE1DsI,SAAS,KACTzB,KAAK,QAAS4B,GACd5B,KAAK,IAAKrK,EAAAA,EAAU0I,gBAAkB,EAAIuD,EAAW,GACrDE,MACAC,OAAM,SACNC,MAAK,KACJjC,EACGkB,OAAO,eACPO,aACAA,WAAW,KACXxB,KACC,YAAY,gBAAD1E,OACK3F,EAAAA,EAAUoF,iBAAmB,GAAE,MAEhDiF,KAAK,UAAW,GAEnB6B,EAAKL,aAAaE,MAAM,KAAK1B,KAAK,IAAK,GAEvCD,EACGyB,aACAE,MAAM,KACN1B,KACC,YAAY,aAAD1E,OAETsE,EACAjK,EAAAA,EAAU0I,gBAAkB,EAC5BuD,EAAW,EAAC,KAAAtG,OACVsE,EAAoB,KACzB,GAET,CACF,EAwDItG,KAtDJ,WACE,CACE,MAAMyG,EAAWF,EAAAA,OAAU,6BAErBgC,EAAO9B,EAASoB,UAAU,SAEhCpB,EACGkB,OAAO,eACPO,aACAA,WAAW,KACXxB,KAAK,YAAY,gBAAD1E,OAAkB3F,EAAAA,EAAUoF,iBAAgB,MAC5DiF,KAAK,UAAW,GAEnBD,EACGkB,OAAO,eACPC,KAAK5B,EAAOsB,YAAYC,GAAC,QAAAvF,OAAauF,MAEzCd,EACGyB,aACAE,MAAM,KACN1B,KACC,YAAY,aAAD1E,OACEsE,EAAqB,KAAAtE,OAAIsE,EAAoB,MAG9DiC,EACGL,aACAE,OACEb,GACC,IAA8D,KAAvD,GAAKA,EAAET,cAAgBb,EAAgBpG,SAAW,KAE5DsI,SAAS,KACTzB,KAAK,KAAMa,GAAMxB,EAASwB,EAAER,QAC5BL,KAAK,QAASX,EAASkC,aACvBC,aACAC,SAAS,KACTzB,KAAK,UAAW,GAChB8B,MACAC,OAAM,SACNC,MAAK,KACJH,EAAKlF,MAAM,iBAAkB,SAAS,GAE5C,CACF,GAcF,EAyHEsF,oBAvHF,SAA4BvI,GAAuB,IAAtB,KAAEgG,EAAI,UAAEC,GAAWjG,EAqB9C,MAAO,CACLuC,GArBF,WACE4D,EAAAA,UAAa,sCAAsClD,MACjD,UACA,WAEFkD,EAAAA,OAAU,kBAAkBG,KAAK,UAAW,GAE5CN,EAAKwC,mBAAkB,IAAMxC,EAAKyC,mBACpC,EAcE7I,KAZF,WACEoG,EAAKwC,mBAAkB,IAAMrC,EAAAA,cAAiBU,MAAM,CAAC,EAAG,MAExDV,EAAAA,UAAa,sCAAsClD,MACjD,UACA,QAEFkD,EAAAA,OAAU,kBAAkB2B,aAAaxB,KAAK,UAAW,EAC3D,EAMF,EA+FEoC,iBA7FF,SAAyBrI,GAAuB,IAAtB,KAAE2F,EAAI,UAAEC,GAAW5F,EAe3C,MAAO,CACLkC,GAfF,YACEoG,EAAAA,EAAAA,IAAU,oBACVA,EAAAA,EAAAA,IAAU,6BAA8BxC,EAAI,SAC5CzJ,EAAAA,EAAAA,IAAU,uCACVsJ,EAAK4C,iBAAgB,IAAM5C,EAAK6C,uBAClC,EAWEjJ,KATF,YACElD,EAAAA,EAAAA,IAAU,gDACViM,EAAAA,EAAAA,IAAU,oBACVA,EAAAA,EAAAA,IAAU,qBAAsBxC,EAAI,QACpCH,EAAK4C,iBAAgB,IAAMzC,EAAAA,cAAiBU,MAAM,CAAC,EAAG,KACxD,EAMF,EA2EEiC,uBAzEF,SAA+BvI,GAAY,IAAX,KAAEyF,GAAMzF,EACtC,MAAO,CACLgC,GAAI,WAEF4D,EAAAA,UAAa,YACVlD,MAAM,UAAW,WACjB8F,QAAQ,YAAY,GAEvB5C,EAAAA,UAAa,+CAA+ClD,MAC1D,UACA,QAGF+C,EAAKgD,sBAAsBhD,EAAKiD,6BAGhC9C,EAAAA,UAAa,mBAAmBlD,MAAM,UAAW,SAIjDkD,EAAAA,UAAa,mBAAmBlD,MAAM,UAAW,KAEjDkD,EAAAA,OAAU,mBACP2B,aACA7E,MAAM,YAAa,gCAEtBkD,EAAAA,OAAU,mCACP2B,aACA7E,MAAM,YAAa,YAEtBkD,EAAAA,OAAU,mBAAmBlD,MAAM,UAAW,WAC9CkD,EAAAA,UAAa,mCAAmClD,MAC9C,UACA,UAEJ,EACArD,KAAM,WAEJuG,EAAAA,OAAU,mBAAmB2B,aAAa7E,MAAM,YAAa,QAE7DkD,EAAAA,OAAU,mCACP2B,aACA7E,MAAM,YAAa,YAEtBkD,EAAAA,OAAU,mBAAmBlD,MAAM,UAAW,QAC9CkD,EAAAA,UAAa,mCAAmClD,MAC9C,UACA,QAIFkD,EAAAA,UAAa,mBAAmBlD,MAAM,UAAW,QAGjDkD,EAAAA,UAAa,+CAA+ClD,MAC1D,UACA,WAEFkD,EAAAA,UAAa,YACVlD,MAAM,UAAW,QACjB8F,QAAQ,YAAY,GAEvB/C,EAAKgD,sBACH/M,EAAAA,EAAUuC,WAAWhB,KAAI,IAAM2I,EAAAA,cAAiBU,MAAM,CAAC,EAAG,MAE9D,EAEJ,EAQF,CAEO,MAAMqC,EAAazD,I,4GClYnB,SAASjJ,EAAawJ,EAAMC,EAAW9J,GAU5C,MAAOI,EAAQ4M,IAAanN,EAAAA,EAAAA,UAAS,IA8CrC,OA5CAS,EAAAA,EAAAA,YACE,WACE,GAAuB,IAAnBuJ,EAAKoD,UAAiB,OAE1B,MAAMC,EAAU,CAAErD,OAAMC,YAAW9J,cAE7BmN,EAAiBC,EAAAA,EAAM7D,mBAAmB2D,GAC1CG,EAAkBD,EAAAA,EAAMhB,oBAAoBc,GAC5CI,EAAeF,EAAAA,EAAMb,iBAAiBW,GACtCK,EAAqBH,EAAAA,EAAMT,uBAAuBO,GAElDM,EAAU,CACd,CACEhJ,KAAM,aACNhB,YAAa2J,EAAe3B,WAC5B5E,KAAM,aAER,CACEpC,KAAM,eACNhB,YAAa2J,EAAerB,aAC5BlF,KAAM,YAER,CACEpC,KAAM,cACNhB,YAAa6J,EACbzG,KAAM,UAER,CACEpC,KAAM,kBACNhB,YAAa8J,EACb1G,KAAM,aAER,CACEpC,KAAM,kBACNhB,YAAa+J,EACb3G,KAAM,wBAIVoG,EAAUQ,EACZ,GACA,CAAC3D,EAAKoD,YAGD7M,CACT,C,8KChDe,SAASD,EAAiB2J,EAAW9J,GAClD,MAAOiN,EAAWzM,IAAgBX,EAAAA,EAAAA,UAAS,IACpCgC,EAAW4L,IAAgB5N,EAAAA,EAAAA,UAAS,IACpCiC,EAAW4L,IAAgB7N,EAAAA,EAAAA,UAAS,IAEpCiD,EAAgBuJ,IAAqBxM,EAAAA,EAAAA,WAAS,IACnDmK,EAAAA,cAAiBU,MAAM,CAAC,EAAG,OAEtBzH,EAAcwJ,IAAmB5M,EAAAA,EAAAA,WAAS,IAC/CmK,EAAAA,cAAiBU,MAAM,CAAC,EAAG,OAEtB4B,EAAmBqB,IAAwB9N,EAAAA,EAAAA,WAAS,IACzDmK,EAAAA,cAAiBU,MAAM,CAAC,EAAG,OAEtBgC,EAAuBkB,IAA4B/N,EAAAA,EAAAA,WAAS,IACjEmK,EAAAA,cAAiBU,MAAM,CAAC,EAAG,OAGtBlI,EAAoBqK,IAAyBhN,EAAAA,EAAAA,WAAS,IAC3DC,EAAAA,EAAUuC,WAAWhB,KAAI,IAAM2I,EAAAA,cAAiBU,MAAM,CAAC,EAAG,SAGrDxI,EAAiB2L,IAAsBhO,EAAAA,EAAAA,WAAS,IAAM,MACtD8C,EAA0BmL,IAA+BjO,EAAAA,EAAAA,WAAS,IACvEC,EAAAA,EAAUuC,WAAWhB,KAAI,IAAM,QAE1ByL,EAA6BiB,IAClClO,EAAAA,EAAAA,WAAS,IACPC,EAAAA,EAAUuC,WAAWhB,KAAI,IAAM2I,EAAAA,cAAiBU,MAAM,CAAC,EAAG,QA+F9D,OA5FApK,EAAAA,EAAAA,YAAU,KACR+L,GAAkB,IAAMrC,EAAAA,cAAiBU,MAAM,CAAC,EAAG,MACnD+B,GAAgB,IAAMzC,EAAAA,cAAiBU,MAAM,CAAC,EAAG,MACjDmC,GAAsB,IACpB/M,EAAAA,EAAUuC,WAAWhB,KAAI,IAAM2I,EAAAA,cAAiBU,MAAM,CAAC,EAAG,QAG5D,MAAMsD,EACJ1G,EAAAA,GAAewC,GAAW3C,EAAAA,IACxBrH,EAAAA,EAAU4I,mBACVtB,EAAAA,IACJ,IAAIvF,EAAWC,EAKf,GAHAD,EACgB,QAAdiI,EAAsBE,EAAAA,SAAYgE,EAAW,KAAQhE,EAAAA,IAAOgE,GAE1DhO,EAAY,CACd,MAAMiO,EAAc,CAClBnO,EAAAA,EAAU4I,qBACP5I,EAAAA,EAAUuC,WAAWhB,KAAIO,IAAA,IAAC,SAAE2G,GAAU3G,EAAA,OAAK2G,CAAQ,KACtDlH,KAAKkH,GACLyB,EAAAA,IACE1C,EAAAA,GAAewC,GAAW3C,EAAAA,IAAqBoB,GAC7CnB,EAAAA,OAINtF,EAAYkI,EAAAA,IAAOiE,EACrB,MACEnM,EAAY,EAGd2L,EAAa5L,GACb6L,EAAa5L,GAEb+L,GAAmB,IAAMG,IAEzB,MAAME,EAA0BlE,EAAAA,cAE7B7H,QAAOgM,EAAAA,EAAAA,IAAW,EAAG,EAAGH,EAAU1K,SAClCoH,MACCsD,EACG3M,KAAK+M,IAAOA,EAAItM,IAAcD,EAAYC,KAC1CgG,OACAuG,WAEJC,OAAM,GAEH5B,EAAyB3L,IAC7BwN,EAAAA,EAAAA,IACEvE,EAAAA,cAEG7H,QAAOgM,EAAAA,EAAAA,IAAW,EAAG,EAAGH,EAAU1K,SAClCoH,MACCsD,EACG3M,KAAK+M,IAAOA,EAAItM,IAAcD,EAAYC,KAC1CgG,OACAuG,WAEJC,OAAM,EATTtE,CASejJ,IAGnB4M,GAAqB,IAAMO,IAC3BN,GAAyB,IAAMlB,IAE/B,MAAM8B,EAAe1O,EAAAA,EAAUuC,WAAWhB,KACxC6B,IAAA,IAAC,SAAEqF,GAAUrF,EAAA,OACXoE,EAAAA,GAAewC,GAAW3C,EAAAA,IAAqBoB,GAC7CnB,EAAAA,GACD,IAGCqH,EAAUD,EAAanN,KAC1BqN,GAAe3N,IACdwN,EAAAA,EAAAA,IACEvE,EAAAA,cAEG7H,QAAOgM,EAAAA,EAAAA,IAAW,EAAG,EAAGO,EAAUpL,SAClCoH,MACCgE,EACGrN,KAAK+M,IAAOA,EAAItM,IAAcD,EAAYC,KAC1CgG,OACAuG,WAEJC,OAAM,EATTtE,CASejJ,MAIrB+M,GAA4B,IAAMU,IAClCT,GAA+B,IAAMU,GAAQ,GAC5C,CAAC3E,EAAW9J,IAER,CACLiN,YACAzM,eACAqB,YACAC,YACAgB,iBACAuJ,oBACApJ,eACAwJ,kBACAjK,qBACAqK,wBACA3K,kBACAoK,oBACAI,wBACA/J,2BACAmK,8BAEJ,E","sources":["ExplanationAnimApp.jsx","data/completeObjectivesData.jsx","utils/explanation-anim/constants.jsx","utils/explanation-anim/data-story-anims.jsx","utils/explanation-anim/useDataStory.jsx","utils/explanation-anim/useTutorialState.jsx"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport React, { forwardRef, useEffect, useMemo, useState } from \"react\";\r\nimport { Scrollama, Step } from \"react-scrollama\";\r\n\r\nimport BucketGlyph from \"./bucket-lib/BucketGlyph\";\r\n\r\nimport DotHistogram from \"./utils/explanation-anim/DotHistogram\";\r\nimport WaterdropGlyph from \"./utils/explanation-anim/WaterdropGlyph\";\r\nimport { constants } from \"./utils/explanation-anim/constants\";\r\nimport { hideElems } from \"./utils/explanation-anim/render-utils\";\r\nimport { useDataStory } from \"./utils/explanation-anim/useDataStory\";\r\nimport useTutorialState from \"./utils/explanation-anim/useTutorialState\";\r\n\r\nexport default function ExplanationAnimApp() {\r\n  const [curObjective, setCurObjective] = useState(constants.DEFAULT_OBJECTIVE);\r\n  const [normalized, setNormalized] = useState(false);\r\n\r\n  const tutorialState = useTutorialState(curObjective, normalized);\r\n  const slides = useDataStory(tutorialState, curObjective, normalized);\r\n\r\n  useEffect(\r\n    function changeObjective() {\r\n      hideElems(\r\n        \".bucket-wrapper, .vardrop, .var-scen-label, .vardrop .dot-histogram-wrapper, .main-histogram, .tut-drop-graphics-wrapper\"\r\n      );\r\n\r\n      tutorialState.setReadyHash((rh) => rh + 1);\r\n    },\r\n    [curObjective, normalized]\r\n  );\r\n\r\n  return (\r\n    <div className=\"tutorial-view\">\r\n      <Selector\r\n        val={curObjective}\r\n        setVal={setCurObjective}\r\n        options={Object.keys(constants.SELECTED_OBJS).map((objId) => ({\r\n          options: objId,\r\n          display_name: constants.SELECTED_OBJS[objId],\r\n        }))}\r\n      />\r\n      <Toggle\r\n        label=\"normalize across scenarios\"\r\n        val={normalized}\r\n        setVal={setNormalized}\r\n      />\r\n      <div className=\"scrollama scrollama-1\">\r\n        <DataStoryGraphics\r\n          curObjective={curObjective}\r\n          normalized={normalized}\r\n          tutorialState={tutorialState}\r\n        />\r\n        <DataStoryTexts slides={slides} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryGraphics({ curObjective, tutorialState }) {\r\n  const { maxDelivs, minDelivs } = tutorialState;\r\n\r\n  const mainHistData = useMemo(\r\n    () => ({\r\n      data: tutorialState.objectiveDelivs,\r\n      domain: [minDelivs, maxDelivs],\r\n    }),\r\n    [tutorialState.objectiveDelivs]\r\n  );\r\n\r\n  const variations = useMemo(\r\n    () =>\r\n      constants.VARIATIONS.map((variation) => ({\r\n        ...variation,\r\n        interper: tutorialState.variationInterpers[variation.idx],\r\n        histData: {\r\n          data: tutorialState.objectiveVariationDelivs[variation.idx],\r\n          domain: [minDelivs, maxDelivs],\r\n        },\r\n      })),\r\n    [tutorialState.objectiveVariationDelivs, tutorialState.variationInterpers]\r\n  );\r\n\r\n  return (\r\n    <>\r\n      <BucketConstructionGraphics\r\n        label={constants.SELECTED_OBJS[curObjective]}\r\n        bucketInterper={tutorialState.bucketInterper}\r\n      />\r\n\r\n      <ScenarioComparingGraphics\r\n        label={constants.SELECTED_OBJS[curObjective]}\r\n        mainDropInterper={tutorialState.dropInterper}\r\n        mainHistData={mainHistData}\r\n        variations={variations}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DataStoryTexts({ slides }) {\r\n  return (\r\n    <DataStoryScrollama\r\n      cleanupFn={() => {\r\n        for (let i = slides.length - 1; i >= 0; i--) {\r\n          slides[i].animHandler?.undo();\r\n        }\r\n      }}\r\n    >\r\n      {slides.map((slide, i) => (\r\n        <Step key={i} data={slide}>\r\n          <Slide slide={slide} />\r\n        </Step>\r\n      ))}\r\n    </DataStoryScrollama>\r\n  );\r\n}\r\n\r\nfunction Selector({ val, setVal, options }) {\r\n  return (\r\n    <select value={val} onChange={(e) => setVal(e.target.value)}>\r\n      {options.map(({ option, display_name }, i) => (\r\n        <option value={option} key={i}>\r\n          {display_name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}\r\n\r\nfunction Toggle({ label, val, setVal }) {\r\n  return (\r\n    <>\r\n      <label htmlFor=\"normalize\">{label}</label>\r\n      <input\r\n        checked={val}\r\n        onChange={(e) => setVal(e.target.checked)}\r\n        type=\"checkbox\"\r\n        name=\"normalize\"\r\n        id=\"normalize\"\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction ScenarioComparingGraphics({\r\n  label,\r\n  mainDropInterper,\r\n  mainHistData,\r\n  variations,\r\n}) {\r\n  return (\r\n    <div className=\"tut-drop-graphics-wrapper\">\r\n      <MainScenarioInfo\r\n        dropInterper={mainDropInterper}\r\n        histData={mainHistData}\r\n        label={label}\r\n      />\r\n      {variations.map((variation, i) => (\r\n        <VariationScenarioPanel key={i} variation={variation} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MainScenarioInfo({ dropInterper, histData, label }) {\r\n  return (\r\n    <>\r\n      <div className=\"main-waterdrop\">\r\n        <WaterdropGlyph\r\n          levelInterp={dropInterper}\r\n          width={400}\r\n          height={constants.BAR_CHART_HEIGHT}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n      </div>\r\n      <div className=\"main-histogram\">\r\n        <DotHistogram\r\n          width={330}\r\n          height={220}\r\n          data={histData.data}\r\n          domain={histData.domain}\r\n        />\r\n      </div>\r\n      <p className=\"fancy-font objective-label\">{label}</p>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction VariationScenarioPanel({ variation }) {\r\n  const { idx, clas, desc, interper, histData } = variation;\r\n  return (\r\n    <div className={`vardrop ${clas}`} key={idx} desc={desc}>\r\n      <div>\r\n        <WaterdropGlyph\r\n          levelInterp={interper}\r\n          width={200}\r\n          height={constants.BAR_CHART_HEIGHT / 2}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n        <DotHistogram\r\n          width={330}\r\n          height={220}\r\n          data={histData.data}\r\n          domain={histData.domain}\r\n        />\r\n      </div>\r\n      <p className=\"var-scen-label\">{desc}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BucketConstructionGraphics({ label, bucketInterper }) {\r\n  return (\r\n    <div className=\"tut-graph-wrapper\">\r\n      <div className=\"tut-graph\">\r\n        <svg id=\"pag-bar-graph\"></svg>\r\n        <BucketGlyph\r\n          levelInterp={bucketInterper}\r\n          width={300}\r\n          height={constants.BAR_CHART_HEIGHT}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n        <p className=\"fancy-font objective-label\">{label}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryScrollama({ cleanupFn, children }) {\r\n  const onStepEnter = async ({ data, direction }) => {\r\n    if (direction === \"up\") return;\r\n    data.animHandler?.do();\r\n  };\r\n\r\n  const onStepExit = async ({ data, direction }) => {\r\n    if (direction === \"down\") return;\r\n    data.animHandler?.undo();\r\n  };\r\n\r\n  return (\r\n    <Scrollama offset={0.9} onStepEnter={onStepEnter} onStepExit={onStepExit}>\r\n      {children}\r\n      <Step key={\"last\"} data={{}}>\r\n        <ReturnToTop cleanupFn={cleanupFn} />\r\n      </Step>\r\n    </Scrollama>\r\n  );\r\n}\r\n\r\nconst Slide = forwardRef(function Slide({ slide }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\">\r\n      {slide.text}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ReturnToTop = forwardRef(function ReturnToTop({ cleanupFn }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\" style={{ marginBottom: \"40vh\" }}>\r\n      <button\r\n        onClick={() => {\r\n          window.scrollTo(0, 0);\r\n          cleanupFn();\r\n        }}\r\n      >\r\n        Back to Top\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n","import { mapBy } from \"../utils/utils\";\r\n\r\nexport const MAX_DELIVS = 1200;\r\nexport const SCENARIO_KEY_STRING = \"scens\";\r\nexport const DELIV_KEY_STRING = \"delivs\";\r\nexport const DELIV_KEY_STRING_UNORD = \"delivs_unord\";\r\n\r\nexport const objectivesData = await (async function () {\r\n  const objs = await (await fetch(\"./select_complete_objectives.json\")).json();\r\n\r\n  for (const obj of objs) {\r\n    for (const scen of obj[SCENARIO_KEY_STRING]) {\r\n      scen[DELIV_KEY_STRING_UNORD] = Array.from(scen[DELIV_KEY_STRING]);\r\n      scen[DELIV_KEY_STRING] = Array.from(scen[DELIV_KEY_STRING]).sort(\r\n        (a, b) => b - a\r\n      );\r\n    }\r\n    obj[SCENARIO_KEY_STRING] = mapBy(\r\n      obj[SCENARIO_KEY_STRING],\r\n      ({ name }) => name\r\n    );\r\n  }\r\n\r\n  console.log(\"DATA: loading objectives data\");\r\n\r\n  return mapBy(objs, ({ obj }) => obj);\r\n})();\r\n\r\nexport const objectiveIDs = Object.keys(objectivesData);\r\nexport const scenarioIDs = Object.keys(\r\n  Object.values(objectivesData)[0][SCENARIO_KEY_STRING]\r\n);\r\n","import * as d3 from \"d3\";\r\nimport { interpolateWatercolorBlue } from \"../../bucket-lib/utils\";\r\n\r\nfunction initConstants() {\r\n  const BAR_CHART_WIDTH = 500,\r\n    BAR_CHART_HEIGHT = 400;\r\n\r\n  // const INTERP_COLOR = d3.interpolateRgbBasis([\r\n  //   \"#F2F5FB\",\r\n  //   \"#D0DDEB\",\r\n  //   \"#7B9BC0\",\r\n  //   \"#4F739F\",\r\n  //   \"#112A57\",\r\n  // ]);\r\n  const INTERP_COLOR = interpolateWatercolorBlue;\r\n\r\n  const DEFAULT_OBJECTIVE = \"DEL_NOD_AG_TOTAL\";\r\n  const BASELINE_SCENARIO = \"expl0000\";\r\n\r\n  const _VARIATIONS = [\r\n    {\r\n      scen_num_str: \"0004\",\r\n      desc: \"natural flows\",\r\n    },\r\n    {\r\n      scen_num_str: \"0015\",\r\n      desc: \"reduce delta regs.\",\r\n    },\r\n    {\r\n      scen_num_str: \"0320\",\r\n      desc: \"prioritize carryover\",\r\n    },\r\n    {\r\n      scen_num_str: \"0360\",\r\n      desc: \"municipal priority\",\r\n    },\r\n    {\r\n      scen_num_str: \"0261\",\r\n      desc: \"rebalancing\",\r\n    },\r\n  ];\r\n\r\n  const VARIATIONS = _VARIATIONS.map(extendVarObj);\r\n\r\n  const SELECTED_OBJS = {\r\n    DEL_NOD_AG_TOTAL: \"DEL_NOD_AG_TOTAL\",\r\n    DEL_SJV_AG_TOTAL: \"DEL_SJV_AG_TOTAL\",\r\n    DEL_NOD_MI_TOTAL: \"DEL_NOD_MI_TOTAL\",\r\n    DEL_SJV_MI_TOTAL: \"DEL_SJV_MI_TOTAL\",\r\n    DEL_SOCAL_MI_TOTAL: \"DEL_SOCAL_MI_TOTAL\",\r\n    CVP_SWP_EXPORTS: \"CVP_SWP_EXPORTS\",\r\n    NDO: \"NDO\",\r\n    SAC_IN: \"SAC_IN\",\r\n    SJR_IN: \"SJR_IN\",\r\n    STO_NOD_TOTAL: \"STO_NOD_TOTAL\",\r\n    STO_SOD_TOTAL: \"STO_SOD_TOTAL\",\r\n  };\r\n\r\n  return {\r\n    BAR_CHART_WIDTH,\r\n    BAR_CHART_HEIGHT,\r\n    INTERP_COLOR,\r\n    DEFAULT_OBJECTIVE,\r\n    BASELINE_SCENARIO,\r\n    VARIATIONS,\r\n    SELECTED_OBJS,\r\n  };\r\n}\r\n\r\nfunction extendVarObj({ scen_num_str, desc }, idx) {\r\n  return {\r\n    idx,\r\n    scen_num_str,\r\n    desc,\r\n    scen_str: `expl${scen_num_str}`,\r\n    clas: `drop${idx + 1}`,\r\n  };\r\n}\r\n\r\nexport const constants = initConstants();\r\n","import * as d3 from \"d3\";\r\n\r\nimport { objectivesData } from \"../../data/completeObjectivesData\";\r\n\r\nimport { constants } from \"./constants\";\r\nimport { hideElems, showElems } from \"./render-utils\";\r\nimport {\r\n  DELIV_KEY_STRING_UNORD,\r\n  SCENARIO_KEY_STRING,\r\n} from \"../../data/objectivesData\";\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nconst BASELINE_SCENARIO = \"expl0000\";\r\n\r\nfunction initAllAnims() {\r\n  function initChartAnimGroup({ deps, objective, normalized }) {\r\n    let _XInterp;\r\n    let _XAxis;\r\n    let _dataDescending;\r\n    let _minDelivs;\r\n    let _maxDelivs;\r\n\r\n    const BAR_CHART_MARGIN = { top: 40, right: 30, bottom: 40, left: 60 };\r\n\r\n    function prepareSVG() {\r\n      {\r\n        d3.select(\"#pag-bar-graph > *\").remove();\r\n\r\n        const svgGroup = d3\r\n          .select(\"#pag-bar-graph\")\r\n          .attr(\r\n            \"width\",\r\n            constants.BAR_CHART_WIDTH +\r\n              BAR_CHART_MARGIN.left +\r\n              BAR_CHART_MARGIN.right\r\n          )\r\n          .attr(\r\n            \"height\",\r\n            constants.BAR_CHART_HEIGHT +\r\n              BAR_CHART_MARGIN.top +\r\n              BAR_CHART_MARGIN.bottom\r\n          )\r\n          .attr(\"opacity\", 1)\r\n          .append(\"g\")\r\n          .attr(\"class\", \"svg-group\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        const delivs =\r\n          objectivesData[objective][SCENARIO_KEY_STRING][BASELINE_SCENARIO][\r\n            DELIV_KEY_STRING_UNORD\r\n          ];\r\n\r\n        _maxDelivs = deps.maxDelivs;\r\n        _minDelivs = deps.minDelivs;\r\n\r\n        const dataDescending = delivs\r\n          .map((val, placeFromLeft) => ({\r\n            val,\r\n            placeFromLeft,\r\n            year: placeFromLeft + 1,\r\n          }))\r\n          .sort((a, b) => b.val - a.val);\r\n\r\n        const x = d3\r\n          .scaleBand()\r\n          .domain(dataDescending.map(({ year }) => year).sort((a, b) => a - b))\r\n          .range([0, constants.BAR_CHART_WIDTH])\r\n          .padding(0.4);\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([_minDelivs, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        const xaxis = d3\r\n          .axisBottom(x)\r\n          .tickSize(0)\r\n          .tickFormat((d) => `year ${d}`)\r\n          .tickValues(\r\n            x.domain().filter((_, i) => i === 0 || (i + 1) % 10 === 0)\r\n          );\r\n\r\n        svgGroup.append(\"g\").attr(\"class\", \"anim-xaxis\");\r\n        svgGroup.append(\"g\").attr(\"class\", \"axis-y\");\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .call(xaxis)\r\n          .selectAll(\"text\")\r\n          .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\r\n          .style(\"text-anchor\", \"end\");\r\n        svgGroup\r\n          .select(\".axis-y\")\r\n          .call(d3.axisLeft(y).tickFormat(d3.format(\".2s\")))\r\n          .append(\"text\")\r\n          .text(\"Deliveries (TAF)\")\r\n          .attr(\"fill\", \"black\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(-50, ${constants.BAR_CHART_HEIGHT / 2}) rotate(-90)`\r\n          );\r\n\r\n        _XInterp = x;\r\n        _XAxis = xaxis;\r\n        _dataDescending = dataDescending;\r\n      }\r\n    }\r\n\r\n    function barsAppearDo() {\r\n      {\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([_minDelivs, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .join(\"rect\")\r\n          .attr(\"class\", \"bars\")\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .attr(\"height\", 0)\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"fill\", \"steelblue\")\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => d.placeFromLeft * 10)\r\n          .attr(\"y\", (d) => y(d.val))\r\n          .attr(\"height\", (d) => constants.BAR_CHART_HEIGHT - y(d.val));\r\n      }\r\n    }\r\n\r\n    function barsAppearUndo() {\r\n      {\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => (_dataDescending.length - d.placeFromLeft - 1) * 10)\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"height\", 0);\r\n      }\r\n    }\r\n\r\n    async function barsCondenseDo() {\r\n      {\r\n        const newWidth = constants.BAR_CHART_WIDTH / 8;\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        svgGroup.select(\".anim-xaxis\").call(_XAxis.tickFormat(\"\"));\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        bars\r\n          .style(\"mix-blend-mode\", \"multiply\")\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 0.05)\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 +\r\n              (1 - (1 - d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"width\", newWidth)\r\n          .attr(\"x\", constants.BAR_CHART_WIDTH / 2 - newWidth / 2)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            svgGroup\r\n              .select(\".anim-xaxis\")\r\n              .transition()\r\n              .transition(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(0, ${constants.BAR_CHART_HEIGHT + 50})`\r\n              )\r\n              .attr(\"opacity\", 0);\r\n\r\n            bars.transition().delay(500).attr(\"x\", 0);\r\n\r\n            svgGroup\r\n              .transition()\r\n              .delay(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(${\r\n                  BAR_CHART_MARGIN.left +\r\n                  constants.BAR_CHART_WIDTH / 2 -\r\n                  newWidth / 2\r\n                },${BAR_CHART_MARGIN.top})`\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n    function barsCondenseUndo() {\r\n      {\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .transition()\r\n          .transition(500)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .call(_XAxis.tickFormat((d) => `year ${d}`));\r\n\r\n        svgGroup\r\n          .transition()\r\n          .delay(500)\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        bars\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 + (1 - (d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 1)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            bars.style(\"mix-blend-mode\", \"normal\");\r\n          });\r\n      }\r\n    }\r\n\r\n    prepareSVG();\r\n\r\n    return {\r\n      barsAppear: {\r\n        do: barsAppearDo,\r\n        undo: barsAppearUndo,\r\n      },\r\n      barsCondense: {\r\n        do: barsCondenseDo,\r\n        undo: barsCondenseUndo,\r\n      },\r\n    };\r\n  }\r\n\r\n  function initBucketsFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"initial\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").attr(\"opacity\", 0);\r\n\r\n      deps.setBucketInterper(() => deps.objectiveInterper);\r\n    }\r\n\r\n    function animUndo() {\r\n      deps.setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"none\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").transition().attr(\"opacity\", 1);\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initDropFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      showElems(\".main-waterdrop\");\r\n      showElems(\".tut-drop-graphics-wrapper\", d3, \"grid\");\r\n      hideElems(\".tut-graph-wrapper, .bucket-wrapper\");\r\n      deps.setDropInterper(() => deps.objectiveInterperDrop);\r\n    }\r\n\r\n    function animUndo() {\r\n      hideElems(\".tut-drop-graphics-wrapper, .main-waterdrop\");\r\n      showElems(\".bucket-wrapper\");\r\n      showElems(\".tut-graph-wrapper\", d3, \"flex\");\r\n      deps.setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initShowVariationsAnim({ deps }) {\r\n    return {\r\n      do: function () {\r\n        // vardrops\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"initial\")\r\n          .classed(\"hasarrow\", true);\r\n\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        deps.setVariationInterpers(deps.objectiveVariationInterpers);\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"block\");\r\n\r\n        // quantiles\r\n\r\n        d3.selectAll(\".var-scen-label\").style(\"opacity\", \"1\");\r\n\r\n        d3.select(\".main-waterdrop\")\r\n          .transition()\r\n          .style(\"transform\", \"translateY(100px) scale(0.5)\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(2)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"initial\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n      },\r\n      undo: function () {\r\n        // quantiles\r\n        d3.select(\".main-waterdrop\").transition().style(\"transform\", \"none\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(1)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"none\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"none\");\r\n\r\n        // vardrops\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"none\")\r\n          .classed(\"hasarrow\", false);\r\n\r\n        deps.setVariationInterpers(\r\n          constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n        );\r\n      },\r\n    };\r\n  }\r\n\r\n  return {\r\n    initChartAnimGroup,\r\n    initBucketsFillAnim,\r\n    initDropFillAnim,\r\n    initShowVariationsAnim,\r\n  };\r\n}\r\n\r\nexport const animations = initAllAnims();\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { animations as anims } from \"./data-story-anims\";\r\n\r\nexport function useDataStory(deps, objective, normalized) {\r\n  /*\r\n    slides = [\r\n        name: string,\r\n        animHandler: {\r\n            do: someFunctionToDoAnimation,\r\n            undo: someFunctionToReverseAnimation,\r\n        }\r\n    ]\r\n     */\r\n  const [slides, setSlides] = useState([]);\r\n\r\n  useEffect(\r\n    function initialize() {\r\n      if (deps.readyHash === 0) return;\r\n\r\n      const context = { deps, objective, normalized };\r\n\r\n      const chartAnimGroup = anims.initChartAnimGroup(context);\r\n      const bucketsFillAnim = anims.initBucketsFillAnim(context);\r\n      const dropFillAnim = anims.initDropFillAnim(context);\r\n      const showVariationsAnim = anims.initShowVariationsAnim(context);\r\n\r\n      const _slides = [\r\n        {\r\n          name: \"barsAppear\",\r\n          animHandler: chartAnimGroup.barsAppear,\r\n          text: \"Bar Graph\",\r\n        },\r\n        {\r\n          name: \"barsCondense\",\r\n          animHandler: chartAnimGroup.barsCondense,\r\n          text: \"Gradient\",\r\n        },\r\n        {\r\n          name: \"bucketsFill\",\r\n          animHandler: bucketsFillAnim,\r\n          text: \"Bucket\",\r\n        },\r\n        {\r\n          name: \"forNowLetsFocus\",\r\n          animHandler: dropFillAnim,\r\n          text: \"Waterdrop\",\r\n        },\r\n        {\r\n          name: \"ifChangeReality\",\r\n          animHandler: showVariationsAnim,\r\n          text: \"Different Scenarios\",\r\n        },\r\n      ];\r\n\r\n      setSlides(_slides);\r\n    },\r\n    [deps.readyHash]\r\n  );\r\n\r\n  return slides;\r\n}\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  SCENARIO_KEY_STRING,\r\n  objectivesData,\r\n} from \"../../data/completeObjectivesData\";\r\nimport { constants } from \"./constants\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nexport default function useTutorialState(objective, normalized) {\r\n  const [readyHash, setReadyHash] = useState(0);\r\n  const [maxDelivs, setMaxDelivs] = useState(0);\r\n  const [minDelivs, setMinDelivs] = useState(0);\r\n\r\n  const [bucketInterper, setBucketInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [dropInterper, setDropInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [objectiveInterper, setObjectiveInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [objectiveInterperDrop, setObjectiveInterperDrop] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n\r\n  const [variationInterpers, setVariationInterpers] = useState(() =>\r\n    constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n  );\r\n\r\n  const [objectiveDelivs, setObjectiveDelivs] = useState(() => []);\r\n  const [objectiveVariationDelivs, setObjectiveVariationDelivs] = useState(() =>\r\n    constants.VARIATIONS.map(() => [])\r\n  );\r\n  const [objectiveVariationInterpers, setObjectiveVariationInterpers] =\r\n    useState(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n  useEffect(() => {\r\n    setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setVariationInterpers(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n    const objDelivs =\r\n      objectivesData[objective][SCENARIO_KEY_STRING][\r\n        constants.BASELINE_SCENARIO\r\n      ][DELIV_KEY_STRING];\r\n    let maxDelivs, minDelivs;\r\n\r\n    maxDelivs =\r\n      objective === \"NDO\" ? d3.quantile(objDelivs, 0.75) : d3.max(objDelivs);\r\n\r\n    if (normalized) {\r\n      const allScenMins = [\r\n        constants.BASELINE_SCENARIO,\r\n        ...constants.VARIATIONS.map(({ scen_str }) => scen_str),\r\n      ].map((scen_str) =>\r\n        d3.min(\r\n          objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n            DELIV_KEY_STRING\r\n          ]\r\n        )\r\n      );\r\n      minDelivs = d3.min(allScenMins);\r\n    } else {\r\n      minDelivs = 0;\r\n    }\r\n\r\n    setMaxDelivs(maxDelivs);\r\n    setMinDelivs(minDelivs);\r\n\r\n    setObjectiveDelivs(() => objDelivs);\r\n\r\n    const objectiveInterperBucket = d3\r\n      .scaleLinear()\r\n      .domain(ticksExact(0, 1, objDelivs.length))\r\n      .range(\r\n        objDelivs\r\n          .map((v) => (v - minDelivs) / (maxDelivs - minDelivs))\r\n          .sort()\r\n          .reverse()\r\n      )\r\n      .clamp(true);\r\n\r\n    const objectiveInterperDrop = (val) =>\r\n      percentToRatioFilled(\r\n        d3\r\n          .scaleLinear()\r\n          .domain(ticksExact(0, 1, objDelivs.length))\r\n          .range(\r\n            objDelivs\r\n              .map((v) => (v - minDelivs) / (maxDelivs - minDelivs))\r\n              .sort()\r\n              .reverse()\r\n          )\r\n          .clamp(true)(val)\r\n      );\r\n\r\n    setObjectiveInterper(() => objectiveInterperBucket);\r\n    setObjectiveInterperDrop(() => objectiveInterperDrop);\r\n\r\n    const varDelivsArr = constants.VARIATIONS.map(\r\n      ({ scen_str }) =>\r\n        objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n          DELIV_KEY_STRING\r\n        ]\r\n    );\r\n\r\n    const objVars = varDelivsArr.map(\r\n      (varDelivs) => (val) =>\r\n        percentToRatioFilled(\r\n          d3\r\n            .scaleLinear()\r\n            .domain(ticksExact(0, 1, varDelivs.length))\r\n            .range(\r\n              varDelivs\r\n                .map((v) => (v - minDelivs) / (maxDelivs - minDelivs))\r\n                .sort()\r\n                .reverse()\r\n            )\r\n            .clamp(true)(val)\r\n        )\r\n    );\r\n\r\n    setObjectiveVariationDelivs(() => varDelivsArr);\r\n    setObjectiveVariationInterpers(() => objVars);\r\n  }, [objective, normalized]);\r\n\r\n  return {\r\n    readyHash,\r\n    setReadyHash,\r\n    maxDelivs,\r\n    minDelivs,\r\n    bucketInterper,\r\n    setBucketInterper,\r\n    dropInterper,\r\n    setDropInterper,\r\n    variationInterpers,\r\n    setVariationInterpers,\r\n    objectiveDelivs,\r\n    objectiveInterper,\r\n    objectiveInterperDrop,\r\n    objectiveVariationDelivs,\r\n    objectiveVariationInterpers,\r\n  };\r\n}\r\n"],"names":["ExplanationAnimApp","curObjective","setCurObjective","useState","constants","DEFAULT_OBJECTIVE","normalized","setNormalized","tutorialState","useTutorialState","slides","useDataStory","useEffect","hideElems","setReadyHash","rh","_jsxs","className","children","_jsx","Selector","val","setVal","options","Object","keys","SELECTED_OBJS","map","objId","display_name","Toggle","label","DataStoryGraphics","DataStoryTexts","_ref","maxDelivs","minDelivs","mainHistData","useMemo","data","objectiveDelivs","domain","variations","VARIATIONS","variation","interper","variationInterpers","idx","histData","objectiveVariationDelivs","_Fragment","BucketConstructionGraphics","bucketInterper","ScenarioComparingGraphics","mainDropInterper","dropInterper","_ref2","DataStoryScrollama","cleanupFn","i","length","_slides$i$animHandler","animHandler","undo","slide","Step","Slide","_ref3","value","onChange","e","target","_ref4","option","_ref5","htmlFor","checked","type","name","id","_ref6","MainScenarioInfo","VariationScenarioPanel","_ref7","WaterdropGlyph","levelInterp","width","height","BAR_CHART_HEIGHT","colorInterp","INTERP_COLOR","DotHistogram","_ref8","clas","desc","concat","_ref9","BucketGlyph","_ref10","Scrollama","offset","onStepEnter","async","_data$animHandler","direction","_ref11","do","onStepExit","_data$animHandler2","_ref12","ReturnToTop","forwardRef","_ref13","ref","text","_ref14","style","marginBottom","onClick","window","scrollTo","SCENARIO_KEY_STRING","DELIV_KEY_STRING","DELIV_KEY_STRING_UNORD","objectivesData","objs","fetch","json","obj","scen","Array","from","sort","a","b","mapBy","console","log","values","extendVarObj","scen_num_str","scen_str","BAR_CHART_WIDTH","interpolateWatercolorBlue","BASELINE_SCENARIO","DEL_NOD_AG_TOTAL","DEL_SJV_AG_TOTAL","DEL_NOD_MI_TOTAL","DEL_SJV_MI_TOTAL","DEL_SOCAL_MI_TOTAL","CVP_SWP_EXPORTS","NDO","SAC_IN","SJR_IN","STO_NOD_TOTAL","STO_SOD_TOTAL","initAllAnims","initChartAnimGroup","_XInterp","_XAxis","_dataDescending","_minDelivs","_maxDelivs","deps","objective","BAR_CHART_MARGIN","d3","remove","svgGroup","attr","append","delivs","dataDescending","placeFromLeft","year","x","range","padding","y","xaxis","tickSize","tickFormat","d","tickValues","filter","_","select","call","selectAll","prepareSVG","barsAppear","join","bandwidth","transition","duration","delay","barsCondense","newWidth","bars","end","catch","then","initBucketsFillAnim","setBucketInterper","objectiveInterper","initDropFillAnim","showElems","setDropInterper","objectiveInterperDrop","initShowVariationsAnim","classed","setVariationInterpers","objectiveVariationInterpers","animations","setSlides","readyHash","context","chartAnimGroup","anims","bucketsFillAnim","dropFillAnim","showVariationsAnim","_slides","setMaxDelivs","setMinDelivs","setObjectiveInterper","setObjectiveInterperDrop","setObjectiveDelivs","setObjectiveVariationDelivs","setObjectiveVariationInterpers","objDelivs","allScenMins","objectiveInterperBucket","ticksExact","v","reverse","clamp","percentToRatioFilled","varDelivsArr","objVars","varDelivs"],"sourceRoot":""}