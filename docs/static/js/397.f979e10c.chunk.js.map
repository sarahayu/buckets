{"version":3,"file":"static/js/397.f979e10c.chunk.js","mappings":"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","sources":["ExplanationAnimApp.jsx","data/completeObjectivesData.jsx","utils/explanation-anim/constants.jsx","utils/explanation-anim/data-story-anims.jsx","utils/explanation-anim/useDataStory.jsx","utils/explanation-anim/useTutorialState.jsx"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport React, { forwardRef, useEffect, useState } from \"react\";\r\nimport { Scrollama, Step } from \"react-scrollama\";\r\n\r\nimport BucketGlyph from \"./bucket-lib/BucketGlyph\";\r\n\r\nimport DotHistogram from \"./utils/explanation-anim/DotHistogram\";\r\nimport WaterdropGlyph from \"./utils/explanation-anim/WaterdropGlyph\";\r\nimport { constants } from \"./utils/explanation-anim/constants\";\r\nimport { hideElems } from \"./utils/explanation-anim/render-utils\";\r\nimport { useDataStory } from \"./utils/explanation-anim/useDataStory\";\r\nimport useTutorialState from \"./utils/explanation-anim/useTutorialState\";\r\n\r\nexport default function ExplanationAnimApp() {\r\n  const [curObjective, setCurObjective] = useState(constants.DEFAULT_OBJECTIVE);\r\n\r\n  const tutorialState = useTutorialState(curObjective);\r\n  const slides = useDataStory(tutorialState, curObjective);\r\n\r\n  useEffect(\r\n    function changeObjective() {\r\n      hideElems(\r\n        \".bucket-wrapper, .vardrop, .var-scen-label, .vardrop .dot-histogram-wrapper, .main-histogram, .tut-drop-graphics-wrapper\"\r\n      );\r\n\r\n      tutorialState.setReadyHash((rh) => rh + 1);\r\n    },\r\n    [curObjective]\r\n  );\r\n\r\n  return (\r\n    <div className=\"tutorial-view\">\r\n      <Selector\r\n        val={curObjective}\r\n        setVal={setCurObjective}\r\n        options={Object.keys(constants.SELECTED_OBJS).map((objId) => ({\r\n          options: objId,\r\n          display_name: constants.SELECTED_OBJS[objId],\r\n        }))}\r\n      />\r\n      <div className=\"scrollama scrollama-1\">\r\n        <DataStoryGraphics\r\n          curObjective={curObjective}\r\n          tutorialState={tutorialState}\r\n        />\r\n        <DataStoryTexts slides={slides} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryGraphics({ curObjective, tutorialState }) {\r\n  const baselineMax =\r\n    curObjective === \"NDO\"\r\n      ? d3.quantile(tutorialState.objectiveDelivs, 0.75)\r\n      : d3.max(tutorialState.objectiveDelivs);\r\n  const mainHistData = {\r\n    data: tutorialState.objectiveDelivs,\r\n    max: baselineMax,\r\n  };\r\n  return (\r\n    <>\r\n      <BucketConstructionGraphics\r\n        label={constants.SELECTED_OBJS[curObjective]}\r\n        bucketInterper={tutorialState.bucketInterper}\r\n      />\r\n\r\n      <ScenarioComparingGraphics\r\n        label={constants.SELECTED_OBJS[curObjective]}\r\n        mainDropInterper={tutorialState.dropInterper}\r\n        mainHistData={mainHistData}\r\n        variations={constants.VARIATIONS.map((variation) => ({\r\n          ...variation,\r\n          interper: tutorialState.variationInterpers[variation.idx],\r\n          histData: {\r\n            data: tutorialState.objectiveVariationDelivs[variation.idx],\r\n            max: baselineMax,\r\n          },\r\n        }))}\r\n      />\r\n    </>\r\n  );\r\n}\r\n\r\nfunction DataStoryTexts({ slides }) {\r\n  return (\r\n    <DataStoryScrollama\r\n      cleanupFn={() => {\r\n        for (let i = slides.length - 1; i >= 0; i--) {\r\n          slides[i].animHandler?.undo();\r\n        }\r\n      }}\r\n    >\r\n      {slides.map((slide, i) => (\r\n        <Step key={i} data={slide}>\r\n          <Slide slide={slide} />\r\n        </Step>\r\n      ))}\r\n    </DataStoryScrollama>\r\n  );\r\n}\r\n\r\nfunction Selector({ val, setVal, options }) {\r\n  return (\r\n    <select value={val} onChange={(e) => setVal(e.target.value)}>\r\n      {options.map(({ option, display_name }, i) => (\r\n        <option value={option} key={i}>\r\n          {display_name}\r\n        </option>\r\n      ))}\r\n    </select>\r\n  );\r\n}\r\n\r\nfunction ScenarioComparingGraphics({\r\n  label,\r\n  mainDropInterper,\r\n  mainHistData,\r\n  variations,\r\n}) {\r\n  return (\r\n    <div className=\"tut-drop-graphics-wrapper\">\r\n      <MainScenarioInfo\r\n        dropInterper={mainDropInterper}\r\n        histData={mainHistData}\r\n        label={label}\r\n      />\r\n      {variations.map((variation, i) => (\r\n        <VariationScenarioPanel key={i} variation={variation} />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction MainScenarioInfo({ dropInterper, histData, label }) {\r\n  return (\r\n    <>\r\n      <div className=\"main-waterdrop\">\r\n        <WaterdropGlyph\r\n          levelInterp={dropInterper}\r\n          width={400}\r\n          height={constants.BAR_CHART_HEIGHT}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n      </div>\r\n      <div className=\"main-histogram\">\r\n        <DotHistogram\r\n          width={330}\r\n          height={220}\r\n          data={histData.data}\r\n          domain={[0, histData.max]}\r\n        />\r\n      </div>\r\n      <p className=\"fancy-font objective-label\">{label}</p>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction VariationScenarioPanel({ variation }) {\r\n  const { idx, clas, desc, interper, histData } = variation;\r\n  return (\r\n    <div className={`vardrop ${clas}`} key={idx} desc={desc}>\r\n      <div>\r\n        <WaterdropGlyph\r\n          levelInterp={interper}\r\n          width={200}\r\n          height={constants.BAR_CHART_HEIGHT / 2}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n        <DotHistogram\r\n          width={330}\r\n          height={220}\r\n          data={histData.data}\r\n          domain={[0, histData.max]}\r\n        />\r\n      </div>\r\n      <p className=\"var-scen-label\">{desc}</p>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction BucketConstructionGraphics({ label, bucketInterper }) {\r\n  return (\r\n    <div className=\"tut-graph-wrapper\">\r\n      <div className=\"tut-graph\">\r\n        <svg id=\"pag-bar-graph\"></svg>\r\n        <BucketGlyph\r\n          levelInterp={bucketInterper}\r\n          width={300}\r\n          height={constants.BAR_CHART_HEIGHT}\r\n          colorInterp={constants.INTERP_COLOR}\r\n        />\r\n        <p className=\"fancy-font objective-label\">{label}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryScrollama({ cleanupFn, children }) {\r\n  const onStepEnter = async ({ data, direction }) => {\r\n    if (direction === \"up\") return;\r\n    data.animHandler?.do();\r\n  };\r\n\r\n  const onStepExit = async ({ data, direction }) => {\r\n    if (direction === \"down\") return;\r\n    data.animHandler?.undo();\r\n  };\r\n\r\n  return (\r\n    <Scrollama offset={0.9} onStepEnter={onStepEnter} onStepExit={onStepExit}>\r\n      {children}\r\n      <Step key={\"last\"} data={{}}>\r\n        <ReturnToTop cleanupFn={cleanupFn} />\r\n      </Step>\r\n    </Scrollama>\r\n  );\r\n}\r\n\r\nconst Slide = forwardRef(function Slide({ slide }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\">\r\n      {slide.text}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ReturnToTop = forwardRef(function ReturnToTop({ cleanupFn }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\" style={{ marginBottom: \"40vh\" }}>\r\n      <button\r\n        onClick={() => {\r\n          window.scrollTo(0, 0);\r\n          cleanupFn();\r\n        }}\r\n      >\r\n        Back to Top\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n","import { mapBy } from \"../utils/utils\";\r\n\r\nexport const MAX_DELIVS = 1200;\r\nexport const SCENARIO_KEY_STRING = \"scens\";\r\nexport const DELIV_KEY_STRING = \"delivs\";\r\nexport const DELIV_KEY_STRING_UNORD = \"delivs_unord\";\r\n\r\nexport const objectivesData = await (async function () {\r\n  const objs = await (await fetch(\"./select_complete_objectives.json\")).json();\r\n\r\n  for (const obj of objs) {\r\n    for (const scen of obj[SCENARIO_KEY_STRING]) {\r\n      scen[DELIV_KEY_STRING_UNORD] = Array.from(scen[DELIV_KEY_STRING]);\r\n      scen[DELIV_KEY_STRING] = Array.from(scen[DELIV_KEY_STRING]).sort(\r\n        (a, b) => b - a\r\n      );\r\n    }\r\n    obj[SCENARIO_KEY_STRING] = mapBy(\r\n      obj[SCENARIO_KEY_STRING],\r\n      ({ name }) => name\r\n    );\r\n  }\r\n\r\n  console.log(\"DATA: loading objectives data\");\r\n\r\n  return mapBy(objs, ({ obj }) => obj);\r\n})();\r\n\r\nexport const objectiveIDs = Object.keys(objectivesData);\r\nexport const scenarioIDs = Object.keys(\r\n  Object.values(objectivesData)[0][SCENARIO_KEY_STRING]\r\n);\r\n","import * as d3 from \"d3\";\r\nimport { interpolateWatercolorBlue } from \"../../bucket-lib/utils\";\r\n\r\nfunction initConstants() {\r\n  const BAR_CHART_WIDTH = 500,\r\n    BAR_CHART_HEIGHT = 400;\r\n\r\n  // const INTERP_COLOR = d3.interpolateRgbBasis([\r\n  //   \"#F2F5FB\",\r\n  //   \"#D0DDEB\",\r\n  //   \"#7B9BC0\",\r\n  //   \"#4F739F\",\r\n  //   \"#112A57\",\r\n  // ]);\r\n  const INTERP_COLOR = interpolateWatercolorBlue;\r\n\r\n  const DEFAULT_OBJECTIVE = \"DEL_NOD_AG_TOTAL\";\r\n  const BASELINE_SCENARIO = \"expl0000\";\r\n\r\n  const _VARIATIONS = [\r\n    {\r\n      scen_num_str: \"0129\",\r\n      desc: \"natural flows\",\r\n    },\r\n    {\r\n      scen_num_str: \"0015\",\r\n      desc: \"reduce delta regs.\",\r\n    },\r\n    {\r\n      scen_num_str: \"0320\",\r\n      desc: \"prioritize carryover\",\r\n    },\r\n    {\r\n      scen_num_str: \"0360\",\r\n      desc: \"municipal priority\",\r\n    },\r\n    {\r\n      scen_num_str: \"0261\",\r\n      desc: \"rebalancing\",\r\n    },\r\n  ];\r\n\r\n  const VARIATIONS = _VARIATIONS.map(extendVarObj);\r\n\r\n  const SELECTED_OBJS = {\r\n    DEL_NOD_AG_TOTAL: \"DEL_NOD_AG_TOTAL\",\r\n    DEL_SJV_AG_TOTAL: \"DEL_SJV_AG_TOTAL\",\r\n    DEL_NOD_MI_TOTAL: \"DEL_NOD_MI_TOTAL\",\r\n    DEL_SJV_MI_TOTAL: \"DEL_SJV_MI_TOTAL\",\r\n    DEL_SOCAL_MI_TOTAL: \"DEL_SOCAL_MI_TOTAL\",\r\n    CVP_SWP_EXPORTS: \"CVP_SWP_EXPORTS\",\r\n    NDO: \"NDO\",\r\n    SAC_IN: \"SAC_IN\",\r\n    SJR_IN: \"SJR_IN\",\r\n    STO_NOD_TOTAL: \"STO_NOD_TOTAL\",\r\n    STO_SOD_TOTAL: \"STO_SOD_TOTAL\",\r\n  };\r\n\r\n  return {\r\n    BAR_CHART_WIDTH,\r\n    BAR_CHART_HEIGHT,\r\n    INTERP_COLOR,\r\n    DEFAULT_OBJECTIVE,\r\n    BASELINE_SCENARIO,\r\n    VARIATIONS,\r\n    SELECTED_OBJS,\r\n  };\r\n}\r\n\r\nfunction extendVarObj({ scen_num_str, desc }, idx) {\r\n  return {\r\n    idx,\r\n    scen_num_str,\r\n    desc,\r\n    scen_str: `expl${scen_num_str}`,\r\n    clas: `drop${idx + 1}`,\r\n  };\r\n}\r\n\r\nexport const constants = initConstants();\r\n","import * as d3 from \"d3\";\r\n\r\nimport { objectivesData } from \"../../data/completeObjectivesData\";\r\n\r\nimport { constants } from \"./constants\";\r\nimport { hideElems, showElems } from \"./render-utils\";\r\nimport {\r\n  DELIV_KEY_STRING_UNORD,\r\n  SCENARIO_KEY_STRING,\r\n} from \"../../data/objectivesData\";\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nconst BASELINE_SCENARIO = \"expl0000\";\r\n\r\nfunction initAllAnims() {\r\n  function initChartAnimGroup({ deps, objective }) {\r\n    let _XInterp;\r\n    let _XAxis;\r\n    let _dataDescending;\r\n    let _maxDelivs;\r\n\r\n    const BAR_CHART_MARGIN = { top: 40, right: 30, bottom: 40, left: 60 };\r\n\r\n    function prepareSVG() {\r\n      {\r\n        d3.select(\"#pag-bar-graph > *\").remove();\r\n\r\n        const svgGroup = d3\r\n          .select(\"#pag-bar-graph\")\r\n          .attr(\r\n            \"width\",\r\n            constants.BAR_CHART_WIDTH +\r\n              BAR_CHART_MARGIN.left +\r\n              BAR_CHART_MARGIN.right\r\n          )\r\n          .attr(\r\n            \"height\",\r\n            constants.BAR_CHART_HEIGHT +\r\n              BAR_CHART_MARGIN.top +\r\n              BAR_CHART_MARGIN.bottom\r\n          )\r\n          .attr(\"opacity\", 1)\r\n          .append(\"g\")\r\n          .attr(\"class\", \"svg-group\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        const delivs =\r\n          objectivesData[objective][SCENARIO_KEY_STRING][BASELINE_SCENARIO][\r\n            DELIV_KEY_STRING_UNORD\r\n          ];\r\n\r\n        _maxDelivs =\r\n          objective === \"NDO\" ? d3.quantile(delivs, 0.75) : d3.max(delivs);\r\n\r\n        const dataDescending = delivs\r\n          .map((val, placeFromLeft) => ({\r\n            val,\r\n            placeFromLeft,\r\n            year: placeFromLeft + 1,\r\n          }))\r\n          .sort((a, b) => b.val - a.val);\r\n\r\n        const x = d3\r\n          .scaleBand()\r\n          .domain(dataDescending.map(({ year }) => year).sort((a, b) => a - b))\r\n          .range([0, constants.BAR_CHART_WIDTH])\r\n          .padding(0.4);\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        const xaxis = d3\r\n          .axisBottom(x)\r\n          .tickSize(0)\r\n          .tickFormat((d) => `year ${d}`)\r\n          .tickValues(\r\n            x.domain().filter((_, i) => i === 0 || (i + 1) % 10 === 0)\r\n          );\r\n\r\n        svgGroup.append(\"g\").attr(\"class\", \"anim-xaxis\");\r\n        svgGroup.append(\"g\").attr(\"class\", \"axis-y\");\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .call(xaxis)\r\n          .selectAll(\"text\")\r\n          .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\r\n          .style(\"text-anchor\", \"end\");\r\n        svgGroup\r\n          .select(\".axis-y\")\r\n          .call(d3.axisLeft(y).tickFormat(d3.format(\".2s\")))\r\n          .append(\"text\")\r\n          .text(\"Deliveries (TAF)\")\r\n          .attr(\"fill\", \"black\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(-50, ${constants.BAR_CHART_HEIGHT / 2}) rotate(-90)`\r\n          );\r\n\r\n        _XInterp = x;\r\n        _XAxis = xaxis;\r\n        _dataDescending = dataDescending;\r\n      }\r\n    }\r\n\r\n    function barsAppearDo() {\r\n      {\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .join(\"rect\")\r\n          .attr(\"class\", \"bars\")\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .attr(\"height\", 0)\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"fill\", \"steelblue\")\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => d.placeFromLeft * 10)\r\n          .attr(\"y\", (d) => y(d.val))\r\n          .attr(\"height\", (d) => constants.BAR_CHART_HEIGHT - y(d.val));\r\n      }\r\n    }\r\n\r\n    function barsAppearUndo() {\r\n      {\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => (_dataDescending.length - d.placeFromLeft - 1) * 10)\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"height\", 0);\r\n      }\r\n    }\r\n\r\n    async function barsCondenseDo() {\r\n      {\r\n        const newWidth = constants.BAR_CHART_WIDTH / 8;\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        svgGroup.select(\".anim-xaxis\").call(_XAxis.tickFormat(\"\"));\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        bars\r\n          .style(\"mix-blend-mode\", \"multiply\")\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 0.05)\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 +\r\n              (1 - (1 - d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"width\", newWidth)\r\n          .attr(\"x\", constants.BAR_CHART_WIDTH / 2 - newWidth / 2)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            svgGroup\r\n              .select(\".anim-xaxis\")\r\n              .transition()\r\n              .transition(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(0, ${constants.BAR_CHART_HEIGHT + 50})`\r\n              )\r\n              .attr(\"opacity\", 0);\r\n\r\n            bars.transition().delay(500).attr(\"x\", 0);\r\n\r\n            svgGroup\r\n              .transition()\r\n              .delay(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(${\r\n                  BAR_CHART_MARGIN.left +\r\n                  constants.BAR_CHART_WIDTH / 2 -\r\n                  newWidth / 2\r\n                },${BAR_CHART_MARGIN.top})`\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n    function barsCondenseUndo() {\r\n      {\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .transition()\r\n          .transition(500)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .call(_XAxis.tickFormat((d) => `year ${d}`));\r\n\r\n        svgGroup\r\n          .transition()\r\n          .delay(500)\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        bars\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 + (1 - (d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 1)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            bars.style(\"mix-blend-mode\", \"normal\");\r\n          });\r\n      }\r\n    }\r\n\r\n    prepareSVG();\r\n\r\n    return {\r\n      barsAppear: {\r\n        do: barsAppearDo,\r\n        undo: barsAppearUndo,\r\n      },\r\n      barsCondense: {\r\n        do: barsCondenseDo,\r\n        undo: barsCondenseUndo,\r\n      },\r\n    };\r\n  }\r\n\r\n  function initBucketsFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"initial\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").attr(\"opacity\", 0);\r\n\r\n      deps.setBucketInterper(() => deps.objectiveInterper);\r\n    }\r\n\r\n    function animUndo() {\r\n      deps.setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"none\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").transition().attr(\"opacity\", 1);\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initDropFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      showElems(\".main-waterdrop\");\r\n      showElems(\".tut-drop-graphics-wrapper\", d3, \"grid\");\r\n      hideElems(\".tut-graph-wrapper, .bucket-wrapper\");\r\n      deps.setDropInterper(() => deps.objectiveInterperDrop);\r\n    }\r\n\r\n    function animUndo() {\r\n      hideElems(\".tut-drop-graphics-wrapper, .main-waterdrop\");\r\n      showElems(\".bucket-wrapper\");\r\n      showElems(\".tut-graph-wrapper\", d3, \"flex\");\r\n      deps.setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initShowVariationsAnim({ deps }) {\r\n    return {\r\n      do: function () {\r\n        // vardrops\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"initial\")\r\n          .classed(\"hasarrow\", true);\r\n\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        deps.setVariationInterpers(deps.objectiveVariationInterpers);\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"block\");\r\n\r\n        // quantiles\r\n\r\n        d3.selectAll(\".var-scen-label\").style(\"opacity\", \"1\");\r\n\r\n        d3.select(\".main-waterdrop\")\r\n          .transition()\r\n          .style(\"transform\", \"translateY(100px) scale(0.5)\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(2)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"initial\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n      },\r\n      undo: function () {\r\n        // quantiles\r\n        d3.select(\".main-waterdrop\").transition().style(\"transform\", \"none\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(1)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"none\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"none\");\r\n\r\n        // vardrops\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"none\")\r\n          .classed(\"hasarrow\", false);\r\n\r\n        deps.setVariationInterpers(\r\n          constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n        );\r\n      },\r\n    };\r\n  }\r\n\r\n  return {\r\n    initChartAnimGroup,\r\n    initBucketsFillAnim,\r\n    initDropFillAnim,\r\n    initShowVariationsAnim,\r\n  };\r\n}\r\n\r\nexport const animations = initAllAnims();\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { animations as anims } from \"./data-story-anims\";\r\n\r\nexport function useDataStory(deps, objective, scenario) {\r\n  /*\r\n    slides = [\r\n        name: string,\r\n        animHandler: {\r\n            do: someFunctionToDoAnimation,\r\n            undo: someFunctionToReverseAnimation,\r\n        }\r\n    ]\r\n     */\r\n  const [slides, setSlides] = useState([]);\r\n\r\n  useEffect(\r\n    function initialize() {\r\n      if (deps.readyHash === 0) return;\r\n\r\n      const context = { deps, objective, scenario };\r\n\r\n      const chartAnimGroup = anims.initChartAnimGroup(context);\r\n      const bucketsFillAnim = anims.initBucketsFillAnim(context);\r\n      const dropFillAnim = anims.initDropFillAnim(context);\r\n      const showVariationsAnim = anims.initShowVariationsAnim(context);\r\n\r\n      const _slides = [\r\n        {\r\n          name: \"barsAppear\",\r\n          animHandler: chartAnimGroup.barsAppear,\r\n          text: \"Bar Graph\",\r\n        },\r\n        {\r\n          name: \"barsCondense\",\r\n          animHandler: chartAnimGroup.barsCondense,\r\n          text: \"Gradient\",\r\n        },\r\n        {\r\n          name: \"bucketsFill\",\r\n          animHandler: bucketsFillAnim,\r\n          text: \"Bucket\",\r\n        },\r\n        {\r\n          name: \"forNowLetsFocus\",\r\n          animHandler: dropFillAnim,\r\n          text: \"Waterdrop\",\r\n        },\r\n        {\r\n          name: \"ifChangeReality\",\r\n          animHandler: showVariationsAnim,\r\n          text: \"Different Scenarios\",\r\n        },\r\n      ];\r\n\r\n      setSlides(_slides);\r\n    },\r\n    [deps.readyHash]\r\n  );\r\n\r\n  return slides;\r\n}\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  SCENARIO_KEY_STRING,\r\n  objectivesData,\r\n} from \"../../data/completeObjectivesData\";\r\nimport { constants } from \"./constants\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nexport default function useTutorialState(objective) {\r\n  const [readyHash, setReadyHash] = useState(0);\r\n\r\n  const [bucketInterper, setBucketInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [dropInterper, setDropInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [objectiveInterper, setObjectiveInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [objectiveInterperDrop, setObjectiveInterperDrop] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n\r\n  const [variationInterpers, setVariationInterpers] = useState(() =>\r\n    constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n  );\r\n\r\n  const [objectiveDelivs, setObjectiveDelivs] = useState(() => []);\r\n  const [objectiveVariationDelivs, setObjectiveVariationDelivs] = useState(() =>\r\n    constants.VARIATIONS.map(() => [])\r\n  );\r\n  const [objectiveVariationInterpers, setObjectiveVariationInterpers] =\r\n    useState(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n  useEffect(() => {\r\n    setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setVariationInterpers(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n    const objDelivs =\r\n      objectivesData[objective][SCENARIO_KEY_STRING][\r\n        constants.BASELINE_SCENARIO\r\n      ][DELIV_KEY_STRING];\r\n    const maxDelivs =\r\n      objective === \"NDO\" ? d3.quantile(objDelivs, 0.75) : d3.max(objDelivs);\r\n\r\n    setObjectiveDelivs(() => objDelivs);\r\n\r\n    const objectiveInterperBucket = d3\r\n      .scaleLinear()\r\n      .domain(ticksExact(0, 1, objDelivs.length))\r\n      .range(\r\n        objDelivs\r\n          .map((v) => v / maxDelivs)\r\n          .sort()\r\n          .reverse()\r\n      )\r\n      .clamp(true);\r\n\r\n    const objectiveInterperDrop = (val) =>\r\n      percentToRatioFilled(\r\n        d3\r\n          .scaleLinear()\r\n          .domain(ticksExact(0, 1, objDelivs.length))\r\n          .range(\r\n            objDelivs\r\n              .map((v) => v / maxDelivs)\r\n              .sort()\r\n              .reverse()\r\n          )\r\n          .clamp(true)(val)\r\n      );\r\n\r\n    setObjectiveInterper(() => objectiveInterperBucket);\r\n    setObjectiveInterperDrop(() => objectiveInterperDrop);\r\n\r\n    const varDelivsArr = constants.VARIATIONS.map(\r\n      ({ scen_str }) =>\r\n        objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n          DELIV_KEY_STRING\r\n        ]\r\n    );\r\n\r\n    const objVars = varDelivsArr.map(\r\n      (varDelivs) => (val) =>\r\n        percentToRatioFilled(\r\n          d3\r\n            .scaleLinear()\r\n            .domain(ticksExact(0, 1, varDelivs.length))\r\n            .range(\r\n              varDelivs\r\n                .map((v) => v / maxDelivs)\r\n                .sort()\r\n                .reverse()\r\n            )\r\n            .clamp(true)(val)\r\n        )\r\n    );\r\n\r\n    setObjectiveVariationDelivs(() => varDelivsArr);\r\n    setObjectiveVariationInterpers(() => objVars);\r\n  }, [objective]);\r\n\r\n  return {\r\n    readyHash,\r\n    setReadyHash,\r\n    bucketInterper,\r\n    setBucketInterper,\r\n    dropInterper,\r\n    setDropInterper,\r\n    variationInterpers,\r\n    setVariationInterpers,\r\n    objectiveDelivs,\r\n    objectiveInterper,\r\n    objectiveInterperDrop,\r\n    objectiveVariationDelivs,\r\n    objectiveVariationInterpers,\r\n  };\r\n}\r\n"],"names":["ExplanationAnimApp","curObjective","setCurObjective","useState","constants","DEFAULT_OBJECTIVE","tutorialState","useTutorialState","slides","useDataStory","useEffect","hideElems","setReadyHash","rh","_jsxs","className","children","_jsx","Selector","val","setVal","options","Object","keys","SELECTED_OBJS","map","objId","display_name","DataStoryGraphics","DataStoryTexts","_ref","baselineMax","d3","objectiveDelivs","mainHistData","data","max","_Fragment","BucketConstructionGraphics","label","bucketInterper","ScenarioComparingGraphics","mainDropInterper","dropInterper","variations","VARIATIONS","variation","interper","variationInterpers","idx","histData","objectiveVariationDelivs","_ref2","DataStoryScrollama","cleanupFn","i","length","_slides$i$animHandler","animHandler","undo","slide","Step","Slide","_ref3","value","onChange","e","target","_ref4","option","_ref5","MainScenarioInfo","VariationScenarioPanel","_ref6","WaterdropGlyph","levelInterp","width","height","BAR_CHART_HEIGHT","colorInterp","INTERP_COLOR","DotHistogram","domain","_ref7","clas","desc","concat","_ref8","id","BucketGlyph","_ref9","Scrollama","offset","onStepEnter","async","_data$animHandler","direction","_ref10","do","onStepExit","_data$animHandler2","_ref11","ReturnToTop","forwardRef","_ref12","ref","text","_ref13","style","marginBottom","onClick","window","scrollTo","SCENARIO_KEY_STRING","DELIV_KEY_STRING","DELIV_KEY_STRING_UNORD","objectivesData","objs","fetch","json","obj","scen","Array","from","sort","a","b","mapBy","name","console","log","values","extendVarObj","scen_num_str","scen_str","BAR_CHART_WIDTH","interpolateWatercolorBlue","BASELINE_SCENARIO","DEL_NOD_AG_TOTAL","DEL_SJV_AG_TOTAL","DEL_NOD_MI_TOTAL","DEL_SJV_MI_TOTAL","DEL_SOCAL_MI_TOTAL","CVP_SWP_EXPORTS","NDO","SAC_IN","SJR_IN","STO_NOD_TOTAL","STO_SOD_TOTAL","initAllAnims","initChartAnimGroup","_XInterp","_XAxis","_dataDescending","_maxDelivs","deps","objective","BAR_CHART_MARGIN","remove","svgGroup","attr","append","delivs","dataDescending","placeFromLeft","year","x","range","padding","y","xaxis","tickSize","tickFormat","d","tickValues","filter","_","select","call","selectAll","prepareSVG","barsAppear","join","bandwidth","transition","duration","delay","barsCondense","newWidth","bars","end","catch","then","initBucketsFillAnim","setBucketInterper","objectiveInterper","initDropFillAnim","showElems","setDropInterper","objectiveInterperDrop","initShowVariationsAnim","classed","setVariationInterpers","objectiveVariationInterpers","animations","scenario","setSlides","readyHash","context","chartAnimGroup","anims","bucketsFillAnim","dropFillAnim","showVariationsAnim","_slides","setObjectiveInterper","setObjectiveInterperDrop","setObjectiveDelivs","setObjectiveVariationDelivs","setObjectiveVariationInterpers","objDelivs","maxDelivs","objectiveInterperBucket","ticksExact","v","reverse","clamp","percentToRatioFilled","varDelivsArr","objVars","varDelivs"],"sourceRoot":""}