{"version":3,"file":"static/js/238.3319d0fd.chunk.js","mappings":"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","sources":["LargeDropletApp.jsx","bucket-lib/bucket-glyph.js","bucket-lib/utils.js","data/objectivesData.jsx","utils/common.js"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport React, { useLayoutEffect, useMemo, useRef, useState } from \"react\";\r\nimport { interpolateWatercolorBlue, ticksExact } from \"bucket-lib/utils\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  MAX_DELIVS,\r\n  SCENARIO_KEY_STRING,\r\n  objectiveIDs,\r\n  objectivesData,\r\n} from \"data/objectivesData\";\r\nimport {\r\n  DROPLET_SHAPE,\r\n  createInterps,\r\n  criteriaSort,\r\n  placeDropsUsingPhysics,\r\n} from \"utils/common\";\r\nimport { useNavigate } from \"react-router-dom\";\r\n\r\nconst LEVELS = 5;\r\nconst RAD_PX = 3;\r\nconst MIN_LEV_VAL = 0.1;\r\nconst SCEN_DIVISOR = 20;\r\nconst SMALL_DROP_PAD_FACTOR = 1.5;\r\n\r\nexport default function LargeDropletApp({ watercolor = false }) {\r\n  const navigate = useNavigate();\r\n  const winDim = useRef();\r\n  const [normalize, setNormalize] = useState(false);\r\n\r\n  const bucketSvgSelector = useRef();\r\n  const zoomRef = useRef();\r\n\r\n  const objToWaterLevels = useMemo(() => {\r\n    const objToLevels = {};\r\n    const orderedObjToScens = {};\r\n\r\n    const unorderedObjToScens = {};\r\n\r\n    // don't process all scenes, too many small drops causes lag\r\n    objectiveIDs.forEach(\r\n      (obj) =>\r\n        (unorderedObjToScens[obj] = criteriaSort(\"median\", objectivesData, obj)\r\n          .filter((_, i) => i % SCEN_DIVISOR == 0)\r\n          .reverse())\r\n    );\r\n\r\n    const mid = Math.floor(unorderedObjToScens[objectiveIDs[0]].length / 2);\r\n    const sortedObjs = objectiveIDs.sort((a, b) => {\r\n      return (\r\n        d3.median(\r\n          objectivesData[a][SCENARIO_KEY_STRING][unorderedObjToScens[a][mid]][\r\n            DELIV_KEY_STRING\r\n          ]\r\n        ) -\r\n        d3.median(\r\n          objectivesData[b][SCENARIO_KEY_STRING][unorderedObjToScens[b][mid]][\r\n            DELIV_KEY_STRING\r\n          ]\r\n        )\r\n      );\r\n    });\r\n\r\n    sortedObjs.forEach(\r\n      (obj) => void (orderedObjToScens[obj] = unorderedObjToScens[obj])\r\n    );\r\n\r\n    objectiveIDs.forEach((obj) => {\r\n      objToLevels[obj] = orderedObjToScens[obj].map((s) => {\r\n        const i = createInterps(obj, s, objectivesData, MAX_DELIVS);\r\n        return ticksExact(0, 1, LEVELS + 1).map((d) => i(d));\r\n      });\r\n    });\r\n\r\n    return objToLevels;\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    winDim.current = {\r\n      width: window.innerWidth,\r\n      height: window.innerHeight,\r\n    };\r\n\r\n    const width = winDim.current.width,\r\n      height = winDim.current.height;\r\n\r\n    zoomRef.current = d3\r\n      .zoom()\r\n      .scaleExtent([1, 10])\r\n      .translateExtent([\r\n        [-width / 2, -height / 2],\r\n        [width * 1.5, height * 1.5],\r\n      ])\r\n      .on(\"zoom\", function (e) {\r\n        bucketSvgSelector.current\r\n          .select(\".svg-trans\")\r\n          .attr(\"transform\", e.transform);\r\n\r\n        bucketSvgSelector.current\r\n          .selectAll(\".text-scale\")\r\n          .attr(\"transform\", `scale(${1 / e.transform.k})`);\r\n      })\r\n      .on(\r\n        \"start\",\r\n        (e) =>\r\n          (e.sourceEvent || {}).type !== \"wheel\" &&\r\n          bucketSvgSelector.current.style(\"cursor\", \"grabbing\")\r\n      )\r\n      .on(\"end\", () => bucketSvgSelector.current.style(\"cursor\", \"grab\"));\r\n\r\n    bucketSvgSelector.current\r\n      .attr(\"width\", width)\r\n      .attr(\"height\", height)\r\n      .style(\"cursor\", \"grab\")\r\n      .call((s) => s.append(\"g\").attr(\"class\", \"svg-trans\"))\r\n      .call(zoomRef.current);\r\n  }, []);\r\n\r\n  useLayoutEffect(() => {\r\n    const width = winDim.current.width,\r\n      height = winDim.current.height;\r\n\r\n    bucketSvgSelector.current.call(zoomRef.current.transform, d3.zoomIdentity);\r\n\r\n    const largeNodes = initNodes(objToWaterLevels, normalize);\r\n\r\n    bucketSvgSelector.current\r\n      .select(\".svg-trans\")\r\n      .selectAll(\".largeDrop\")\r\n      .data(largeNodes, (n) => n.obj)\r\n      .join((enter) =>\r\n        enter.append(\"g\").each(function (_, i) {\r\n          const s = d3.select(this);\r\n\r\n          d3.select(this.parentNode)\r\n            .append(\"g\")\r\n            .attr(\"id\", `drop-${i}`)\r\n            .append(\"g\")\r\n            .attr(\"class\", \"text-scale\")\r\n            .append(\"text\")\r\n            .style(\"font-size\", 16)\r\n            .attr(\"text-anchor\", \"middle\");\r\n          s.append(\"g\").attr(\"class\", \"rotateClass\");\r\n\r\n          s.append(\"rect\").attr(\"class\", \"bbox\").style(\"visibility\", \"hidden\");\r\n\r\n          s.on(\"mouseover\", function () {\r\n            bucketSvgSelector.current\r\n              .selectAll(\".largeDrop\")\r\n              .style(\"opacity\", 0.5);\r\n            s.style(\"opacity\", 1);\r\n            bucketSvgSelector.current.select(`#drop-${i}`).style(\"opacity\", 1);\r\n          }).on(\"mouseout\", function () {\r\n            bucketSvgSelector.current\r\n              .selectAll(\".largeDrop\")\r\n              .style(\"opacity\", 1);\r\n            bucketSvgSelector.current.select(`#drop-${i}`).style(\"opacity\", 0);\r\n          });\r\n        })\r\n      )\r\n      .attr(\"class\", \"largeDrop\")\r\n      .attr(\r\n        \"transform\",\r\n        ({ x, y }) => `translate(${x + width / 2}, ${y + height / 2})`\r\n      )\r\n      .each(function (nodes, i1) {\r\n        const s = d3.select(this);\r\n\r\n        d3.select(`#drop-${i1}`)\r\n          .style(\"opacity\", 0)\r\n          .select(\"text\")\r\n          .text(nodes.obj);\r\n        d3.select(this)\r\n          .select(\".rotateClass\")\r\n          .attr(\"transform\", `rotate(${nodes.tilt})`)\r\n          .selectAll(\".smallDrop\")\r\n          .data(nodes, (_, i) => i)\r\n          .join((enter) => {\r\n            return enter\r\n              .append(\"g\")\r\n              .attr(\"class\", \"smallDrop\")\r\n              .each(function ({ levs }, i2) {\r\n                const stops = d3\r\n                  .select(this)\r\n                  .append(\"defs\")\r\n                  .append(\"linearGradient\")\r\n                  .attr(\"id\", `drop-fill-${i1}-${i2}`)\r\n                  .attr(\"x1\", \"0%\")\r\n                  .attr(\"x2\", \"0%\")\r\n                  .attr(\"y1\", \"0%\")\r\n                  .attr(\"y2\", \"100%\");\r\n                stops.append(\"stop\").attr(\"stop-color\", \"transparent\");\r\n                stops.append(\"stop\").attr(\"stop-color\", \"transparent\");\r\n\r\n                levs.forEach((_, i) => {\r\n                  stops\r\n                    .append(\"stop\")\r\n                    .attr(\"stop-color\", interpolateWatercolorBlue(i / LEVELS));\r\n                  stops\r\n                    .append(\"stop\")\r\n                    .attr(\"stop-color\", interpolateWatercolorBlue(i / LEVELS));\r\n                });\r\n\r\n                d3.select(this)\r\n                  .append(\"path\")\r\n                  .attr(\"d\", DROPLET_SHAPE)\r\n                  .attr(\"class\", \"outline\")\r\n                  .attr(\"fill\", \"none\")\r\n                  .attr(\"stroke\", \"lightgray\")\r\n                  .attr(\"stroke-width\", 0.05);\r\n\r\n                d3.select(this)\r\n                  .append(\"path\")\r\n                  .attr(\"class\", \"fill\")\r\n                  .attr(\"d\", DROPLET_SHAPE)\r\n                  .attr(\"fill\", `url(#drop-fill-${i1}-${i2})`);\r\n              });\r\n          })\r\n          .attr(\r\n            \"transform\",\r\n            ({ x, y, tilt }) => `translate(${x}, ${y}) rotate(${tilt})`\r\n          )\r\n          .each(function ({ levs, maxLev }) {\r\n            d3.select(this)\r\n              .select(\".outline\")\r\n              .attr(\"transform\", `scale(${maxLev * 0.95})`);\r\n            d3.select(this)\r\n              .select(\".fill\")\r\n              .attr(\"transform\", `scale(${maxLev})`);\r\n\r\n            if (normalize)\r\n              d3.select(this).select(\".outline\").style(\"display\", \"block\");\r\n            else d3.select(this).select(\".outline\").style(\"display\", \"none\");\r\n\r\n            d3.select(this)\r\n              .selectAll(\"stop\")\r\n              .each(function (_, i) {\r\n                let actI = Math.floor((i - 1) / 2);\r\n\r\n                if (actI === -1) {\r\n                  d3.select(this).attr(\"offset\", `${0}%`);\r\n                } else if (actI === levs.length) {\r\n                  d3.select(this).attr(\"offset\", `${100}%`);\r\n                } else {\r\n                  d3.select(this).attr(\r\n                    \"offset\",\r\n                    `${(1 - levs[actI] / maxLev) * 100}%`\r\n                  );\r\n                }\r\n              });\r\n          });\r\n\r\n        const d = s.select(\".rotateClass\");\r\n\r\n        s.on(\"click\", function () {\r\n          navigate(\r\n            `/ScenarioDropletsApp?obj=${nodes.obj}&norm=${\r\n              normalize ? \"true\" : \"false\"\r\n            }`\r\n          );\r\n        });\r\n\r\n        s.select(\".bbox\")\r\n          .attr(\"x\", d.node().getBBox().x)\r\n          .attr(\"y\", d.node().getBBox().y)\r\n          .attr(\"width\", d.node().getBBox().width)\r\n          .attr(\"height\", d.node().getBBox().height);\r\n\r\n        bucketSvgSelector.current\r\n          .select(`#drop-${i1}`)\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${\r\n              d.node().getBoundingClientRect().x +\r\n              d.node().getBoundingClientRect().width / 2\r\n            }, ${d.node().getBoundingClientRect().y})`\r\n          );\r\n      });\r\n  }, [objToWaterLevels, normalize]);\r\n\r\n  return (\r\n    <div className=\"bubbles-wrapper\">\r\n      <div className=\"bubbles-input-area\">\r\n        <input\r\n          type=\"checkbox\"\r\n          id=\"norm\"\r\n          checked={normalize}\r\n          onChange={() => void setNormalize((e) => !e)}\r\n        />\r\n        <label htmlFor=\"norm\">normalize</label>\r\n      </div>\r\n      <div className={\"bubbles-svg-wrapper\" + (watercolor ? \"-painter\" : \"\")}>\r\n        <svg\r\n          className={\"bubbles-svg\" + (watercolor ? \"-painter\" : \"\")}\r\n          ref={(e) => void (bucketSvgSelector.current = d3.select(e))}\r\n        ></svg>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction initNodes(objToWaterLevels, normalize) {\r\n  const largeNodes = Object.keys(objToWaterLevels)\r\n    .map((obj) => {\r\n      const smallNodesPos = placeDropsUsingPhysics(\r\n        0,\r\n        0,\r\n        objToWaterLevels[obj].map((levs, id) => ({\r\n          r: Math.max(\r\n            2,\r\n            (normalize ? 1 : Math.max(levs[0], MIN_LEV_VAL)) *\r\n              RAD_PX *\r\n              SMALL_DROP_PAD_FACTOR\r\n          ),\r\n          id,\r\n        }))\r\n      );\r\n\r\n      const smallNodes = smallNodesPos.map(({ id: idx, x, y }) => ({\r\n        levs: objToWaterLevels[obj][idx].map(\r\n          (w, i) => Math.max(w, i == 0 ? MIN_LEV_VAL : 0) * RAD_PX\r\n        ),\r\n        maxLev:\r\n          (normalize\r\n            ? 1\r\n            : Math.max(objToWaterLevels[obj][idx][0], MIN_LEV_VAL)) * RAD_PX,\r\n        tilt: Math.random() * 50 - 25,\r\n        dur: Math.random() * 100 + 400,\r\n        x,\r\n        y,\r\n      }));\r\n\r\n      smallNodes.height = smallNodesPos.height;\r\n      smallNodes.obj = obj;\r\n\r\n      return smallNodes;\r\n    })\r\n    .reverse();\r\n\r\n  placeDropsUsingPhysics(\r\n    0,\r\n    0,\r\n    largeNodes.map((innerNodes, id) => ({\r\n      r: Math.max(\r\n        1,\r\n        Math.sqrt(d3.sum(innerNodes.map((d) => d.maxLev)) / Math.PI) * 8\r\n      ),\r\n      id,\r\n    }))\r\n  ).forEach(({ x, y }, i) => {\r\n    largeNodes[i].x = x;\r\n    largeNodes[i].y = y;\r\n    largeNodes[i].tilt = Math.random() * 50 - 25;\r\n    largeNodes[i].r =\r\n      (largeNodes[i].height / (1 + Math.SQRT1_2)) * Math.SQRT1_2;\r\n  });\r\n  return largeNodes;\r\n}\r\n","import * as d3 from \"d3\";\r\n\r\nconst DEGREE_SWAY = 40;\r\nconst LINE_WIDTH = 3;\r\n\r\nlet maskCounter = 0;\r\n\r\n// ensures every mask id is unique\r\nfunction getMaskId() {\r\n  return maskCounter++;\r\n}\r\n\r\nfunction bucketGlyph(width, height, valueToLevelFn = d3.scaleLinear()) {\r\n  return function (data) {\r\n    return data.map((d) => ({\r\n      x: -width,\r\n      y: height - valueToLevelFn(d) * height - height / 2,\r\n      width: width * 2,\r\n      height: height * 2,\r\n    }));\r\n  };\r\n}\r\n\r\nfunction transitionSway(rects, multiplier = 1) {\r\n  // save previous value; we'll need it to calculate how much to sway between renders\r\n  rects.each(function (d) {\r\n    const s = d3.select(this);\r\n    const prevLevel = s.attr(\"cur-level\") || 0;\r\n\r\n    s.attr(\"prev-level\", prevLevel);\r\n    s.attr(\"cur-level\", d.y);\r\n  });\r\n\r\n  rects\r\n    .transition(\"liquidSway\")\r\n    .duration(2000)\r\n    .delay((_, i) => i * 10)\r\n    .ease(d3.easeQuad)\r\n    .attrTween(\"transform\", function (d, i) {\r\n      const s = d3.select(this);\r\n      const prevLiquidLevel = parseFloat(s.attr(\"prev-level\"));\r\n      const diff = (Math.abs(prevLiquidLevel - d.y) / 200) * multiplier;\r\n      return (t) =>\r\n        `rotate(${\r\n          Math.sin(\r\n            Math.min((Math.PI * 4 * t) / (0.5 * diff + 0.5), Math.PI * 4)\r\n          ) *\r\n          diff *\r\n          DEGREE_SWAY *\r\n          (1 - t)\r\n        }, ${0}, ${0})`;\r\n    });\r\n\r\n  const levelTransition = rects\r\n    .transition(\"liquidLevel\")\r\n    .ease(d3.easeElasticOut.period(0.6))\r\n    .delay((_, i) => i * (100 / rects.size()))\r\n    .duration(1000);\r\n\r\n  return levelTransition;\r\n}\r\n\r\nfunction bucketShape(\r\n  width,\r\n  height,\r\n  shapeFunc = drawBucketMask,\r\n  shapeOutlineFunc = shapeFunc\r\n) {\r\n  return function (s) {\r\n    const id = getMaskId();\r\n\r\n    s.append(\"defs\")\r\n      .attr(\"class\", \"clip-def\")\r\n      .append(\"clipPath\")\r\n      .attr(\"id\", \"bucket-mask-\" + id)\r\n      .append(\"path\")\r\n      .attr(\"class\", \"bucket-mask-path\");\r\n\r\n    s.append(\"g\")\r\n      .attr(\"class\", \"graph-area\")\r\n      .attr(\"transform\", `translate(${width / 2}, ${height / 2})`)\r\n      .attr(\"clip-path\", `url(#bucket-mask-${id})`);\r\n\r\n    s.append(\"path\")\r\n      .attr(\"class\", \"bucket-outline\")\r\n      .attr(\"transform\", `translate(${width / 2}, ${height / 2})`)\r\n      .attr(\"stroke\", \"lightgray\")\r\n      .attr(\"stroke-linecap\", \"round\")\r\n      .attr(\"stroke-width\", LINE_WIDTH)\r\n      .attr(\"fill\", \"none\");\r\n\r\n    s.call(\r\n      bucketShapeMask({\r\n        drawFunc: shapeFunc,\r\n        drawOutlineFunc: shapeOutlineFunc,\r\n        width,\r\n        height,\r\n      })\r\n    );\r\n  };\r\n}\r\n\r\nfunction bucketShapeMask({\r\n  drawFunc,\r\n  drawOutlineFunc = drawFunc,\r\n  width,\r\n  height,\r\n}) {\r\n  return function (s) {\r\n    const getPath = (fn) => {\r\n      const path = d3.path();\r\n      fn(path, width, height);\r\n      return path.toString();\r\n    };\r\n\r\n    s.select(\".bucket-mask-path\").attr(\"d\", getPath(drawFunc));\r\n    s.select(\".bucket-outline\").attr(\"d\", getPath(drawOutlineFunc));\r\n  };\r\n}\r\n\r\nfunction drawBucketMask(context, width, height) {\r\n  drawBucket(context, width, height, true);\r\n}\r\n\r\nfunction drawBucketOutline(context, width, height) {\r\n  drawBucket(context, width, height, false);\r\n}\r\n\r\nfunction drawBucket(context, width, height, closed) {\r\n  const taper = 0.8;\r\n  const bottomRight = (width * taper) / 2,\r\n    bottomLeft = -(width * taper) / 2;\r\n\r\n  context.moveTo(width / 2, -height / 2);\r\n  context.lineTo(bottomRight, height / 2);\r\n  context.lineTo(bottomLeft, height / 2);\r\n  context.lineTo(-width / 2, -height / 2);\r\n\r\n  if (closed) context.closePath();\r\n}\r\n\r\nfunction drawDroplet(context, width, height) {\r\n  const hypToRad = Math.SQRT2;\r\n\r\n  // dimensions in \"rad\" units\r\n  const dropHeight = 1 + 1 * hypToRad;\r\n\r\n  const radToHeight = 1 / dropHeight;\r\n\r\n  const rad = Math.min(width / 2, height * radToHeight);\r\n  const hyp = rad / (1 / hypToRad);\r\n  const heightActual = rad + hyp;\r\n\r\n  context.moveTo(0, -heightActual / 2);\r\n  context.lineTo(hyp / 2, -heightActual / 2 + hyp / 2);\r\n  context.arc(0, -heightActual / 2 + hyp, rad, -Math.PI / 4, (Math.PI * 5) / 4);\r\n  context.closePath();\r\n}\r\n\r\nexport {\r\n  bucketGlyph,\r\n  transitionSway,\r\n  bucketShape,\r\n  bucketShapeMask,\r\n  drawBucketMask,\r\n  drawBucketOutline,\r\n  drawDroplet,\r\n};\r\n","import * as d3 from \"d3\";\r\nimport { drawBucketMask } from \"./bucket-glyph\";\r\n\r\nfunction distributeQuantiles(numericBins, unitsPerQuantile, maxQuantiles) {\r\n  let quantileBins = numericBins.map((bin) =>\r\n    Math.round(bin.length / unitsPerQuantile)\r\n  );\r\n  let sum = d3.sum(quantileBins);\r\n\r\n  while (sum > maxQuantiles) {\r\n    quantileBins[\r\n      d3.minIndex(numericBins, (d, i) =>\r\n        d.length !== 0\r\n          ? d.length / unitsPerQuantile - quantileBins[i]\r\n          : Infinity\r\n      )\r\n    ] -= 1;\r\n\r\n    sum = d3.sum(quantileBins);\r\n  }\r\n\r\n  while (sum < maxQuantiles) {\r\n    quantileBins[\r\n      d3.maxIndex(numericBins, (d, i) =>\r\n        d.length !== 0\r\n          ? d.length / unitsPerQuantile - quantileBins[i]\r\n          : -Infinity\r\n      )\r\n    ] += 1;\r\n\r\n    sum = d3.sum(quantileBins);\r\n  }\r\n\r\n  return quantileBins;\r\n}\r\n\r\nconst interpolateWatercolorBlue = (i) =>\r\n  d3.interpolateBlues(d3.scaleLinear([0.2, 1.0])(i));\r\n\r\nfunction levelToDropletLevel(p) {\r\n  p -= 0.0088;\r\n  return Math.min(\r\n    1,\r\n    Math.max(\r\n      0,\r\n      (3.1304 * p ** 3 - 4.2384 * p ** 2 + 3.3471 * p + 0.0298) / 2.2326\r\n    )\r\n  );\r\n}\r\n\r\nconst WATERDROP_ICON = {\r\n  draw: function (context, size) {\r\n    context.moveTo(0, -size / 2);\r\n    context.lineTo(size / 4, -size / 4);\r\n\r\n    context.arc(0, 0, size / Math.SQRT2 / 2, -Math.PI / 4, (Math.PI * 5) / 4);\r\n    context.lineTo(0, -size / 2);\r\n    context.closePath();\r\n  },\r\n};\r\n\r\nfunction ticksExact(start, stop, count) {\r\n  return d3.range(count).map((i) => (i / (count - 1)) * (stop - start) + start);\r\n}\r\n\r\nfunction bucketPath(width, height, filled = 1.0, taper = 0.8) {\r\n  const getPath = (fn) => {\r\n    const path = d3.path();\r\n    fn(path, width, height);\r\n    return path.toString();\r\n  };\r\n\r\n  return getPath(drawBucketMask);\r\n}\r\n\r\nexport {\r\n  distributeQuantiles,\r\n  interpolateWatercolorBlue,\r\n  levelToDropletLevel,\r\n  WATERDROP_ICON,\r\n  ticksExact,\r\n  bucketPath,\r\n};\r\n","import { mapBy } from \"utils/common\";\r\n\r\nexport const MAX_DELIVS = 1200;\r\nexport const SCENARIO_KEY_STRING = \"scens\";\r\nexport const DELIV_KEY_STRING = \"delivs\";\r\nexport const DELIV_KEY_STRING_UNORD = \"delivs_unord\";\r\n\r\nexport const objectivesData = await (async function () {\r\n  const objs = await (await fetch(\"./all_objectives.json\")).json();\r\n\r\n  for (const obj of objs) {\r\n    obj[SCENARIO_KEY_STRING] = obj[SCENARIO_KEY_STRING];\r\n    for (const scen of obj[SCENARIO_KEY_STRING]) {\r\n      // data cleanup, clamping\r\n      const unord = scen[DELIV_KEY_STRING].map((v) =>\r\n        Math.min(Math.max(0, v), MAX_DELIVS)\r\n      );\r\n\r\n      scen[DELIV_KEY_STRING_UNORD] = unord;\r\n      scen[DELIV_KEY_STRING] = Array.from(unord).sort((a, b) => b - a);\r\n    }\r\n    obj[SCENARIO_KEY_STRING] = mapBy(\r\n      obj[SCENARIO_KEY_STRING],\r\n      ({ name }) => name\r\n    );\r\n  }\r\n\r\n  console.log(\"DATA: loading objectives data\");\r\n\r\n  return mapBy(objs, ({ obj }) => obj);\r\n})();\r\n\r\nexport const objectiveIDs = Object.keys(objectivesData);\r\nexport const scenarioIDs = Object.keys(\r\n  Object.values(objectivesData)[0][SCENARIO_KEY_STRING]\r\n);\r\n","import * as THREE from \"three\";\r\nimport * as d3 from \"d3\";\r\nimport Matter from \"matter-js\";\r\nimport {\r\n  useCallback,\r\n  useEffect,\r\n  useMemo,\r\n  useReducer,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport { DELIV_KEY_STRING, SCENARIO_KEY_STRING } from \"data/objectivesData\";\r\nimport { ticksExact } from \"bucket-lib/utils\";\r\n\r\nexport function clamp(x, a, b) {\r\n  return Math.max(a, Math.min(b, x));\r\n}\r\n\r\n// when fn is `({ name }) => name`, turns\r\n//\r\n//  [\r\n//    { name: \"Zeta\", age: 30 },\r\n//    { name: \"Aloy\", age: 40 },\r\n//  ];\r\n//\r\n// to\r\n//\r\n//  {\r\n//    \"Zeta\": { name: \"Zeta\", age: 30 },\r\n//    \"Aloy\": { name: \"Aloy\", age: 40 },\r\n//  };\r\nexport function mapBy(objs, fn) {\r\n  const newObjs = Object.groupBy(objs, fn);\r\n\r\n  for (const key of Object.keys(newObjs)) {\r\n    newObjs[key] = newObjs[key][0];\r\n  }\r\n\r\n  return newObjs;\r\n}\r\n\r\n// size is height of waterdrop plus a bit more (1/2 of size is distance from top of drop to center of circle part)\r\nexport const WATERDROP_ICON = {\r\n  draw: function (context, size) {\r\n    context.moveTo(0, -size / 2);\r\n    context.lineTo(size / 4, -size / 4);\r\n\r\n    context.arc(0, 0, size / Math.SQRT2 / 2, -Math.PI / 4, (Math.PI * 5) / 4);\r\n    context.lineTo(0, -size / 2);\r\n    context.closePath();\r\n  },\r\n};\r\n\r\n// path generated when WATERDROP_ICON size = 2\r\nexport const DROPLET_SHAPE = \"M0,-1L0.5,-0.5A0.707,0.707,0,1,1,-0.5,-0.5L0,-1Z\";\r\n\r\nexport function percentToRatioFilled(p) {\r\n  p -= 0.0088;\r\n  return Math.min(\r\n    1,\r\n    Math.max(\r\n      0,\r\n      (3.1304 * p ** 3 - 4.2384 * p ** 2 + 3.3471 * p + 0.0298) / 2.2326\r\n    )\r\n  );\r\n}\r\n\r\nconst CIRC_RAD = Math.SQRT1_2;\r\nconst DROP_RAD = 1;\r\nconst CIRC_HEIGHT = CIRC_RAD + CIRC_RAD;\r\nconst DROP_HEIGHT = DROP_RAD + CIRC_RAD;\r\nconst HAT_START = 0.75;\r\n\r\n// half width at widest is 1\r\nfunction yToHalfWidth(y) {\r\n  if (y >= HAT_START) {\r\n    const hatHalfWidth = Math.SQRT1_2;\r\n\r\n    return (hatHalfWidth * (1 - y)) / (1 - HAT_START);\r\n  }\r\n\r\n  const circFrac = fracDropToCirc(y);\r\n  const trigX = (1 - circFrac) * 2 - 1;\r\n\r\n  const angle = Math.acos(trigX);\r\n  const trigY = Math.sin(angle);\r\n\r\n  return trigY;\r\n}\r\n\r\n// fml, here sprite width is 2 (i.e. circ rad is 1) thus drop real height is 1 + sqrt2\r\nfunction yToSpriteY(y) {\r\n  return (y - CIRC_RAD / DROP_HEIGHT) * (1 + Math.SQRT2);\r\n}\r\n\r\nfunction spriteYToY(sy) {\r\n  return sy / (1 + Math.SQRT2) + CIRC_RAD / DROP_HEIGHT;\r\n}\r\n\r\nfunction fracCircToDrop(v) {\r\n  return v / CIRC_HEIGHT / DROP_HEIGHT;\r\n}\r\n\r\nfunction fracDropToCirc(v) {\r\n  return v / (CIRC_HEIGHT / DROP_HEIGHT);\r\n}\r\n\r\nexport function waterdropDeltaOutline(yStart, yEnd, size = 2) {\r\n  if (Math.abs(yStart - yEnd) < 0.01) return [];\r\n\r\n  const rad = (size / 2 / DROP_RAD) * CIRC_RAD;\r\n\r\n  const Y_DELTA = 0.1;\r\n\r\n  const rightCoords = [];\r\n  const leftCoords = [];\r\n\r\n  let dx1, dy1, dx2, dy2;\r\n\r\n  for (let i = 1; i <= Math.ceil(1 / Y_DELTA); i++) {\r\n    dx1 = yToHalfWidth(yStart + (i - 1) * Y_DELTA);\r\n    dy1 = yToSpriteY(yStart + (i - 1) * Y_DELTA);\r\n    dx2 = yToHalfWidth(yStart + i * Y_DELTA);\r\n    dy2 = yToSpriteY(yStart + i * Y_DELTA);\r\n\r\n    if (spriteYToY(dy2) >= yEnd) break;\r\n\r\n    // CC !\r\n    const v1 = [-dx1 * rad, -dy1 * rad],\r\n      v2 = [dx1 * rad, -dy1 * rad],\r\n      v3 = [dx2 * rad, -dy2 * rad],\r\n      v4 = [-dx2 * rad, -dy2 * rad];\r\n\r\n    rightCoords.push(v2, v3);\r\n    leftCoords.push(v1, v4);\r\n  }\r\n\r\n  dx2 = yToHalfWidth(yEnd);\r\n  dy2 = yToSpriteY(yEnd);\r\n\r\n  // CC !\r\n  const v1 = [-dx1 * rad, -dy1 * rad],\r\n    v2 = [dx1 * rad, -dy1 * rad],\r\n    v3 = [dx2 * rad, -dy2 * rad],\r\n    v4 = [-dx2 * rad, -dy2 * rad];\r\n\r\n  rightCoords.push(v2, v3);\r\n  leftCoords.push(v1, v4);\r\n\r\n  rightCoords.push(...leftCoords.reverse());\r\n\r\n  return rightCoords;\r\n}\r\n\r\nexport function waterdropDelta(yStart, yEnd, size = 2) {\r\n  if (Math.abs(yStart - yEnd) < 0.01) return [];\r\n\r\n  const rad = (size / 2 / DROP_RAD) * CIRC_RAD;\r\n\r\n  const Y_DELTA = 0.1;\r\n\r\n  const coords = [];\r\n\r\n  let dx1, dy1, dx2, dy2;\r\n\r\n  for (let i = 1; i <= Math.ceil(1 / Y_DELTA); i++) {\r\n    dx1 = yToHalfWidth(yStart + (i - 1) * Y_DELTA);\r\n    dy1 = yToSpriteY(yStart + (i - 1) * Y_DELTA);\r\n    dx2 = yToHalfWidth(yStart + i * Y_DELTA);\r\n    dy2 = yToSpriteY(yStart + i * Y_DELTA);\r\n\r\n    if (spriteYToY(dy2) >= yEnd) break;\r\n\r\n    // CC !\r\n    const v1 = [-dx1 * rad, -dy1 * rad],\r\n      v2 = [dx1 * rad, -dy1 * rad],\r\n      v3 = [dx2 * rad, -dy2 * rad],\r\n      v4 = [-dx2 * rad, -dy2 * rad];\r\n\r\n    coords.push([v1, v2, v3]);\r\n    coords.push([v1, v3, v4]);\r\n  }\r\n\r\n  dx2 = yToHalfWidth(yEnd);\r\n  dy2 = yToSpriteY(yEnd);\r\n\r\n  // CC !\r\n  const v1 = [-dx1 * rad, -dy1 * rad],\r\n    v2 = [dx1 * rad, -dy1 * rad],\r\n    v3 = [dx2 * rad, -dy2 * rad],\r\n    v4 = [-dx2 * rad, -dy2 * rad];\r\n\r\n  coords.push([v1, v2, v3]);\r\n  coords.push([v1, v3, v4]);\r\n\r\n  return coords;\r\n}\r\n\r\nexport function waterdrop(yFill, size = 2) {\r\n  if (yFill === 0) return [];\r\n\r\n  return waterdropDelta(0, yFill, size);\r\n}\r\n\r\nexport function kernelDensityEstimator(kernel, X) {\r\n  return function (V) {\r\n    return X.map(function (x) {\r\n      return [\r\n        x,\r\n        d3.mean(V, function (v) {\r\n          return kernel(x - v);\r\n        }),\r\n      ];\r\n    });\r\n  };\r\n}\r\n\r\nexport function kernelEpanechnikov(k) {\r\n  return function (v) {\r\n    return Math.abs((v /= k)) <= 1 ? (0.75 * (1 - v * v)) / k : 0;\r\n  };\r\n}\r\n\r\nfunction generateWaterdrop(width) {\r\n  const rad = width / 2;\r\n  const partitions = 16;\r\n  const delta = (Math.PI * 3) / 2 / partitions;\r\n\r\n  const outer = [\r\n    {\r\n      x: Math.cos((Math.PI * 5) / 4) * rad,\r\n      y: Math.sin((Math.PI * 5) / 4) * rad,\r\n    },\r\n    {\r\n      x: 0,\r\n      y: -Math.SQRT2 * rad,\r\n    },\r\n  ];\r\n\r\n  for (let i = 0; i <= partitions; i++) {\r\n    outer.push({\r\n      x: Math.cos(i * delta - Math.PI / 4) * rad,\r\n      y: Math.sin(i * delta - Math.PI / 4) * rad,\r\n    });\r\n  }\r\n\r\n  return outer;\r\n}\r\n\r\nexport function generateRandoPoints(shape, count) {\r\n  const bounds = Matter.Bounds.create(shape);\r\n\r\n  const minX = bounds.min.x,\r\n    maxX = bounds.max.x,\r\n    minY = bounds.min.y,\r\n    maxY = bounds.max.y;\r\n\r\n  const genX = d3.scaleLinear([minX, maxX]);\r\n  const genY = d3.scaleLinear([minY, maxY]);\r\n\r\n  const points = [];\r\n\r\n  for (let i = 0; i < count; i++) {\r\n    while (true) {\r\n      const x = genX(Math.random());\r\n      const y = genY(Math.random());\r\n\r\n      if (Matter.Vertices.contains(shape, { x, y })) {\r\n        points.push([x, y]);\r\n        break;\r\n      }\r\n    }\r\n  }\r\n\r\n  return points;\r\n}\r\n\r\n// inner diameter of 1\r\nexport const WATERDROP_CAGE_COORDS = (function () {\r\n  const outer = generateWaterdrop(3);\r\n  const inner = generateWaterdrop(1);\r\n\r\n  const coords = [];\r\n\r\n  for (let i = 0; i < outer.length - 2; i++) {\r\n    coords.push([\r\n      outer[i],\r\n      outer[i + (i < 2 ? 1 : 2)],\r\n      inner[i + (i < 2 ? 1 : 2)],\r\n      inner[i],\r\n    ]);\r\n  }\r\n\r\n  return coords;\r\n})();\r\n\r\nlet RANDO_CACHE;\r\nlet lastNodesLen;\r\n\r\nlet DET_CACHE;\r\nlet lastDetNodesLen;\r\n\r\nexport function radsToDropWidth(nodes) {\r\n  const AREA = d3.sum(nodes.map((r) => r ** 2 * 3.14));\r\n  return Math.floor((Math.sqrt(AREA / 3.14) * 2) / 2);\r\n}\r\n\r\n// assuming nodes is already ordered and first nodes are going to be put on the bottom\r\nexport function placeDropsUsingPhysics(x, y, nodes, reuse = false) {\r\n  if (reuse && DET_CACHE && nodes.length === lastDetNodesLen) return DET_CACHE;\r\n\r\n  // first generate random points within water droplet. we can stop here, but points might not be the most uniformly distributed\r\n\r\n  if (!RANDO_CACHE || nodes.length !== lastNodesLen)\r\n    RANDO_CACHE = d3\r\n      .range(4)\r\n      .map(() =>\r\n        generateRandoPoints(generateWaterdrop(1), (lastNodesLen = nodes.length))\r\n      );\r\n\r\n  const WIDTH_AREA = radsToDropWidth(nodes.map(({ r }) => r));\r\n\r\n  const randoPoints = RANDO_CACHE[\r\n    Math.floor(Math.random() * RANDO_CACHE.length)\r\n  ].map(([x, y]) => [x * WIDTH_AREA, y * WIDTH_AREA]);\r\n\r\n  // thus, we use physics engine to take care of distributing the points evenly and based on radius\r\n  const Engine = Matter.Engine,\r\n    Bodies = Matter.Bodies,\r\n    Composite = Matter.Composite;\r\n\r\n  const engine = Engine.create();\r\n\r\n  const nodePos = randoPoints.sort((a, b) => b[1] - a[1]);\r\n\r\n  const node_bodies = nodes.map(({ r, id }, i) => {\r\n    const [nx, ny] = nodePos[i];\r\n    return Bodies.circle(nx, ny, r, {\r\n      restitution: 0,\r\n      id: id,\r\n    });\r\n  });\r\n\r\n  const parts = WATERDROP_CAGE_COORDS.map((quad) =>\r\n    Matter.Body.create({\r\n      position: Matter.Vertices.centre(quad),\r\n      vertices: quad,\r\n      isStatic: true,\r\n    })\r\n  );\r\n\r\n  const cage = Matter.Body.create({\r\n    isStatic: true,\r\n  });\r\n\r\n  Matter.Body.setParts(cage, parts);\r\n\r\n  Matter.Body.setCentre(cage, { x: 0, y: 0 });\r\n  Matter.Body.scale(cage, WIDTH_AREA, WIDTH_AREA);\r\n\r\n  Composite.add(engine.world, [...node_bodies, cage]);\r\n\r\n  // run engine for SECS second at FPS fps\r\n  for (let i = 0, FPS = 60, SECS = 0.1; i < FPS * SECS; i++)\r\n    Engine.update(engine, 1000 / FPS);\r\n\r\n  const retVal = node_bodies.map(({ position, id }) => ({\r\n    id,\r\n    x: position.x + x,\r\n    y: position.y + y,\r\n  }));\r\n\r\n  retVal.height = (WIDTH_AREA / 2 / CIRC_RAD) * DROP_HEIGHT;\r\n\r\n  if (reuse && (!DET_CACHE || retVal.length !== lastDetNodesLen)) {\r\n    DET_CACHE = retVal;\r\n    lastDetNodesLen = retVal.length;\r\n  }\r\n\r\n  return retVal;\r\n}\r\n\r\n// https://gist.github.com/mbostock/5743979\r\nexport function bounce(h) {\r\n  if (!arguments.length) h = 0.25;\r\n  var b0 = 1 - h,\r\n    b1 = b0 * (1 - b0) + b0,\r\n    b2 = b0 * (1 - b1) + b1,\r\n    x0 = 2 * Math.sqrt(h),\r\n    x1 = x0 * Math.sqrt(h),\r\n    x2 = x1 * Math.sqrt(h),\r\n    t0 = 1 / (1 + x0 + x1 + x2),\r\n    t1 = t0 + t0 * x0,\r\n    t2 = t1 + t0 * x1,\r\n    m0 = t0 + (t0 * x0) / 2,\r\n    m1 = t1 + (t0 * x1) / 2,\r\n    m2 = t2 + (t0 * x2) / 2,\r\n    a = 1 / (t0 * t0);\r\n  return function (t) {\r\n    return t >= 1\r\n      ? 1\r\n      : t < t0\r\n      ? a * t * t\r\n      : t < t1\r\n      ? a * (t -= m0) * t + b0\r\n      : t < t2\r\n      ? a * (t -= m1) * t + b1\r\n      : a * (t -= m2) * t + b2;\r\n  };\r\n}\r\n\r\nexport function rangeInclusive(a, b) {\r\n  return d3.range(a, b + 1);\r\n}\r\n\r\nexport function useStickyScale(defaultVal, scale) {\r\n  const [val, setVal] = useState(defaultVal);\r\n\r\n  const valActual = useMemo(() => scale(val), [val]);\r\n  const setValActual = useCallback((v) => void setVal(scale(v)), []);\r\n\r\n  return [valActual, setValActual];\r\n}\r\n\r\nexport function createInterps(obj_name, scen_name, data, maxDelivs) {\r\n  const delivs =\r\n    data[obj_name][SCENARIO_KEY_STRING][scen_name][DELIV_KEY_STRING];\r\n  return d3\r\n    .scaleLinear()\r\n    .domain(ticksExact(0, 1, delivs.length))\r\n    .range(delivs.map((v) => Math.min(1, v / maxDelivs)))\r\n    .clamp(true);\r\n}\r\n\r\nexport function criteriaSort(criteria, data, objective) {\r\n  if (criteria === \"median\") {\r\n    return Object.keys(data[objective][SCENARIO_KEY_STRING]).sort(\r\n      (a, b) =>\r\n        d3.mean(data[objective][SCENARIO_KEY_STRING][a][DELIV_KEY_STRING]) -\r\n        d3.mean(data[objective][SCENARIO_KEY_STRING][b][DELIV_KEY_STRING])\r\n    );\r\n  }\r\n  if (criteria === \"deliveries\") {\r\n    return Object.keys(data[objective][SCENARIO_KEY_STRING]).sort(\r\n      (a, b) =>\r\n        d3.max(data[objective][SCENARIO_KEY_STRING][a][DELIV_KEY_STRING]) -\r\n        d3.max(data[objective][SCENARIO_KEY_STRING][b][DELIV_KEY_STRING])\r\n    );\r\n  }\r\n  if (criteria === \"alphabetical\") {\r\n    return Object.keys(data[objective][SCENARIO_KEY_STRING]).sort();\r\n  }\r\n}\r\n\r\nfunction get(object, path, defaultValue) {\r\n  const parts = path.split(\".\");\r\n  for (let part of parts) {\r\n    if (!object) return defaultValue;\r\n    object = object[part];\r\n  }\r\n  return object ?? defaultValue;\r\n}\r\n\r\nfunction pick(fn) {\r\n  return typeof fn === \"string\" ? (v) => get(v, fn) : fn;\r\n}\r\n\r\nexport function sortBy(array, fn) {\r\n  fn = pick(fn);\r\n  return array.sort((a, b) => {\r\n    const va = fn(a);\r\n    const vb = fn(b);\r\n    if (va < vb) return -1;\r\n    if (va > vb) return 1;\r\n    return 0;\r\n  });\r\n}\r\n\r\nexport function toRadians(a) {\r\n  return (a * Math.PI) / 180;\r\n}\r\n\r\nexport class Camera {\r\n  fov;\r\n  near;\r\n  far;\r\n  width;\r\n  height;\r\n  camera;\r\n  zoom;\r\n  view;\r\n  curTransform;\r\n\r\n  raycaster = new THREE.Raycaster();\r\n\r\n  constructor({ fov, near, far, width, height, domElement, zoomFn }) {\r\n    this.fov = fov;\r\n    this.near = near;\r\n    this.far = far;\r\n    this.width = width;\r\n    this.height = height;\r\n\r\n    this.camera = new THREE.PerspectiveCamera(\r\n      fov,\r\n      width / height,\r\n      near,\r\n      far + 1\r\n    );\r\n\r\n    this.camera.position.set(0, 0, this.far);\r\n\r\n    this.zoom = d3\r\n      .zoom()\r\n      .scaleExtent([\r\n        this.getScaleFromZ(this.far),\r\n        this.getScaleFromZ(this.near),\r\n      ])\r\n      .on(\"zoom\", (e) => {\r\n        this.d3ZoomHandler(e);\r\n        this.curTransform = e.transform;\r\n\r\n        zoomFn && zoomFn(e);\r\n      });\r\n\r\n    this.view = d3.select(domElement);\r\n    this.view.call(this.zoom);\r\n    this.zoom.transform(\r\n      this.view,\r\n      d3.zoomIdentity\r\n        .translate(this.width / 2, this.height / 2)\r\n        .scale(this.getScaleFromZ(this.far))\r\n    );\r\n  }\r\n\r\n  d3ZoomHandler(e) {\r\n    const scale = e.transform.k;\r\n    const x = -(e.transform.x - this.width / 2) / scale;\r\n    const y = (e.transform.y - this.height / 2) / scale;\r\n    const z = this.getZFromScale(scale);\r\n    this.camera.position.set(x, y, z);\r\n  }\r\n\r\n  getScaleFromZ(camera_z_position) {\r\n    const half_fov = this.fov / 2;\r\n    const half_fov_radians = toRadians(half_fov);\r\n    const half_fov_height = Math.tan(half_fov_radians) * camera_z_position;\r\n    const fov_height = half_fov_height * 2;\r\n    const scale = this.height / fov_height;\r\n    return scale;\r\n  }\r\n\r\n  getZFromScale(scale) {\r\n    const half_fov = this.fov / 2;\r\n    const half_fov_radians = toRadians(half_fov);\r\n    const scale_height = this.height / scale;\r\n    const camera_z_position = scale_height / (2 * Math.tan(half_fov_radians));\r\n    return camera_z_position;\r\n  }\r\n\r\n  intersectObject(mouseX, mouseY, mesh) {\r\n    this.raycaster.setFromCamera(\r\n      {\r\n        x: mouseX,\r\n        y: mouseY,\r\n      },\r\n      this.camera\r\n    );\r\n\r\n    return this.raycaster.intersectObject(mesh);\r\n  }\r\n}\r\n\r\nexport class MeshGeometry {\r\n  threeGeom = new THREE.Geometry();\r\n  idx = 0;\r\n\r\n  addMeshCoords(meshCoords, transform, color, z = 0) {\r\n    const indices = [];\r\n\r\n    for (let j = 0; j < meshCoords.length; j++) {\r\n      const [v1, v2, v3] = meshCoords[j];\r\n\r\n      const a = new THREE.Vector3(transform.x + v1[0], transform.y - v1[1], z);\r\n      const b = new THREE.Vector3(transform.x + v2[0], transform.y - v2[1], z);\r\n      const c = new THREE.Vector3(transform.x + v3[0], transform.y - v3[1], z);\r\n      this.threeGeom.vertices.push(a, b, c);\r\n\r\n      const face = new THREE.Face3(\r\n        this.idx * 3 + 0,\r\n        this.idx * 3 + 1,\r\n        this.idx * 3 + 2\r\n      );\r\n\r\n      if (color) {\r\n        face.vertexColors.push(color);\r\n        face.vertexColors.push(color);\r\n        face.vertexColors.push(color);\r\n      }\r\n\r\n      this.threeGeom.faces.push(face);\r\n\r\n      indices.push(this.idx++);\r\n    }\r\n\r\n    return indices;\r\n  }\r\n}\r\n\r\nexport function mouseToThree(mouseX, mouseY, width, height) {\r\n  return {\r\n    x: (mouseX / width) * 2 - 1,\r\n    y: -(mouseY / height) * 2 + 1,\r\n  };\r\n}\r\n\r\nexport function useStateRef(val) {\r\n  const [state, _setState] = useState(val);\r\n  const stateRef = useRef(val);\r\n\r\n  useEffect(() => void (stateRef.current = state), [state]);\r\n\r\n  const setState = useCallback((v) => {\r\n    _setState((stateRef.current = v));\r\n  }, []);\r\n\r\n  return [state, setState, stateRef];\r\n}\r\n"],"names":["LEVELS","RAD_PX","MIN_LEV_VAL","SCEN_DIVISOR","SMALL_DROP_PAD_FACTOR","LargeDropletApp","_ref","watercolor","navigate","useNavigate","winDim","useRef","normalize","setNormalize","useState","bucketSvgSelector","zoomRef","objToWaterLevels","useMemo","objToLevels","orderedObjToScens","unorderedObjToScens","objectiveIDs","forEach","obj","criteriaSort","objectivesData","filter","_","i","reverse","mid","Math","floor","length","sort","a","b","d3","SCENARIO_KEY_STRING","DELIV_KEY_STRING","map","s","createInterps","MAX_DELIVS","ticksExact","d","useLayoutEffect","current","width","window","innerWidth","height","innerHeight","scaleExtent","translateExtent","on","e","select","attr","transform","selectAll","concat","k","sourceEvent","type","style","call","append","largeNodes","initNodes","data","n","join","enter","each","this","parentNode","_ref2","x","y","nodes","i1","text","tilt","_ref3","i2","levs","stops","interpolateWatercolorBlue","DROPLET_SHAPE","_ref4","_ref5","maxLev","actI","node","getBBox","getBoundingClientRect","_jsxs","className","children","_jsx","id","checked","onChange","htmlFor","ref","Object","keys","smallNodesPos","placeDropsUsingPhysics","r","max","smallNodes","_ref6","idx","w","random","dur","innerNodes","sqrt","PI","_ref7","SQRT1_2","DEGREE_SWAY","LINE_WIDTH","maskCounter","bucketGlyph","valueToLevelFn","arguments","undefined","transitionSway","rects","multiplier","prevLevel","transition","duration","delay","ease","attrTween","prevLiquidLevel","parseFloat","diff","abs","t","sin","min","period","size","bucketShape","shapeFunc","drawBucketMask","shapeOutlineFunc","drawFunc","drawOutlineFunc","getPath","fn","path","toString","bucketShapeMask","context","drawBucket","drawBucketOutline","closed","bottomRight","bottomLeft","moveTo","lineTo","closePath","drawDroplet","hypToRad","SQRT2","radToHeight","rad","hyp","heightActual","arc","distributeQuantiles","numericBins","unitsPerQuantile","maxQuantiles","quantileBins","bin","round","sum","Infinity","levelToDropletLevel","p","start","stop","count","bucketPath","DELIV_KEY_STRING_UNORD","async","objs","fetch","json","scen","unord","v","Array","from","mapBy","name","console","log","scenarioIDs","values","newObjs","groupBy","key","WATERDROP_ICON","draw","percentToRatioFilled","CIRC_RAD","DROP_RAD","CIRC_HEIGHT","DROP_HEIGHT","HAT_START","yToHalfWidth","trigX","angle","acos","yToSpriteY","spriteYToY","sy","waterdropDeltaOutline","yStart","yEnd","Y_DELTA","rightCoords","leftCoords","dx1","dy1","dx2","dy2","ceil","v1","v2","v3","v4","push","waterdropDelta","coords","kernelDensityEstimator","kernel","X","V","kernelEpanechnikov","generateWaterdrop","delta","outer","cos","generateRandoPoints","shape","bounds","Matter","create","minX","maxX","minY","maxY","genX","genY","points","contains","WATERDROP_CAGE_COORDS","inner","RANDO_CACHE","lastNodesLen","DET_CACHE","lastDetNodesLen","radsToDropWidth","AREA","reuse","WIDTH_AREA","randoPoints","Engine","Bodies","Composite","engine","nodePos","node_bodies","nx","ny","circle","restitution","parts","quad","position","centre","vertices","isStatic","cage","setParts","setCentre","scale","add","world","FPS","SECS","update","retVal","useStickyScale","defaultVal","val","setVal","useCallback","obj_name","scen_name","maxDelivs","delivs","domain","range","clamp","criteria","objective","get","object","defaultValue","_object","split","part","pick","sortBy","array","va","vb","toRadians","Camera","constructor","fov","near","far","domElement","zoomFn","raycaster","THREE","camera","set","zoom","getScaleFromZ","d3ZoomHandler","curTransform","view","translate","z","getZFromScale","camera_z_position","half_fov_radians","fov_height","tan","intersectObject","mouseX","mouseY","mesh","setFromCamera","MeshGeometry","threeGeom","addMeshCoords","meshCoords","color","indices","j","c","face","vertexColors","faces","mouseToThree","useStateRef","state","_setState","stateRef","useEffect","setState"],"sourceRoot":""}