"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[269],{5269:(t,a,e)=>{e.a(t,(async(t,r)=>{try{e.r(a),e.d(a,{default:()=>h});var n=e(5760),s=e(5043),l=e(3999),i=e(5111),c=e(1135),o=e(1659),p=e(7130),d=e(7285),u=e(579),m=t([d]);function h(){const{slides:t,storyVars:a}=(0,d.R)(p.A.DEFAULT_OBJECTIVE);return(0,u.jsx)("div",{className:"tutorial-view",children:(0,u.jsxs)("div",{className:"scrollama scrollama-1",children:[(0,u.jsx)(f,{storyVars:a}),(0,u.jsx)(g,{slides:t})]})})}function f(t){let{storyVars:a}=t;return(0,u.jsx)("div",{className:"tut-panel-wrapper",children:n.range(4).map((t=>(0,u.jsx)(x,{label:p.A.VARIATIONS[t].scen_str,bucketInterper:a.curBucketInterpers[t],dropInterper:a.curDropInterpers[t],histData:a.variationDelivsUnord[t]},t)))})}function g(t){let{slides:a}=t;return(0,u.jsx)(y,{cleanupFn:()=>{for(let e=a.length-1;e>=0;e--){var t;null===(t=a[e].animHandler)||void 0===t||t.undo()}},children:a.map(((t,a)=>(0,u.jsx)(l.p,{data:t,children:(0,u.jsx)(T,{slide:t})},a)))})}function y(t){let{cleanupFn:a,children:e}=t;return(0,u.jsxs)(l.h,{offset:.9,onStepEnter:async t=>{var a;let{data:e,direction:r}=t;"up"!==r&&(null===(a=e.animHandler)||void 0===a||a.do())},onStepExit:async t=>{var a;let{data:e,direction:r}=t;"down"!==r&&(null===(a=e.animHandler)||void 0===a||a.undo())},children:[e,(0,u.jsx)(l.p,{data:{},children:(0,u.jsx)(v,{cleanupFn:a})},"last")]})}function x(t){let{label:a,bucketInterper:e,dropInterper:r,histData:n}=t;return(0,u.jsxs)("div",{className:"tut-panel",children:[(0,u.jsx)("div",{className:"tut-graph-wrapper",children:(0,u.jsxs)("div",{className:"tut-graph",children:[(0,u.jsx)("svg",{id:"bar-graph"}),(0,u.jsx)(i.A,{levelInterp:e,width:300,height:p.A.BAR_CHART_HEIGHT,colorInterp:p.A.INTERP_COLOR}),(0,u.jsx)("p",{className:"fancy-font objective-label",children:a})]})}),(0,u.jsxs)("div",{className:"tut-drop-graphics-wrapper",children:[(0,u.jsx)("div",{className:"main-waterdrop",children:(0,u.jsx)(o.A,{levelInterp:r,width:400,height:p.A.BAR_CHART_HEIGHT,colorInterp:p.A.INTERP_COLOR})}),(0,u.jsx)("div",{className:"main-histogram example-drops-hg",children:(0,u.jsx)(c.A,{width:600,height:400,data:n,domain:[0,1200]})}),(0,u.jsx)("p",{className:"fancy-font objective-label",children:a})]})]})}d=(m.then?(await m)():m)[0];const T=(0,s.forwardRef)((function(t,a){let{slide:e}=t;return(0,u.jsx)("div",{ref:a,className:"tut-text-card",children:e.text})})),v=(0,s.forwardRef)((function(t,a){let{cleanupFn:e}=t;return(0,u.jsx)("div",{ref:a,className:"tut-text-card",style:{marginBottom:"40vh"},children:(0,u.jsx)("button",{onClick:()=>{window.scrollTo(0,0),e()},children:"Back to Top"})})}));r()}catch(A){r(A)}}))},5505:(t,a,e)=>{e.a(t,(async(t,r)=>{try{e.d(a,{Vk:()=>c,Zl:()=>o,jx:()=>d,pk:()=>i,sQ:()=>p});var n=e(5760),s=e(9985),l=t([s]);s=(l.then?(await l)():l)[0];const i=1200,c="scens",o="delivs",p="delivs_unord",d=await async function(){const t=[{obj:"exampleObj",scens:[{name:"always_100_perc",delivs:n.range(50).map((()=>i))},{name:"always_0_perc",delivs:n.range(50).map((()=>0))},{name:"always_50_perc",delivs:n.range(50).map((()=>i/2))},{name:"uniform_50_perc",delivs:n.range(50).map(((t,a)=>a/50*i))}]}];for(const a of t){for(const t of a[c])t[p]=Array.from(t[o]),t[o]=Array.from(t[o]).sort(((t,a)=>a-t));a[c]=(0,s.Et)(a[c],(t=>{let{name:a}=t;return a}))}return console.log("DATA: loading example objectives data"),(0,s.Et)(t,(t=>{let{obj:a}=t;return a}))}();Object.keys(d),Object.keys(Object.values(d)[0][c]);r()}catch(i){r(i)}}),1)},7130:(t,a,e)=>{e.d(a,{A:()=>s});var r=e(5760),n=e(1684);const s=function(){const t=n.YW,a=[{scen_str:"always_100_perc"},{scen_str:"always_0_perc"},{scen_str:"always_50_perc"},{scen_str:"uniform_50_perc"}],e=r.scaleLinear().range([0,0]),s=a.map((()=>e));return{BAR_CHART_WIDTH:500,BAR_CHART_HEIGHT:400,INTERP_COLOR:t,DEFAULT_OBJECTIVE:"exampleObj",VARIATIONS:a,EMPTY_INTERPERS:s}}()},984:(t,a,e)=>{e.d(a,{W:()=>l});var r=e(5760),n=e(3394),s=e(7130);const l={prepareDOM:function(){(0,n.f2)(".bucket-wrapper, .main-histogram, .tut-drop-graphics-wrapper")},initChartAnimGroup:function(t){let a,e,n,l,{deps:i}=t;const c=40,o=30,p=40,d=60;return function(){{r.selectAll("#bar-graph > *").remove();const t=r.selectAll("#bar-graph").attr("width",s.A.BAR_CHART_WIDTH+d+o).attr("height",s.A.BAR_CHART_HEIGHT+c+p).attr("opacity",1).append("g").attr("class","svg-group").attr("transform","translate(".concat(d,",").concat(c,")")),u=i.variationDelivsUnord;l=r.max(u[0]);const m=u.map((t=>t.map(((t,a)=>({val:t,placeFromLeft:a,year:a+1}))).sort(((t,a)=>a.val-t.val)))),A=r.scaleBand().domain(m[0].map((t=>{let{year:a}=t;return a})).sort(((t,a)=>t-a))).range([0,s.A.BAR_CHART_WIDTH]).padding(.4),h=r.scaleLinear().domain([0,l]).range([s.A.BAR_CHART_HEIGHT,0]),f=r.axisBottom(A).tickSize(0).tickFormat((t=>"year ".concat(t))).tickValues(A.domain().filter(((t,a)=>0===a||(a+1)%10===0)));t.append("g").attr("class","anim-xaxis"),t.append("g").attr("class","axis-y"),t.selectAll(".anim-xaxis").attr("opacity",1).attr("transform","translate(0, ".concat(s.A.BAR_CHART_HEIGHT,")")).call(f).selectAll("text").attr("transform","translate(-10,0)rotate(-45)").style("text-anchor","end"),t.selectAll(".axis-y").call(r.axisLeft(h).tickFormat(r.format(".2s"))).append("text").text("Deliveries (TAF)").attr("fill","black").attr("font-weight","bold").attr("transform","translate(-50, ".concat(s.A.BAR_CHART_HEIGHT/2,") rotate(-90)")),a=A,e=f,n=m}}(),{barsAppear:{do:function(){{const t=r.scaleLinear().domain([0,l]).range([s.A.BAR_CHART_HEIGHT,0]);r.selectAll("#bar-graph .svg-group").each((function(e,l){r.select(this).selectAll(".bars").data(n[l],(t=>t.placeFromLeft)).join("rect").attr("class","bars").attr("x",(t=>a(t.year))).attr("y",s.A.BAR_CHART_HEIGHT).attr("width",a.bandwidth()).attr("height",0).attr("opacity",1).attr("fill","steelblue").transition().duration(500).delay((t=>10*t.placeFromLeft)).attr("y",(a=>t(a.val))).attr("height",(a=>s.A.BAR_CHART_HEIGHT-t(a.val)))}))}},undo:function(){r.selectAll("#bar-graph .svg-group").selectAll(".bars").transition().duration(500).delay((t=>10*(n[0].length-t.placeFromLeft-1))).attr("y",s.A.BAR_CHART_HEIGHT).attr("height",0)}},barsCondense:{do:async function(){{const t=s.A.BAR_CHART_WIDTH/8,a=r.selectAll("#bar-graph .svg-group");a.selectAll(".anim-xaxis").call(e.tickFormat(""));const l=a.selectAll(".bars");l.style("mix-blend-mode","multiply").transition().duration(500).attr("opacity",.05).transition().delay((t=>100+1e3*(1-(1-t.placeFromLeft/n[0].length)**4))).duration(500).attr("width",t).attr("x",s.A.BAR_CHART_WIDTH/2-t/2).end().catch((()=>{})).then((()=>{a.selectAll(".anim-xaxis").transition().transition(500).attr("transform","translate(0, ".concat(s.A.BAR_CHART_HEIGHT+50,")")).attr("opacity",0),l.transition().delay(500).attr("x",0),a.transition().delay(500).attr("transform","translate(".concat(d+s.A.BAR_CHART_WIDTH/2-t/2,",").concat(c,")"))}))}},undo:function(){{const t=r.selectAll("#bar-graph .svg-group"),l=t.selectAll(".bars");t.selectAll(".anim-xaxis").transition().transition(500).attr("transform","translate(0, ".concat(s.A.BAR_CHART_HEIGHT,")")).attr("opacity",1),t.selectAll(".anim-xaxis").call(e.tickFormat((t=>"year ".concat(t)))),t.transition().delay(500).attr("transform","translate(".concat(d,",").concat(c,")")),l.transition().delay((t=>100+1e3*(1-(t.placeFromLeft/n[0].length)**4))).duration(500).attr("x",(t=>a(t.year))).attr("width",a.bandwidth()).transition().duration(500).attr("opacity",1).end().catch((()=>{})).then((()=>{l.style("mix-blend-mode","normal")}))}}}}},initBucketsFillAnim:function(t){let{deps:a}=t;return{do:function(){r.selectAll(".tut-graph-wrapper .bucket-wrapper").style("display","initial"),r.selectAll("#bar-graph").attr("opacity",0),a.setCurBucketInterpers(a.variationBucketInterpers)},undo:function(){a.setCurBucketInterpers((()=>s.A.EMPTY_INTERPERS)),r.selectAll(".tut-graph-wrapper .bucket-wrapper").style("display","none"),r.selectAll("#bar-graph").transition().attr("opacity",1)}}},initDropFillAnim:function(t){let{deps:a}=t;return{do:function(){(0,n.YB)(".main-waterdrop"),(0,n.YB)(".tut-drop-graphics-wrapper",r,"grid"),(0,n.f2)(".tut-graph-wrapper, .bucket-wrapper"),a.setCurDropInterpers(a.variationDropInterpers)},undo:function(){(0,n.f2)(".tut-drop-graphics-wrapper, .main-waterdrop"),(0,n.YB)(".bucket-wrapper"),(0,n.YB)(".tut-graph-wrapper",r,"flex"),a.setCurDropInterpers((()=>s.A.EMPTY_INTERPERS))}}},initShowVariationsAnim:function(t){let{deps:a}=t;return{do:function(){r.selectAll(".var-scen-label").style("opacity","1"),r.selectAll(".main-waterdrop").transition().style("transform","translateX(-200px)"),r.selectAll(".main-histogram").style("display","initial"),r.selectAll(".vardrop .dot-histogram-wrapper").style("display","initial")},undo:function(){r.selectAll(".main-waterdrop").transition().style("transform","none"),r.selectAll(".main-waterdrop .var-scen-label").transition().style("transform","none"),r.selectAll(".main-histogram").style("display","none"),r.selectAll(".vardrop .dot-histogram-wrapper").style("display","none")}}}}},7285:(t,a,e)=>{e.a(t,(async(t,r)=>{try{e.d(a,{R:()=>o});var n=e(5043),s=e(984),l=e(8899),i=t([l]);function o(t){const[a,e]=(0,n.useState)([]),r=(0,l.A)(t);return(0,n.useEffect)((function(){const a={deps:r,objective:t};s.W.prepareDOM();const n=s.W.initChartAnimGroup(a),l=s.W.initBucketsFillAnim(a),i=s.W.initDropFillAnim(a),c=s.W.initShowVariationsAnim(a),o=[{name:"barsAppear",animHandler:n.barsAppear,text:"Bar Graph"},{name:"barsCondense",animHandler:n.barsCondense,text:"Gradient"},{name:"bucketsFill",animHandler:l,text:"Bucket"},{name:"forNowLetsFocus",animHandler:i,text:"Waterdrop"},{name:"ifChangeReality",animHandler:c,text:"Different Scenarios"}];e(o)}),[r.variationDelivsUnord]),{slides:a,storyVars:r}}l=(i.then?(await i)():i)[0],r()}catch(c){r(c)}}))},8899:(t,a,e)=>{e.a(t,(async(t,r)=>{try{e.d(a,{A:()=>u});var n=e(5760),s=e(5043),l=e(1684),i=e(5505),c=e(7130),o=e(9985),p=t([i,o]);function u(t){const[a,e]=(0,s.useState)((()=>c.A.EMPTY_INTERPERS)),[r,p]=(0,s.useState)((()=>c.A.EMPTY_INTERPERS)),[d,u]=(0,s.useState)((()=>c.A.VARIATIONS.map((()=>[])))),[m,A]=(0,s.useState)((()=>c.A.EMPTY_INTERPERS)),[h,f]=(0,s.useState)((()=>c.A.EMPTY_INTERPERS));return(0,s.useEffect)((function(){p((()=>c.A.EMPTY_INTERPERS)),e((()=>c.A.EMPTY_INTERPERS));const a=i.pk,r=c.A.VARIATIONS.map((a=>{let{scen_str:e}=a;return i.jx[t][i.Vk][e][i.sQ]})),s=c.A.VARIATIONS.map((a=>{let{scen_str:e}=a;return i.jx[t][i.Vk][e][i.Zl]})),d=s.map((t=>e=>n.scaleLinear().domain((0,l.kd)(0,1,t.length)).range(t.map((t=>t/a)).sort(((t,a)=>t-a)).reverse()).clamp(!0)(e))),m=s.map((t=>e=>(0,o.si)(n.scaleLinear().domain((0,l.kd)(0,1,t.length)).range(t.map((t=>t/a)).sort(((t,a)=>t-a)).reverse()).clamp(!0)(e))));u((()=>r)),A((()=>d)),f((()=>m))}),[t]),{curDropInterpers:a,setCurDropInterpers:e,curBucketInterpers:r,setCurBucketInterpers:p,variationDelivsUnord:d,variationBucketInterpers:m,variationDropInterpers:h}}[i,o]=p.then?(await p)():p,r()}catch(d){r(d)}}))},1135:(t,a,e)=>{e.d(a,{A:()=>p});var r=e(5760),n=e(5043),s=e(2991),l=e(579);const i=20,c={top:10,right:10,bottom:40,left:10},o={draw:function(t,a){t.moveTo(0,-a/2),t.lineTo(a/4,-a/4),t.arc(0,0,a/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-a/2),t.closePath()}};function p(t){let{data:a,domain:e=[0,r.max(a)],width:p=600,height:d=400}=t;const u=(0,n.useRef)(),m=(0,n.useMemo)((()=>(0,s.Q)(p,d,a.length/i,e)(a)),[a,e]),A=[0,a.length],h=r.scaleLinear().domain(e).range([0,p]),f=r.scaleLinear().domain(A).range([d,0]);return(0,n.useEffect)((()=>{u.current.selectAll("*").remove();u.current.attr("width",p+c.left+c.right).attr("height",d+c.top+c.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(c.left,",").concat(c.top,")")).append("g").attr("transform","translate(0, ".concat(d,")")).call(r.axisBottom().scale(h).tickFormat(r.format(".2s"))).call((t=>{t.selectAll("line").attr("stroke","gray"),t.selectAll("path").attr("stroke","gray"),t.selectAll("text").attr("fill","gray")})).append("text").attr("fill","black").attr("font-size","2em").attr("transform","translate(".concat(p/2,", ",30,")")).text("Deliveries (TAF)")}),[a,e]),(0,n.useEffect)((()=>{const t=u.current.select(".graph-area").selectAll(".icons").data(m).join((t=>t.append("g").call((t=>t.append("path"))))).attr("class","icons").call((t=>{t.selectAll("path").attr("d",r.symbol(o,d/i))}));t.attr("transform",(t=>"translate(".concat(h(t[0]),",").concat(f(t[1]),")"))),t.attr("fill","steelblue")}),[m]),(0,l.jsx)("div",{className:"dot-histogram-wrapper",children:(0,l.jsx)("svg",{ref:t=>{u.current=r.select(t)}})})}}}]);
//# sourceMappingURL=269.3d2ccb01.chunk.js.map