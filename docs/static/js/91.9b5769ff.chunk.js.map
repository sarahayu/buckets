{"version":3,"file":"static/js/91.9b5769ff.chunk.js","mappings":"sSAsBA,MAAMA,EAAe,IACfC,EAAyB,gBACzBC,EAAoB,WACpBC,EAAoB,SAEpBC,GAAaC,EAAAA,EAAAA,eAAc,CAAC,GAEnB,SAASC,EAAUC,GAA6B,IAA5B,KAAEC,EAAOC,EAAAA,IAAgBF,EAC1D,MAAQG,QAASC,IAAmBC,EAAAA,EAAAA,QAAOC,OAAOC,KAAKN,KAEjD,KACJO,EAAI,UACJC,EAAS,SACTC,EAAQ,iBACRC,EAAgB,YAChBC,EAAW,mBACXC,EAAkB,QAElBC,EAAO,aACPC,EAAY,YACZC,EAAW,oBACXC,EAAmB,eACnBC,EAAc,sBACdC,GACEC,KAGE,gBAAEC,EAAe,oBAAEC,GAAwBC,EAC/CtB,EACAG,EACAO,EACAC,EACAC,EACAH,GAIIc,GAAgBC,EAAAA,EAAAA,UACpB,IAAMJ,EAAgBV,IACtB,CAACA,EAAkBU,IAGfK,EAAuBb,GAAsBD,EAEnD,OACEe,EAAAA,EAAAA,MAAC9B,EAAW+B,SAAQ,CAClBC,MAAO,CACL5B,OACAO,OACAG,mBACAC,cACAC,qBACAS,uBACAQ,SAAA,EAEFH,EAAAA,EAAAA,MAAA,OAAKI,UAAU,gBAAeD,SAAA,EAC5BE,EAAAA,EAAAA,KAAA,OAAKD,UAAU,uBAAsBD,UACnCE,EAAAA,EAAAA,KAACC,EAAS,CACRf,eAAgBA,EAChBH,aAAcA,OAGlBY,EAAAA,EAAAA,MAAA,OAAKI,UAAU,2BAA0BD,SAAA,EACvCE,EAAAA,EAAAA,KAACE,EAAU,CAACC,YAAaX,KAEzBQ,EAAAA,EAAAA,KAAA,OAAKD,UAAU,8BAA6BD,SACzC1B,EAAegC,KAAKC,IACnBL,EAAAA,EAAAA,KAACM,EAAe,CAEdC,MAAOF,EACPG,OAAQH,IAAkB1B,EAC1B8B,QAASA,KACPxB,EAAoBoB,EAAc,EAClCP,UAEFE,EAAAA,EAAAA,KAACU,EAAAA,EAAW,CACVP,YAAad,EAAgBgB,GAC7BM,MAAO,GACPC,OAAQ,MAVLP,WAgBbL,EAAAA,EAAAA,KAAA,OAAKD,UAAU,oBAAmBD,UAChCE,EAAAA,EAAAA,KAACa,EAAAA,EAAY,CACX5C,KACEA,EAAKU,GAAkBmC,EAAAA,IAAqBpB,GAC1CqB,EAAAA,IAGJvC,KAAMA,EACNM,QAASA,SAIdL,IACCuB,EAAAA,EAAAA,KAACgB,EAAO,CACNtC,SAAUA,EACVM,YAAaA,EACbE,eAAgBA,EAChBC,sBAAuBA,MAKjC,CAMA,SAASC,IACP,MAAOZ,EAAMM,IAAWmC,EAAAA,EAAAA,UAASxD,IAC1BgB,EAAWM,IAAgBkC,EAAAA,EAAAA,WAAS,IACpCvC,EAAUM,IAAeiC,EAAAA,EAAAA,UAASrD,IAElCe,EAAkBM,IAAuBgC,EAAAA,EAAAA,UAC9CvD,IAGKkB,EAAaM,IAAkB+B,EAAAA,EAAAA,UAAStD,IACxCkB,EAAoBM,IAAyB8B,EAAAA,EAAAA,UAAS,MAE7D,MAAO,CACLzC,OACAM,UACAL,YACAM,eACAL,WACAM,cACAL,mBACAM,sBACAL,cACAM,iBACAL,qBACAM,wBAEJ,CAEA,SAASI,EACPtB,EACAG,EACAO,EACAC,EACAC,EACAH,GAEA,MAAMY,GAAsBG,EAAAA,EAAAA,UAC1B,KAAMyB,EAAAA,EAAAA,IAAaxC,EAAUT,EAAMU,IACnC,CAACD,EAAUC,IASb,MAAO,CACLU,iBAPsBI,EAAAA,EAAAA,UACtB,IACE0B,EAAclD,EAAMG,EAAgBS,GAAsBD,IAC5D,CAACA,EAAaC,IAKdS,sBAEJ,CAMA,SAASgB,EAAec,GAAwC,IAAvC,MAAEb,EAAK,OAAEC,EAAM,QAAEC,EAAO,SAAEX,GAAUsB,EAC3D,OACEzB,EAAAA,EAAAA,MAAA,OACEI,UAAWsB,IAAW,uBAAwB,CAC5C,eAAgBb,IAElBC,QAASA,EACTa,MAAOf,EAAMT,SAAA,EAEbE,EAAAA,EAAAA,KAAA,QAAAF,SAAOS,IACNT,IAGP,CAEA,SAASG,EAASsB,GAAoC,IAAnC,eAAErC,EAAc,aAAEH,GAAcwC,EACjD,MAAM,YAAE3C,EAAW,mBAAEC,EAAkB,oBAAES,IACvCkC,EAAAA,EAAAA,YAAW3D,GAEP6B,EAAuBb,GAAsBD,EACnD,OACEe,EAAAA,EAAAA,MAAA8B,EAAAA,SAAA,CAAA3B,SAAA,EACEE,EAAAA,EAAAA,KAAA,SACED,UAAU,kBACV2B,OAAO,WACPC,KAAK,QACL9B,MAAOP,EAAoBsC,QAAQlC,GACnCmC,IAAI,IACJC,IAAKxC,EAAoByC,OAAS,EAClCC,SAAWC,IACJ/C,EAAeI,EAAoB4C,SAASD,EAAEE,OAAOtC,QAC3D,KAEHF,EAAAA,EAAAA,MAAA,OAAKI,UAAU,gBAAeD,SAAA,EAC5BE,EAAAA,EAAAA,KAAA,QAAAF,SAAM,sBACNE,EAAAA,EAAAA,KAAA,QAAAF,SAAOJ,KACPM,EAAAA,EAAAA,KAAA,QACED,UAAWsB,IAAW,oBAAqB,CACzC,cAAsC,OAAvBxC,IACdiB,SACJ,gBAGDE,EAAAA,EAAAA,KAAA,UAAQS,QAASA,KAAW1B,GAAcqD,IAAOA,GAAG,EAAAtC,SAAC,sBAM7D,CAEA,SAASI,EAAUmC,GAAmB,IAAlB,YAAElC,GAAakC,EACjC,MAAM,iBAAE1D,EAAgB,KAAEH,IAASgD,EAAAA,EAAAA,YAAW3D,GAC9C,OACEmC,EAAAA,EAAAA,KAAA,OAAKD,UAAU,iBAAgBD,UAC7BH,EAAAA,EAAAA,MAAA,OAAKI,UAAU,2BAA0BD,SAAA,EACvCE,EAAAA,EAAAA,KAAA,QAAMD,UAAU,wBAAuBD,SAAEnB,KACzCqB,EAAAA,EAAAA,KAACU,EAAAA,EAAW,CAACP,YAAaA,EAAaQ,MAAO,IAAKC,OAAQ,OAC3DjB,EAAAA,EAAAA,MAAA,OACEI,UAAU,mBACVuC,MAAO,CACLC,IACEC,EAAAA,MAAiBC,OAAO,CAAC,EAAGC,EAAAA,KAAaC,MAAM,CAAC,IAAK,GAArDH,CAAyDhE,GACzD,MACFsB,SAAA,EAEFE,EAAAA,EAAAA,KAAA,KAAAF,SAAG,UACHH,EAAAA,EAAAA,MAAA,KAAAG,SAAA,CACG0C,EAAAA,IAAU,MAAVA,CAAiBhE,GAAM,KAACwB,EAAAA,EAAAA,KAAA,QAAAF,SAAM,kBAM3C,CAEA,SAASkB,EAAO4B,GAKZ,IALa,SACflE,EAAQ,YACRM,EAAW,eACXE,EAAc,sBACdC,GACDyD,EACC,MAAM,KACJ3E,EAAI,iBACJU,EAAgB,YAChBC,EAAW,mBACXC,EAAkB,oBAClBS,EAAmB,KACnBd,IACEgD,EAAAA,EAAAA,YAAW3D,GAETgF,GAAqBpD,EAAAA,EAAAA,UAAQ,IAC1BqD,MAAMC,KAAKzD,GACf0D,UACAC,QACC,CAACC,EAAQC,IACPD,IAAWtE,IACXwE,EAAAA,EAAAA,IAAW,EAAG,GAAK,IAChBhD,KAAKgC,GAAMiB,KAAKC,OAAOlB,EAAI,KAAQ9C,EAAoByC,UACvDwB,SAASJ,MAEjB,CAAC7D,EAAqBV,IAEzB,OACEe,EAAAA,EAAAA,MAAA,OAAKI,UAAU,wBAAuBD,SAAA,EACpCH,EAAAA,EAAAA,MAAA,OAAKI,UAAU,iBAAgBD,SAAA,EAC7BE,EAAAA,EAAAA,KAAA,SACE2B,KAAK,QACL6B,KAAK,YACL3D,MAAM,SACN4D,GAAG,SACHC,QAAsB,WAAbhF,EACTsD,SAAUA,KAAWhD,EAAY,SAAU,KAE7CgB,EAAAA,EAAAA,KAAA,SAAO2D,QAAQ,SAAQ7D,SAAC,YAExBE,EAAAA,EAAAA,KAAA,SACE2B,KAAK,QACL6B,KAAK,YACL3D,MAAM,aACN4D,GAAG,aACHC,QAAsB,eAAbhF,EACTsD,SAAUA,KAAWhD,EAAY,aAAc,KAEjDgB,EAAAA,EAAAA,KAAA,SAAO2D,QAAQ,aAAY7D,SAAC,qBAE5BE,EAAAA,EAAAA,KAAA,SACE2B,KAAK,QACL6B,KAAK,YACL3D,MAAM,eACN4D,GAAG,eACHC,QAAsB,iBAAbhF,EACTsD,SAAUA,KAAWhD,EAAY,eAAgB,KAEnDgB,EAAAA,EAAAA,KAAA,SAAO2D,QAAQ,eAAc7D,SAAC,qBAEhCH,EAAAA,EAAAA,MAAA,OACEI,UAAWsB,IAAW,wBAAyB,CAC7C,iBAAyC,OAAvBxC,IAEpB+E,aAAcA,IAAMzE,EAAsB,MAAMW,SAAA,EAEhDE,EAAAA,EAAAA,KAAC6D,EAAW,CAACC,QAASjB,EAAmB/C,SACtC+C,EAAmBzC,KAAK8C,IACvBvD,EAAAA,EAAAA,MAAA,OAEEI,UAAWsB,IAAW,CACpB,iBAAkB6B,IAAWrE,EAC7B,oBAAqBqE,IAAWtE,IAElCmF,aAAcA,IAAM5E,EAAsB+D,GAC1CzC,QAASA,KACPvB,EAAegE,EAAO,EACtBpD,SAAA,EAEFE,EAAAA,EAAAA,KAACgE,EAAAA,EAAiB,CAChB/F,KACEA,EAAKU,GAAkBmC,EAAAA,IAAqBoC,GAC1CnC,EAAAA,IAGJvC,KAAMA,EACNmC,MAAO,IACPC,OAAQ,OAEVZ,EAAAA,EAAAA,KAAA,QAAAF,SAAOoD,MApBFA,QAwBXlD,EAAAA,EAAAA,KAAA,OACED,UAAU,wBACVuC,MAAO,CACL2B,KACEzB,EAAAA,MAAiBC,OAAO,CAAC,EAAGC,EAAAA,KAAaC,MAAM,CAAC,EAAG,KAAnDH,CAAyDhE,GACzD,aAMd,CAEA,SAASqF,EAAWK,GAAyB,IAAxB,QAAEJ,EAAO,SAAEhE,GAAUoE,EACxC,MAAMC,GAAa9F,EAAAA,EAAAA,QAAO,CAAC,GAErB+F,GAAa/F,EAAAA,EAAAA,QAAO,CAAC,GACrBgG,GAAUhG,EAAAA,EAAAA,QAAO,CAAC,GA4CxB,OA1CAiG,EAAAA,EAAAA,kBAAgB,KACdF,EAAWjG,QAAU,CAAC,EAEtB,IAAK,MAAMoG,KAAKJ,EAAWhG,QACzBiG,EAAWjG,QAAQoG,GAAKJ,EAAWhG,QAAQoG,GAG7CJ,EAAWhG,QAAU,CAAC,EAEtB,IAAK,MAAMoG,KAAKF,EAAQlG,QACtBgG,EAAWhG,QAAQoG,GAAKF,EAAQlG,QAAQoG,GAAGC,wBAGlBlG,OAAOC,KAAK6F,EAAWjG,SAAS4D,QAGzD0C,EAAAA,SAAeC,QAAQ5E,GAAW6E,IAChC,MAAMC,EAAWT,EAAWhG,QAAQwG,EAAME,KACpCC,EAAUV,EAAWjG,QAAQwG,EAAME,KAEzC,QAAgBE,IAAZD,QAAsCC,IAAbH,EAAwB,OACrD,MAAMI,EAAYJ,EAASrC,IAAMuC,EAAQvC,IAErCyC,GACFC,uBAAsB,KACpBZ,EAAQlG,QACNwG,EAAME,KACNvC,MAAM4C,UAAS,cAAAC,QAAkBH,EAAS,OAC5CX,EAAQlG,QAAQwG,EAAME,KAAKvC,MAAM8C,WAAa,eAE9CH,uBAAsB,KACpBZ,EAAQlG,QAAQwG,EAAME,KAAKvC,MAAM4C,UAAY,GAC7Cb,EAAQlG,QAAQwG,EAAME,KAAKvC,MAAM8C,WAAa,iBAAiB,GAC/D,GAEN,GAEJ,GACC,CAACtB,IAEJO,EAAQlG,QAAU,CAAC,EAEZsG,EAAAA,SAAerE,IAAIN,GAAW6E,GAC5BF,EAAAA,aAAmBE,EAAO,CAC/BU,IAAMC,IACAA,IACFjB,EAAQlG,QAAQwG,EAAME,KAAOS,EAC/B,KAIR,CAMA,SAASnE,EAAclD,EAAMsH,EAAYrC,GACvC,MAAMsC,EAAU,CAAC,EASjB,OARAD,EAAWb,SAASlB,IAClB,MAAMiC,EAASxH,EAAKuF,GAAM1C,EAAAA,IAAqBoC,GAAQnC,EAAAA,IACvDyE,EAAQhC,GAAQhB,EAAAA,MAEbC,QAAOW,EAAAA,EAAAA,IAAW,EAAG,EAAGqC,EAAO1D,SAC/BY,MAAM8C,EAAOrF,KAAKsF,GAAMrC,KAAKxB,IAAI,EAAG6D,EAAIhD,EAAAA,KAAe,KACvDiD,OAAM,EAAK,IAETH,CACT,C","sources":["OldMainApp.jsx"],"sourcesContent":["import React, {\r\n  createContext,\r\n  useContext,\r\n  useLayoutEffect,\r\n  useMemo,\r\n  useRef,\r\n  useState,\r\n} from \"react\";\r\nimport * as d3 from \"d3\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  MAX_DELIVS,\r\n  SCENARIO_KEY_STRING,\r\n  objectivesData,\r\n} from \"./data/objectivesData\";\r\nimport { ticksExact } from \"./bucket-lib/utils\";\r\nimport BucketGlyph from \"./bucket-lib/BucketGlyph\";\r\nimport DotHistogram from \"./DotHistogram\";\r\nimport DotHistogramSmall from \"./DotHistogramSmall\";\r\nimport classNames from \"classnames\";\r\nimport { criteriaSort } from \"./utils\";\r\n\r\nconst DEFAULT_GOAL = 200;\r\nconst DEFAULT_OBJECTIVE_NAME = \"DEL_CVP_PAG_N\";\r\nconst DEFAULT_SCEN_NAME = \"expl0000\";\r\nconst DEFAULT_SORT_MODE = \"median\";\r\n\r\nconst AppContext = createContext({});\r\n\r\nexport default function OldMainApp({ data = objectivesData }) {\r\n  const { current: objectiveNames } = useRef(Object.keys(data));\r\n\r\n  const {\r\n    goal,\r\n    showScens,\r\n    sortMode,\r\n    curObjectiveName,\r\n    curScenName,\r\n    curScenNamePreview,\r\n\r\n    setGoal,\r\n    setShowScens,\r\n    setSortMode,\r\n    setCurObjectiveName,\r\n    setCurScenName,\r\n    setCurScenNamePreview,\r\n  } = useInterface();\r\n\r\n  // calculating these often is laggy. cache.\r\n  const { curDelivInterps, curOrderedScenNames } = useCaches(\r\n    data,\r\n    objectiveNames,\r\n    curObjectiveName,\r\n    curScenName,\r\n    curScenNamePreview,\r\n    sortMode\r\n  );\r\n\r\n  // gotta memoize so bucket animations trigger\r\n  const curMainInterp = useMemo(\r\n    () => curDelivInterps[curObjectiveName],\r\n    [curObjectiveName, curDelivInterps]\r\n  );\r\n\r\n  const curScenNameDisplayed = curScenNamePreview || curScenName;\r\n\r\n  return (\r\n    <AppContext.Provider\r\n      value={{\r\n        data,\r\n        goal,\r\n        curObjectiveName,\r\n        curScenName,\r\n        curScenNamePreview,\r\n        curOrderedScenNames,\r\n      }}\r\n    >\r\n      <div className=\"old-dashboard\">\r\n        <div className=\"old-slider-container\">\r\n          <InputArea\r\n            setCurScenName={setCurScenName}\r\n            setShowScens={setShowScens}\r\n          />\r\n        </div>\r\n        <div className=\"old-bucket-map-container\">\r\n          <MainBucket levelInterp={curMainInterp} />\r\n\r\n          <div className=\"old-other-buckets-container\">\r\n            {objectiveNames.map((objectiveName) => (\r\n              <SmallBucketTile\r\n                key={objectiveName}\r\n                label={objectiveName}\r\n                active={objectiveName !== curObjectiveName}\r\n                onClick={() => {\r\n                  setCurObjectiveName(objectiveName);\r\n                }}\r\n              >\r\n                <BucketGlyph\r\n                  levelInterp={curDelivInterps[objectiveName]}\r\n                  width={50}\r\n                  height={50}\r\n                />\r\n              </SmallBucketTile>\r\n            ))}\r\n          </div>\r\n        </div>\r\n        <div className=\"old-pdf-container\">\r\n          <DotHistogram\r\n            data={\r\n              data[curObjectiveName][SCENARIO_KEY_STRING][curScenNameDisplayed][\r\n                DELIV_KEY_STRING\r\n              ]\r\n            }\r\n            goal={goal}\r\n            setGoal={setGoal}\r\n          />\r\n        </div>\r\n      </div>\r\n      {showScens && (\r\n        <Overlay\r\n          sortMode={sortMode}\r\n          setSortMode={setSortMode}\r\n          setCurScenName={setCurScenName}\r\n          setCurScenNamePreview={setCurScenNamePreview}\r\n        />\r\n      )}\r\n    </AppContext.Provider>\r\n  );\r\n}\r\n\r\n//\r\n// custom hooks\r\n//\r\n\r\nfunction useInterface() {\r\n  const [goal, setGoal] = useState(DEFAULT_GOAL);\r\n  const [showScens, setShowScens] = useState(false);\r\n  const [sortMode, setSortMode] = useState(DEFAULT_SORT_MODE);\r\n\r\n  const [curObjectiveName, setCurObjectiveName] = useState(\r\n    DEFAULT_OBJECTIVE_NAME\r\n  );\r\n\r\n  const [curScenName, setCurScenName] = useState(DEFAULT_SCEN_NAME);\r\n  const [curScenNamePreview, setCurScenNamePreview] = useState(null);\r\n\r\n  return {\r\n    goal,\r\n    setGoal,\r\n    showScens,\r\n    setShowScens,\r\n    sortMode,\r\n    setSortMode,\r\n    curObjectiveName,\r\n    setCurObjectiveName,\r\n    curScenName,\r\n    setCurScenName,\r\n    curScenNamePreview,\r\n    setCurScenNamePreview,\r\n  };\r\n}\r\n\r\nfunction useCaches(\r\n  data,\r\n  objectiveNames,\r\n  curObjectiveName,\r\n  curScenName,\r\n  curScenNamePreview,\r\n  sortMode\r\n) {\r\n  const curOrderedScenNames = useMemo(\r\n    () => criteriaSort(sortMode, data, curObjectiveName),\r\n    [sortMode, curObjectiveName]\r\n  );\r\n\r\n  const curDelivInterps = useMemo(\r\n    () =>\r\n      createInterps(data, objectiveNames, curScenNamePreview || curScenName),\r\n    [curScenName, curScenNamePreview]\r\n  );\r\n\r\n  return {\r\n    curDelivInterps,\r\n    curOrderedScenNames,\r\n  };\r\n}\r\n\r\n//\r\n// some components\r\n//\r\n\r\nfunction SmallBucketTile({ label, active, onClick, children }) {\r\n  return (\r\n    <div\r\n      className={classNames(\"old-bucket-and-label\", {\r\n        \"old-cur-obj\": !active,\r\n      })}\r\n      onClick={onClick}\r\n      title={label}\r\n    >\r\n      <span>{label}</span>\r\n      {children}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction InputArea({ setCurScenName, setShowScens }) {\r\n  const { curScenName, curScenNamePreview, curOrderedScenNames } =\r\n    useContext(AppContext);\r\n\r\n  const curScenNameDisplayed = curScenNamePreview || curScenName;\r\n  return (\r\n    <>\r\n      <input\r\n        className=\"old-input-range\"\r\n        orient=\"vertical\"\r\n        type=\"range\"\r\n        value={curOrderedScenNames.indexOf(curScenNameDisplayed)}\r\n        min=\"0\"\r\n        max={curOrderedScenNames.length - 1}\r\n        onChange={(e) =>\r\n          void setCurScenName(curOrderedScenNames[parseInt(e.target.value)])\r\n        }\r\n      />\r\n      <div className=\"old-scen-name\">\r\n        <span>Current Scenario</span>\r\n        <span>{curScenNameDisplayed}</span>\r\n        <span\r\n          className={classNames(\"old-preview-indic\", {\r\n            \"old-visible\": curScenNamePreview !== null,\r\n          })}\r\n        >\r\n          Previewing\r\n        </span>\r\n        <button onClick={() => void setShowScens((d) => !d)}>\r\n          See Overview\r\n        </button>\r\n      </div>\r\n    </>\r\n  );\r\n}\r\n\r\nfunction MainBucket({ levelInterp }) {\r\n  const { curObjectiveName, goal } = useContext(AppContext);\r\n  return (\r\n    <div className=\"old-bucket-viz\">\r\n      <div className=\"old-bucket-viz-container\">\r\n        <span className=\"old-main-bucket-label\">{curObjectiveName}</span>\r\n        <BucketGlyph levelInterp={levelInterp} width={100} height={100} />\r\n        <div\r\n          className=\"old-bucket-razor\"\r\n          style={{\r\n            top:\r\n              d3.scaleLinear().domain([0, MAX_DELIVS]).range([100, 0])(goal) +\r\n              \"px\",\r\n          }}\r\n        >\r\n          <p>Goal</p>\r\n          <p>\r\n            {d3.format(\".0f\")(goal)} <span>TAF</span>\r\n          </p>\r\n        </div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction Overlay({\r\n  sortMode,\r\n  setSortMode,\r\n  setCurScenName,\r\n  setCurScenNamePreview,\r\n}) {\r\n  const {\r\n    data,\r\n    curObjectiveName,\r\n    curScenName,\r\n    curScenNamePreview,\r\n    curOrderedScenNames,\r\n    goal,\r\n  } = useContext(AppContext);\r\n\r\n  const curPercentileScens = useMemo(() => {\r\n    return Array.from(curOrderedScenNames)\r\n      .reverse()\r\n      .filter(\r\n        (scenID, i) =>\r\n          scenID === curScenName ||\r\n          ticksExact(0, 0.9, 20)\r\n            .map((d) => Math.floor((d + 0.05) * curOrderedScenNames.length))\r\n            .includes(i)\r\n      );\r\n  }, [curOrderedScenNames, curScenName]);\r\n\r\n  return (\r\n    <div className=\"old-ridgeline-overlay\">\r\n      <div className=\"old-sort-types\">\r\n        <input\r\n          type=\"radio\"\r\n          name=\"sort-type\"\r\n          value=\"median\"\r\n          id=\"median\"\r\n          checked={sortMode === \"median\"}\r\n          onChange={() => void setSortMode(\"median\")}\r\n        />\r\n        <label htmlFor=\"median\">Median</label>\r\n\r\n        <input\r\n          type=\"radio\"\r\n          name=\"sort-type\"\r\n          value=\"deliveries\"\r\n          id=\"deliveries\"\r\n          checked={sortMode === \"deliveries\"}\r\n          onChange={() => void setSortMode(\"deliveries\")}\r\n        />\r\n        <label htmlFor=\"deliveries\">Max. Deliveries</label>\r\n\r\n        <input\r\n          type=\"radio\"\r\n          name=\"sort-type\"\r\n          value=\"alphabetical\"\r\n          id=\"alphabetical\"\r\n          checked={sortMode === \"alphabetical\"}\r\n          onChange={() => void setSortMode(\"alphabetical\")}\r\n        />\r\n        <label htmlFor=\"alphabetical\">Alphabetical</label>\r\n      </div>\r\n      <div\r\n        className={classNames(\"old-overlay-container\", {\r\n          \"old-previewing\": curScenNamePreview !== null,\r\n        })}\r\n        onMouseLeave={() => setCurScenNamePreview(null)}\r\n      >\r\n        <AnimateList keyList={curPercentileScens}>\r\n          {curPercentileScens.map((scenID) => (\r\n            <div\r\n              key={scenID}\r\n              className={classNames({\r\n                \"old-previewing\": scenID === curScenNamePreview,\r\n                \"old-current-scene\": scenID === curScenName,\r\n              })}\r\n              onMouseEnter={() => setCurScenNamePreview(scenID)}\r\n              onClick={() => {\r\n                setCurScenName(scenID);\r\n              }}\r\n            >\r\n              <DotHistogramSmall\r\n                data={\r\n                  data[curObjectiveName][SCENARIO_KEY_STRING][scenID][\r\n                    DELIV_KEY_STRING\r\n                  ]\r\n                }\r\n                goal={goal}\r\n                width={300}\r\n                height={200}\r\n              />\r\n              <span>{scenID}</span>\r\n            </div>\r\n          ))}\r\n        </AnimateList>\r\n        <div\r\n          className=\"old-dot-overlay-razor\"\r\n          style={{\r\n            left:\r\n              d3.scaleLinear().domain([0, MAX_DELIVS]).range([0, 300])(goal) +\r\n              \"px\",\r\n          }}\r\n        ></div>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction AnimateList({ keyList, children }) {\r\n  const currBBoxes = useRef({});\r\n\r\n  const prevBBoxes = useRef({});\r\n  const domRefs = useRef({});\r\n\r\n  useLayoutEffect(() => {\r\n    prevBBoxes.current = {};\r\n\r\n    for (const k in currBBoxes.current) {\r\n      prevBBoxes.current[k] = currBBoxes.current[k];\r\n    }\r\n\r\n    currBBoxes.current = {};\r\n\r\n    for (const k in domRefs.current) {\r\n      currBBoxes.current[k] = domRefs.current[k].getBoundingClientRect();\r\n    }\r\n\r\n    const hasPrevBoundingBox = Object.keys(prevBBoxes.current).length;\r\n\r\n    if (hasPrevBoundingBox) {\r\n      React.Children.forEach(children, (child) => {\r\n        const firstBox = currBBoxes.current[child.key];\r\n        const lastBox = prevBBoxes.current[child.key];\r\n\r\n        if (lastBox === undefined || firstBox === undefined) return;\r\n        const changeInX = firstBox.top - lastBox.top;\r\n\r\n        if (changeInX) {\r\n          requestAnimationFrame(() => {\r\n            domRefs.current[\r\n              child.key\r\n            ].style.transform = `translateY(${-changeInX}px)`;\r\n            domRefs.current[child.key].style.transition = \"transform 0s\";\r\n\r\n            requestAnimationFrame(() => {\r\n              domRefs.current[child.key].style.transform = \"\";\r\n              domRefs.current[child.key].style.transition = \"transform 500ms\";\r\n            });\r\n          });\r\n        }\r\n      });\r\n    }\r\n  }, [keyList]);\r\n\r\n  domRefs.current = {};\r\n\r\n  return React.Children.map(children, (child) => {\r\n    return React.cloneElement(child, {\r\n      ref: (el) => {\r\n        if (el) {\r\n          domRefs.current[child.key] = el;\r\n        }\r\n      },\r\n    });\r\n  });\r\n}\r\n\r\n//\r\n// some util functions\r\n//\r\n\r\nfunction createInterps(data, objectives, scenID) {\r\n  const mapFunc = {};\r\n  objectives.forEach((name) => {\r\n    const delivs = data[name][SCENARIO_KEY_STRING][scenID][DELIV_KEY_STRING];\r\n    mapFunc[name] = d3\r\n      .scaleLinear()\r\n      .domain(ticksExact(0, 1, delivs.length))\r\n      .range(delivs.map((v) => Math.min(1, v / MAX_DELIVS) || 0))\r\n      .clamp(true);\r\n  });\r\n  return mapFunc;\r\n}\r\n"],"names":["DEFAULT_GOAL","DEFAULT_OBJECTIVE_NAME","DEFAULT_SCEN_NAME","DEFAULT_SORT_MODE","AppContext","createContext","OldMainApp","_ref","data","objectivesData","current","objectiveNames","useRef","Object","keys","goal","showScens","sortMode","curObjectiveName","curScenName","curScenNamePreview","setGoal","setShowScens","setSortMode","setCurObjectiveName","setCurScenName","setCurScenNamePreview","useInterface","curDelivInterps","curOrderedScenNames","useCaches","curMainInterp","useMemo","curScenNameDisplayed","_jsxs","Provider","value","children","className","_jsx","InputArea","MainBucket","levelInterp","map","objectiveName","SmallBucketTile","label","active","onClick","BucketGlyph","width","height","DotHistogram","SCENARIO_KEY_STRING","DELIV_KEY_STRING","Overlay","useState","criteriaSort","createInterps","_ref2","classNames","title","_ref3","useContext","_Fragment","orient","type","indexOf","min","max","length","onChange","e","parseInt","target","d","_ref4","style","top","d3","domain","MAX_DELIVS","range","_ref5","curPercentileScens","Array","from","reverse","filter","scenID","i","ticksExact","Math","floor","includes","name","id","checked","htmlFor","onMouseLeave","AnimateList","keyList","onMouseEnter","DotHistogramSmall","left","_ref6","currBBoxes","prevBBoxes","domRefs","useLayoutEffect","k","getBoundingClientRect","React","forEach","child","firstBox","key","lastBox","undefined","changeInX","requestAnimationFrame","transform","concat","transition","ref","el","objectives","mapFunc","delivs","v","clamp"],"sourceRoot":""}