/*! For license information please see 988.cc79c83d.chunk.js.LICENSE.txt */
(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[988],{267:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>m});var a=n(487),s=n(43),c=n(987),o=n(829),l=n(63),i=n(579),u=e([o,l]);[o,l]=u.then?(await u)():u;const h=20,p={top:10,right:30,bottom:50,left:50},f=[0,l.pk];function m(e){let{data:t,goal:n,setGoal:r,width:l=600,height:u=400}=e;const d=(0,s.useRef)(),m=(0,s.useMemo)((()=>(0,c.u)(t,f,t.length/h,l,u)),[t]),v=[0,t.length],g=a.m4Y().domain(f).range([0,l]),x=a.m4Y().domain(v).range([u,0]),y=m.filter((e=>e[0]>n)).length;return(0,s.useEffect)((()=>{d.current.attr("width",l+p.left+p.right).attr("height",u+p.top+p.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(p.left,",").concat(p.top,")")).append("g").attr("transform","translate(0, ".concat(u,")")).call(a.l78().scale(a.m4Y().domain(f).range([0,l]))).call((e=>{e.selectAll("line").attr("stroke","gray"),e.selectAll("path").attr("stroke","gray"),e.selectAll("text").attr("fill","gray")})).append("text").attr("fill","black").attr("transform","translate(".concat(l/2,", ",30,")")).text("Delivery (TAF)");const e=document.querySelector("#pdf-razor");e.style.transform="translateX(".concat(a.m4Y().domain(f).range([p.left,l+p.left]).clamp(!0)(n),"px)");const t=e=>e.preventDefault();let s=!1;document.querySelector("#pdf-razor").addEventListener("mousedown",(()=>{s=!0,window.addEventListener("selectstart",t)})),document.addEventListener("mouseup",(()=>{s=!1,window.removeEventListener("selectstart",t)})),document.querySelector("#pdf-wrapper").addEventListener("mousemove",(t=>{s&&"pdf-wrapper"===t.target.id&&(e.style.transform="translateX(".concat(Math.min(Math.max(t.offsetX,p.left),p.left+l),"px)\n            "),r(a.m4Y().domain([p.left,l+p.left]).range(f).clamp(!0)(t.offsetX)))}))}),[]),(0,s.useEffect)((()=>{const e=d.current.select(".graph-area").selectAll(".icons").data(m).join((e=>e.append("g").call((e=>e.append("path"))))).attr("class","icons").call((e=>{e.selectAll("path").attr("d",a.HRO(o.XC,u/h))}));e.transition("position").delay((e=>100*a.m4Y(v).invert(e[1]))).duration(500).attr("transform",(e=>"translate(".concat(g(e[0]),",").concat(x(e[1]),")"))),e.transition("color").delay((e=>100*a.m4Y(v).invert(e[1]))).duration(0).attr("fill",(e=>e[0]>n?"steelblue":"black"))}),[n,m]),(0,i.jsxs)("div",{className:"dot-pdf-wrapper",id:"pdf-wrapper",children:[(0,i.jsx)("div",{className:"pdf-razor",id:"pdf-razor",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:[m.length-y," out of ",h," years WILL NOT meet demand"]}),(0,i.jsxs)("span",{children:[y," out of ",h," years WILL meet demand"]})]})}),(0,i.jsx)("svg",{ref:e=>{d.current=a.Ltv(e)}})]})}r()}catch(d){r(d)}}))},58:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{A:()=>m});var a=n(487),s=n(43),c=n(987),o=n(829),l=n(63),i=n(579),u=e([o,l]);[o,l]=u.then?(await u)():u;const h=20,p={top:10,right:10,bottom:3,left:0},f=[0,l.pk];function m(e){let{data:t,goal:n,width:r=600,height:u=400}=e;const d=(0,s.useRef)(),m=(0,s.useMemo)((()=>(0,c.u)(t,f,t.length/h,r,u)),[t]);return(0,s.useEffect)((()=>{const e=d.current.attr("width",r+p.left+p.right).attr("height",u+p.top+p.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(p.left,",").concat(p.top,")"));e.append("g").attr("transform","translate(0, ".concat(u,")")).call((e=>{e.selectAll("line").attr("stroke","gray"),e.selectAll("path").attr("stroke","gray")})),e.append("path").attr("class","ridgeline").attr("fill","none").attr("stroke","steelblue")}),[]),(0,s.useEffect)((()=>{const e=a.m4Y().domain(f).range([0,r]),n=a.m4Y().domain([0,.05]).range([u,0]).clamp(!0),s=(0,o.C5)((0,o.xC)(20),e.ticks(l.pk/4));d.current.select(".graph-area").select(".ridgeline").datum(s(t)).attr("d",a.n8j().curve(a.qrM).x((t=>e(t[0]))).y((e=>n(e[1]))))}),[t]),(0,s.useEffect)((()=>{const e=a.m4Y().domain(f).range([0,r]),s=a.m4Y().domain([0,t.length]).range([u,0]);d.current.select(".graph-area").selectAll(".icons").data(m).join((e=>e.append("g").attr("class","icons").call((e=>e.append("path"))))).call((e=>{e.select("path").attr("d",a.HRO(o.XC,u/h))})).attr("transform",(t=>"translate(".concat(e(t[0]),",").concat(s(t[1]),")"))).attr("fill",(e=>e[0]>n?"steelblue":"black"))}),[n,m]),(0,i.jsx)("svg",{className:"dot-pdf-shadowed",ref:e=>{d.current=a.Ltv(e)}})}r()}catch(d){r(d)}}))},988:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.r(t),n.d(t,{default:()=>j});var a=n(43),s=n(487),c=n(63),o=n(684),l=n(111),i=n(267),u=n(58),d=n(139),h=n.n(d),p=n(829),f=n(579),m=e([c,i,u,p]);[c,i,u,p]=m.then?(await m)():m;const g=200,x=13,y="median",k=(0,a.createContext)({});function j(e){let{data:t=c.jx}=e;const{current:n}=(0,a.useRef)(Object.keys(t)),[r,s]=(0,a.useState)(g),[u,d]=(0,a.useState)(!1),[h,p]=(0,a.useState)(y),[m,v]=(0,a.useState)(n[x]),[j,C]=(0,a.useState)(0),[P,A]=(0,a.useState)(null),{curDelivInterps:E,curPercentileScens:N,curOrderedScenIDs:O}=b(t,n,m,j,P,h),Y=(0,a.useMemo)((()=>E[m]),[j,P]),D=(0,o.ZC)(O[j]),L=O[j],z=null!==P?O[P]:null,q=z||L;return(0,a.useEffect)((()=>{D&&C(O.indexOf(D))}),[h,m]),(0,f.jsxs)(k.Provider,{value:{data:t,objectiveIDs:n,sortMode:h,curObjectiveID:m,curScenIdx:j,curScenPreviewIdx:P,curScenID:q,curScenIDPreview:z,curScenIDActual:L,curPercentileScens:N,goal:r,showScens:u,curOrderedScenIDs:O},children:[(0,f.jsxs)("div",{className:"dashboard",children:[(0,f.jsx)("div",{className:"slider-container",children:(0,f.jsx)(S,{setCurScenIdx:C,setShowScens:d})}),(0,f.jsxs)("div",{className:"bucket-map-container",children:[(0,f.jsx)(M,{levelInterp:Y}),(0,f.jsx)("div",{className:"other-buckets-container",children:n.map((e=>(0,f.jsx)(w,{label:e,active:e!==m,onClick:()=>v(e),children:(0,f.jsx)(l.A,{levelInterp:E[e],width:50,height:50})},e)))})]}),(0,f.jsx)("div",{className:"pdf-container",children:(0,f.jsx)(i.A,{data:t[m][c.Vk][q][c.Zl],goal:r,setGoal:s})})]}),u&&(0,f.jsx)(I,{setSortMode:p,setCurScenIdx:C,setCurScenPreviewIdx:A})]})}function b(e,t,n,r,s,c){const l=(0,a.useMemo)((()=>(0,p.Yb)(c,e,n)),[c,n]),i=l[r],u=(null!==s?l[s]:null)||i;return{curDelivInterps:(0,a.useMemo)((()=>P(e,t,u)),[r,s]),curPercentileScens:(0,a.useMemo)((()=>Array.from(l).reverse().filter(((e,t)=>e===u||(0,o.kd)(0,.9,20).map((e=>Math.floor((e+.05)*l.length))).includes(t)))),[r]),curOrderedScenIDs:l}}function w(e){let{label:t,active:n,onClick:r,children:a}=e;return(0,f.jsxs)("div",{className:h()("bucket-and-label",{"cur-obj":!n}),onClick:r,children:[(0,f.jsx)("span",{children:t}),a]})}function S(e){let{setCurScenIdx:t,setShowScens:n}=e;const{curScenPreviewIdx:r,curScenIdx:s,curOrderedScenIDs:c,curScenID:o}=(0,a.useContext)(k);return(0,f.jsxs)(f.Fragment,{children:[(0,f.jsx)("input",{className:"input-range",orient:"vertical",type:"range",value:null===r?s:r,min:"0",max:c.length-1,onChange:e=>{t(e.target.value)}}),(0,f.jsxs)("div",{className:"scen-name",children:[(0,f.jsx)("span",{children:"Current Scenario"}),(0,f.jsx)("span",{children:o}),(0,f.jsx)("span",{className:h()("preview-indic",{visible:null!==r}),children:"Previewing"}),(0,f.jsx)("button",{onClick:()=>{n((e=>!e))},children:"See Overview"})]})]})}function M(e){let{levelInterp:t}=e;const{curObjectiveID:n,goal:r}=(0,a.useContext)(k);return(0,f.jsx)("div",{className:"bucket-viz",children:(0,f.jsxs)("div",{className:"bucket-viz-container",children:[(0,f.jsx)("span",{className:"main-bucket-label",children:n}),(0,f.jsx)(l.A,{levelInterp:t,width:100,height:100}),(0,f.jsxs)("div",{className:"bucket-razor",style:{top:s.m4Y().domain([0,c.pk]).range([100,0])(r)+"px"},children:[(0,f.jsx)("p",{children:"Goal"}),(0,f.jsxs)("p",{children:[s.GPZ(".0f")(r)," ",(0,f.jsx)("span",{children:"TAF"})]})]})]})})}function I(e){let{setSortMode:t,setCurScenIdx:n,setCurScenPreviewIdx:r}=e;const{data:o,sortMode:l,curObjectiveID:i,curScenPreviewIdx:d,curScenIDPreview:p,curScenIDActual:m,curOrderedScenIDs:v,goal:g,curPercentileScens:x}=(0,a.useContext)(k);return(0,f.jsxs)("div",{className:"ridgeline-overlay",children:[(0,f.jsxs)("div",{className:"sort-types",children:[(0,f.jsx)("input",{type:"radio",name:"sort-type",value:"median",id:"median",checked:"median"===l,onChange:()=>{t("median")}}),(0,f.jsx)("label",{htmlFor:"median",children:"Median"}),(0,f.jsx)("input",{type:"radio",name:"sort-type",value:"deliveries",id:"deliveries",checked:"deliveries"===l,onChange:()=>{t("deliveries")}}),(0,f.jsx)("label",{htmlFor:"deliveries",children:"Max. Deliveries"})]}),(0,f.jsxs)("div",{className:h()("overlay-container",{previewing:null!==d}),onMouseLeave:()=>r(null),children:[(0,f.jsx)(C,{keyList:x,children:x.map((e=>(0,f.jsxs)("div",{className:h()({previewing:e===p,"current-scene":e===m}),onMouseEnter:()=>r(v.indexOf(e)),onClick:()=>{n(v.indexOf(e))},children:[(0,f.jsx)(u.A,{data:o[i][c.Vk][e][c.Zl],goal:g,width:300,height:200}),(0,f.jsx)("span",{children:e})]},e)))}),(0,f.jsx)("div",{className:"dot-overlay-razor",style:{left:s.m4Y().domain([0,c.pk]).range([0,300])(g)+"px"}})]})]})}function C(e){let{keyList:t,children:n}=e;const r=(0,a.useRef)({}),s=(0,a.useRef)({}),c=(0,a.useRef)({});return(0,a.useLayoutEffect)((()=>{s.current={};for(const e in r.current)s.current[e]=r.current[e];r.current={};for(const e in c.current)r.current[e]=c.current[e].getBoundingClientRect();Object.keys(s.current).length&&a.Children.forEach(n,(e=>{const t=r.current[e.key],n=s.current[e.key];if(void 0===n||void 0===t)return;const a=t.top-n.top;a&&requestAnimationFrame((()=>{c.current[e.key].style.transform="translateY(".concat(-a,"px)"),c.current[e.key].style.transition="transform 0s",requestAnimationFrame((()=>{c.current[e.key].style.transform="",c.current[e.key].style.transition="transform 500ms"}))}))}))}),[t]),c.current={},a.Children.map(n,(e=>a.cloneElement(e,{ref:t=>{t&&(c.current[e.key]=t)}})))}function P(e,t,n){const r={};return t.forEach((t=>{const a=e[t][c.Vk][n][c.Zl];r[t]=s.m4Y().domain((0,o.kd)(0,1,a.length)).range(a.map((e=>Math.min(1,e/c.pk)||0))).clamp(!0)})),r}r()}catch(v){r(v)}}))},111:(e,t,n)=>{"use strict";n.d(t,{A:()=>u});var r=n(487),a=n(43),s=n(684),c=n(579);const o=40,l=10,i=3;function u(e){let{levelInterp:t,colorInterp:n=s.YW,width:u=200,height:d=400,resolution:h=l}=e;const p=(0,a.useId)(),f=(0,a.useRef)(),m=(0,a.useMemo)((()=>(0,s.kd)(0,1,h+1).map((e=>t(e)))),[t,h]),v=(0,s.ZC)(m),g=u-2*i,x=d-i;return(0,a.useLayoutEffect)((()=>{const e=f.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(i,", ").concat(i/2,")"));e.append("defs").append("clipPath").attr("id","bucket-mask-"+p).append("path").attr("class","bucket-mask-path"),e.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(p,")")),e.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",i).attr("fill","none")}),[p]),(0,a.useLayoutEffect)((()=>{const e=f.current.attr("width",u).attr("height",d).select(".svg-container");e.select(".bucket-mask-path").attr("d",(0,s.wh)(g,x)),e.select(".bucket-outline").attr("d",(0,s.wh)(g,x).split("z")[0])}),[u,d,g,x]),(0,a.useLayoutEffect)((()=>{const e=f.current.select(".graph-area").selectAll(".bucketBox").data(m).join("rect").attr("class","bucketBox").attr("width",2*g).attr("height",2*x).attr("x",-g/2).attr("fill",((e,t)=>n(t/l)));e.transition("liquidLevel").ease(r.guX.period(.6)).delay(((e,t)=>t*(100/h))).duration(1e3).attr("y",(e=>x-e*x)),e.transition("liquidSway").duration(2e3).delay(((e,t)=>10*t)).ease(r.I1g).attrTween("transform",(function(e,t){const n=v?Math.abs(v[t]-e):0;return e=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*e/(.5*n+.5),4*Math.PI))*n*o*(1-e),", ").concat(g/2,", ",0,")")}))}),[m,v,u,d,g,x,h,n]),(0,c.jsx)("div",{className:"bucket-wrapper",children:(0,c.jsx)("svg",{ref:e=>{f.current=r.Ltv(e)}})})}},987:(e,t,n)=>{"use strict";n.d(t,{u:()=>s});var r=n(487),a=n(684);function s(e,t,n,s,c){const o=e.length/n;let l=r.JWi().value((e=>e)).domain(t).thresholds((0,a.kd)(...t,Math.ceil(s/(c/o))))(e),i=(0,a.Q2)(l,n,o),u=[];for(let r=0;r<i.length;r++)for(let t=0;t<i[r];t++)u.push([(l[r].x1+l[r].x0)/2,(t+.5)/o*e.length]);return u}},684:(e,t,n)=>{"use strict";n.d(t,{Q2:()=>o,YW:()=>i,ZC:()=>l,kd:()=>s,wh:()=>c});var r=n(487),a=n(43);function s(e,t,n){return r.y17(n).map((r=>r/(n-1)*(t-e)+e))}function c(e,t){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,s=e*a+e*(1-a)/2,c=e*(1-a)/2,o=[{x:r.GWP(s,e)(n),y:r.GWP(t,0)(n)},{x:s,y:t},{x:c,y:t},{x:r.GWP(c,0)(n),y:r.GWP(t,0)(n)}];return r.n8j().x((function(e){return e.x})).y((function(e){return e.y}))(o)+"z"}function o(e,t,n){let a=e.map((e=>Math.round(e.length/t))),s=r.czq(a);for(;s>n;)a[r.z94(e,((e,n)=>0!==e.length?e.length/t-a[n]:1/0))]-=1,s=r.czq(a);for(;s<n;)a[r.P2Z(e,((e,n)=>0!==e.length?e.length/t-a[n]:-1/0))]+=1,s=r.czq(a);return a}function l(e,t){const n=(0,a.useRef)({value:e,prev:null}),r=n.current.value;return(t?t(e,r):e===r)||(n.current={value:e,prev:r}),n.current.prev}const i=e=>r.dM(r.m4Y([.2,1])(e))},63:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{Vk:()=>o,Zl:()=>l,jx:()=>i,pk:()=>c});var a=n(829),s=e([a]);a=(s.then?(await s)():s)[0];const c=1200,o="scens",l="delivs",i=await async function(){const e=await(await fetch("./all_objectives.json")).json();for(const t of e){for(const e of t[o])e[l]=e[l].map((e=>Math.min(Math.max(0,e),c))).sort(((e,t)=>t-e));t[o]=(0,a.Et)(t[o],(e=>{let{name:t}=e;return t}))}return console.log("DATA: loading objectives data"),(0,a.Et)(e,(e=>{let{obj:t}=e;return t}))}();r()}catch(c){r(c)}}),1)},829:(e,t,n)=>{"use strict";n.a(e,(async(e,r)=>{try{n.d(t,{C5:()=>m,Et:()=>h,XC:()=>p,Yb:()=>S,cv:()=>w,hh:()=>j,nC:()=>b,si:()=>f,xC:()=>v});var a=n(487),s=n(783),c=n.n(s),o=n(43),l=n(63),i=n(684),u=e([l]);function h(e,t){const n=Object.groupBy(e,t);for(const r of Object.keys(n))n[r]=n[r][0];return n}l=(u.then?(await u)():u)[0];const p={draw:function(e,t){e.moveTo(0,-t/2),e.lineTo(t/4,-t/4),e.arc(0,0,t/Math.sqrt(2)/2,-Math.PI/4,5*Math.PI/4),e.lineTo(0,-t/2),e.closePath()}};function f(e){return(3.1304*e**3-4.2384*e**2+3.3471*e+.0298)/2.4}function m(e,t){return function(n){return t.map((function(t){return[t,a.i2o(n,(function(n){return e(t-n)}))]}))}}function v(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function g(e){const t=e/2,n=3*Math.PI/2/20,r=[{x:Math.cos(5*Math.PI/4)*t,y:Math.sin(5*Math.PI/4)*t},{x:0,y:-Math.SQRT2*t}];for(let a=0;a<=20;a++)r.push({x:Math.cos(a*n-Math.PI/4)*t,y:Math.sin(a*n-Math.PI/4)*t});return r}function x(e,t){const n=c().Bounds.create(e),r=n.min.x,s=n.max.x,o=n.min.y,l=n.max.y,i=a.m4Y([r,s]),u=a.m4Y([o,l]),d=[];for(let a=0;a<t;a++)for(;;){const t=i(Math.random()),n=u(Math.random());if(c().Vertices.contains(e,{x:t,y:n})){d.push([t,n]);break}}return d}const y=function(){const e=g(3),t=g(1),n=[];for(let r=0;r<e.length-2;r++)n.push([e[r],e[r+(r<2?1:2)],t[r+(r<2?1:2)],t[r]]);return n}();let k;function j(e,t,n){k=k||x(g(1),n.length);const r=a.czq(n.map((e=>{let{r:t}=e;return(2.5*t)**2*3.14}))),s=Math.floor(2*Math.sqrt(r/3.14)/2),o=k.map((e=>{let[t,n]=e;return[t*s,n*s]})),l=c().Engine,i=c().Bodies,u=c().Composite,d=l.create(),h=o.sort(((e,t)=>t[1]-e[1])),p=n.map(((e,t)=>{let{r:n,id:r}=e;const[a,s]=h[t];return i.circle(a,s,2.5*n,{restitution:0,id:r})})),f=y.map((e=>c().Body.create({position:c().Vertices.centre(e),vertices:e,isStatic:!0}))),m=c().Body.create({isStatic:!0});c().Body.setParts(m,f),c().Body.setCentre(m,{x:0,y:0}),c().Body.scale(m,1.1*s,1.1*s),u.add(d.world,[...p,m]);for(let a=0,c=60;a<.25*c;a++)l.update(d,1e3/c);return p.map((n=>{let{position:r,id:a}=n;return{id:a,x:r.x+e,y:r.y+t+.15*s}}))}function b(e,t){const[n,r]=(0,o.useState)(e);return[(0,o.useMemo)((()=>t(n)),[n]),(0,o.useCallback)((e=>{r(t(e))}),[])]}function w(e,t,n){const r=n[e][l.Vk][t][l.Zl];return a.m4Y().domain((0,i.kd)(0,1,r.length)).range(r.map((e=>Math.min(1,e/1200)||0))).clamp(!0)}function S(e,t,n){return"median"===e?Object.keys(t[n][l.Vk]).sort(((e,r)=>a.i2o(t[n][l.Vk][e][l.Zl])-a.i2o(t[n][l.Vk][r][l.Zl]))):"deliveries"===e?Object.keys(t[n][l.Vk]).sort(((e,r)=>a.T9B(t[n][l.Vk][e][l.Zl])-a.T9B(t[n][l.Vk][r][l.Zl]))):void 0}r()}catch(d){r(d)}}))},139:(e,t)=>{var n;!function(){"use strict";var r={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var n=arguments[t];n&&(e=c(e,s(n)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var n in e)r.call(e,n)&&e[n]&&(t=c(t,n));return t}function c(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(n=function(){return a}.apply(t,[]))||(e.exports=n)}()}}]);
//# sourceMappingURL=988.cc79c83d.chunk.js.map