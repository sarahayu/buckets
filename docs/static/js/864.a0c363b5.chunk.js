"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[864],{3864:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.r(e),n.d(e,{default:()=>x});var a=n(5760),s=n(5043),o=n(5475),c=n(1684),i=n(63),l=n(9985),h=n(579),u=t([i,l]);[i,l]=u.then?(await u)():u;const p=5,f=2,m=8,g=.1,y=2.5;function x(t){let{watercolor:e=!1}=t;const{current:n}=(0,s.useRef)(Object.keys(i.jx)),r=(0,s.useRef)(),[u,d]=(0,s.useState)(f),[x,v]=(0,s.useState)(!1),[M]=(0,o.ok)(),b=(0,s.useRef)(),w=(0,s.useMemo)((()=>(0,l.Yb)("median",i.jx,n[u]).reverse()),[u]),k=(0,s.useMemo)((()=>w.map((t=>{const e=(0,l.cv)(n[u],t,i.jx,i.pk);return(0,c.kd)(0,1,p+1).map(((t,n)=>e(t)))}))),[u]),j=(0,s.useRef)();return(0,s.useLayoutEffect)((()=>{r.current={width:window.innerWidth,height:window.innerHeight};const t=r.current.width,e=r.current.height;j.current=a.zoom().scaleExtent([1,10]).translateExtent([[-t/2,-e/2],[1.5*t,1.5*e]]).on("zoom",(function(t){b.current.select(".svg-trans").attr("transform",t.transform),b.current.selectAll(".text-scale").attr("transform","scale(".concat(1/t.transform.k,")"))})).on("start",(t=>"wheel"!==(t.sourceEvent||{}).type&&b.current.style("cursor","grabbing"))).on("end",(()=>b.current.style("cursor","grab"))),b.current.attr("width",t).attr("height",e).style("cursor","grab").call((t=>t.append("g").attr("class","svg-trans"))).call(j.current),M.get("obj")&&n.includes(M.get("obj"))&&(d(n.indexOf(M.get("obj"))),v("true"==M.get("norm")))}),[]),(0,s.useLayoutEffect)((()=>{const t=r.current.width,e=r.current.height;b.current.call(j.current.transform,a.zoomIdentity);const n=(0,l.hh)(t/2,e/2*1.1,k.map(((t,e)=>({r:(x?1:Math.max(t[0],g))*m*y,id:e})))).map((t=>{let{id:e,x:n,y:r}=t;return{levs:k[e].map(((t,e)=>Math.max(t,0==e?g:0)*m)),maxLev:(x?1:Math.max(k[e][0],g))*m,tilt:50*Math.random()-25,dur:100*Math.random()+400,startX:n,startY:r-4*m*Math.random(),endX:n,endY:r,scen:w[e]}}));b.current.select(".svg-trans").selectAll(".smallDrop").data(n,((t,e)=>e)).join((t=>t.append("g").attr("class","smallDrop").each((function(t,e){let{levs:n}=t;a.select(this.parentNode).append("g").attr("id","drop-".concat(e)).append("g").attr("class","text-scale").append("text").style("font-size",1).attr("text-anchor","middle");const r=a.select(this);r.append("rect").attr("class","bbox").style("visibility","hidden"),r.on("mouseover",(function(){b.current.selectAll(".smallDrop").style("opacity",.5),r.style("opacity",1),b.current.select("#drop-".concat(e)).style("opacity",1)})).on("mouseout",(function(){b.current.selectAll(".smallDrop").style("opacity",1),b.current.select("#drop-".concat(e)).style("opacity",0)}));const s=a.select(this).append("defs").append("linearGradient").attr("id","drop-fill-".concat(e)).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");s.append("stop").attr("stop-color","transparent"),s.append("stop").attr("stop-color","transparent"),n.forEach(((t,e)=>{s.append("stop").attr("stop-color",(0,c.YW)(e/p)),s.append("stop").attr("stop-color",(0,c.YW)(e/p))})),a.select(this).append("path").attr("d",l.js).attr("class","outline").attr("fill","none").attr("stroke","lightgray").attr("stroke-width",.05),a.select(this).append("path").attr("class","fill").attr("d",l.js).attr("fill","url(#drop-fill-".concat(e,")"))})))).attr("transform",(t=>{let{startX:e,startY:n,tilt:r}=t;return"translate(".concat(e,", ").concat(n,") rotate(").concat(r,")")})).style("opacity",0).each((function(t,e){let{levs:n,maxLev:r,scen:s}=t;const o=a.select(this);a.select("#drop-".concat(e)).style("opacity",0).select("text").text(s),o.select(".outline").attr("transform","scale(".concat(.95*r,")")),o.select(".fill").attr("transform","scale(".concat(r,")")),x?o.select(".outline").style("display","initial"):o.select(".outline").style("display","none"),o.selectAll("stop").each((function(t,e){let s=Math.floor(e/2);0===e%2&&(s-=1),-1===s?a.select(this).attr("offset","".concat(0,"%")):a.select(this).attr("offset","".concat(100*(1-n[s]/r),"%"))})),o.transition().duration((t=>{let{dur:e}=t;return e})).ease(a.easeLinear).attr("transform",(t=>{let{endX:e,endY:n,tilt:r}=t;return"translate(".concat(e,", ").concat(n,") rotate(").concat(r,")")})).style("opacity",1).on("end",(()=>{const t=o.select(".fill");o.select(".bbox").attr("x",t.node().getBBox().x).attr("y",t.node().getBBox().y).attr("width",t.node().getBBox().width).attr("height",t.node().getBBox().height),b.current.select("#drop-".concat(e)).attr("transform","translate(".concat(t.node().getBoundingClientRect().x+t.node().getBoundingClientRect().width/2,", ").concat(t.node().getBoundingClientRect().y,")"))}))}))}),[k,x]),(0,h.jsxs)("div",{className:"bubbles-wrapper",children:[(0,h.jsxs)("div",{className:"bubbles-input-area",children:[(0,h.jsx)("select",{value:u,onChange:t=>d(parseInt(t.target.value)),children:n.map(((t,e)=>(0,h.jsx)("option",{name:e,value:e,children:t},e)))}),(0,h.jsx)("input",{type:"checkbox",id:"norm",checked:x,onChange:()=>{v((t=>!t))}}),(0,h.jsx)("label",{htmlFor:"norm",children:"normalize"})]}),(0,h.jsx)("div",{className:"bubbles-svg-wrapper"+(e?"-painter":""),children:(0,h.jsx)("svg",{className:"bubbles-svg"+(e?"-painter":""),ref:t=>{b.current=a.select(t)}})})]})}r()}catch(d){r(d)}}))},3408:(t,e,n)=>{n.d(e,{Qj:()=>l,R1:()=>p,Uy:()=>i,X1:()=>h,fq:()=>c,hM:()=>u});var r=n(5760);const a=40,s=3;let o=0;function c(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.scaleLinear();return function(r){return r.map((r=>({x:-t,y:e-n(r)*e-e/2,width:2*t,height:2*e})))}}function i(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.each((function(t){const e=r.select(this),n=e.attr("cur-level")||0;e.attr("prev-level",n),e.attr("cur-level",t.y)})),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(r.easeQuad).attrTween("transform",(function(t,n){const s=r.select(this),o=parseFloat(s.attr("prev-level")),c=Math.abs(o-t.y)/200*e;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*c+.5),4*Math.PI))*c*a*(1-t),", ",0,", ",0,")")}));return t.transition("liquidLevel").ease(r.easeElasticOut.period(.6)).delay(((e,n)=>n*(100/t.size()))).duration(1e3)}function l(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:h,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return function(c){const i=o++;c.append("defs").attr("class","clip-def").append("clipPath").attr("id","bucket-mask-"+i).append("path").attr("class","bucket-mask-path"),c.append("g").attr("class","graph-area").attr("transform","translate(".concat(t/2,", ").concat(e/2,")")).attr("clip-path","url(#bucket-mask-".concat(i,")")),c.append("path").attr("class","bucket-outline").attr("transform","translate(".concat(t/2,", ").concat(e/2,")")).attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",s).attr("fill","none"),c.call(function(t){let{drawFunc:e,drawOutlineFunc:n=e,width:a,height:s}=t;return function(t){const o=t=>{const e=r.path();return t(e,a,s),e.toString()};t.select(".bucket-mask-path").attr("d",o(e)),t.select(".bucket-outline").attr("d",o(n))}}({drawFunc:n,drawOutlineFunc:a,width:t,height:e}))}}function h(t,e,n){d(t,e,n,!0)}function u(t,e,n){d(t,e,n,!1)}function d(t,e,n,r){const a=.8*e/2,s=-.8*e/2;t.moveTo(e/2,-n/2),t.lineTo(a,n/2),t.lineTo(s,n/2),t.lineTo(-e/2,-n/2),r&&t.closePath()}function p(t,e,n){const r=Math.SQRT2,a=1/(1+1*r),s=Math.min(e/2,n*a),o=s/(1/r),c=s+o;t.moveTo(0,-c/2),t.lineTo(o/2,-c/2+o/2),t.arc(0,-c/2+o,s,-Math.PI/4,5*Math.PI/4),t.closePath()}},1684:(t,e,n)=>{n.d(e,{E3:()=>s,YW:()=>o,kd:()=>i,m8:()=>c,wh:()=>l});var r=n(5760),a=n(3408);function s(t,e,n){let a=t.map((t=>Math.round(t.length/e))),s=r.sum(a);for(;s>n;)a[r.minIndex(t,((t,n)=>0!==t.length?t.length/e-a[n]:1/0))]-=1,s=r.sum(a);for(;s<n;)a[r.maxIndex(t,((t,n)=>0!==t.length?t.length/e-a[n]:-1/0))]+=1,s=r.sum(a);return a}const o=t=>r.interpolateBlues(r.scaleLinear([.2,1])(t));function c(t){return t-=.0088,Math.min(1,Math.max(0,(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.2326))}function i(t,e,n){return r.range(n).map((r=>r/(n-1)*(e-t)+t))}function l(t,e){return(n=>{const a=r.path();return n(a,t,e),a.toString()})(a.X1)}},63:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{Vk:()=>c,Xe:()=>d,Zl:()=>i,iL:()=>u,jx:()=>h,pk:()=>o,sQ:()=>l});var a=n(9985),s=t([a]);a=(s.then?(await s)():s)[0];const o=1200,c="scens",i="delivs",l="delivs_unord",h=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const e of t){e[c]=e[c];for(const t of e[c]){const e=t[i].map((t=>Math.min(Math.max(0,t),o)));t[l]=e,t[i]=Array.from(e).sort(((t,e)=>e-t))}e[c]=(0,a.Et)(e[c],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(t=>{let{obj:e}=t;return e}))}(),u=Object.keys(h),d=Object.keys(Object.values(h)[0][c]);r()}catch(o){r(o)}}),1)},9985:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{C5:()=>C,Et:()=>p,Ft:()=>W,Ng:()=>B,Ul:()=>q,XC:()=>f,Yb:()=>A,bp:()=>S,cv:()=>Q,hh:()=>z,i7:()=>D,iJ:()=>_,js:()=>m,nC:()=>V,si:()=>g,u:()=>G,xC:()=>P});var a=n(3981),s=n(5760),o=n(3783),c=n.n(o),i=n(5043),l=n(63),h=n(1684),u=t([l]);function p(t,e){const n=Object.groupBy(t,e);for(const r of Object.keys(n))n[r]=n[r][0];return n}l=(u.then?(await u)():u)[0];const f={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}},m="M0,-1L0.5,-0.5A0.707,0.707,0,1,1,-0.5,-0.5L0,-1Z";function g(t){return t-=.0088,Math.min(1,Math.max(0,(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.2326))}const y=Math.SQRT1_2,x=1,v=y+y,M=x+y,b=.75;function w(t){if(t>=b){return Math.SQRT1_2*(1-t)/(1-b)}const e=2*(1-t/(v/M))-1,n=Math.acos(e);return Math.sin(n)}function k(t){return(t-y/M)*(1+Math.SQRT2)}function j(t){return t/(1+Math.SQRT2)+y/M}function S(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const r=n/2/x*y,a=.1,s=[],o=[];let c,i,l,h;for(let m=1;m<=Math.ceil(10)&&(c=w(t+(m-1)*a),i=k(t+(m-1)*a),l=w(t+m*a),h=k(t+m*a),!(j(h)>=e));m++){const t=[-c*r,-i*r],e=[c*r,-i*r],n=[l*r,-h*r],a=[-l*r,-h*r];s.push(e,n),o.push(t,a)}l=w(e),h=k(e);const u=[-c*r,-i*r],d=[c*r,-i*r],p=[l*r,-h*r],f=[-l*r,-h*r];return s.push(d,p),o.push(u,f),s.push(...o.reverse()),s}function B(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const r=n/2/x*y,a=.1,s=[];let o,c,i,l;for(let f=1;f<=Math.ceil(10)&&(o=w(t+(f-1)*a),c=k(t+(f-1)*a),i=w(t+f*a),l=k(t+f*a),!(j(l)>=e));f++){const t=[-o*r,-c*r],e=[o*r,-c*r],n=[i*r,-l*r],a=[-i*r,-l*r];s.push([t,e,n]),s.push([t,n,a])}i=w(e),l=k(e);const h=[-o*r,-c*r],u=[o*r,-c*r],d=[i*r,-l*r],p=[-i*r,-l*r];return s.push([h,u,d]),s.push([h,d,p]),s}function C(t,e){return function(n){return e.map((function(e){return[e,s.mean(n,(function(n){return t(e-n)}))]}))}}function P(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function T(t){const e=t/2,n=3*Math.PI/2/16,r=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let a=0;a<=16;a++)r.push({x:Math.cos(a*n-Math.PI/4)*e,y:Math.sin(a*n-Math.PI/4)*e});return r}function I(t,e){const n=c().Bounds.create(t),r=n.min.x,a=n.max.x,o=n.min.y,i=n.max.y,l=s.scaleLinear([r,a]),h=s.scaleLinear([o,i]),u=[];for(let s=0;s<e;s++)for(;;){const e=l(Math.random()),n=h(Math.random());if(c().Vertices.contains(t,{x:e,y:n})){u.push([e,n]);break}}return u}const F=function(){const t=T(3),e=T(1),n=[];for(let r=0;r<t.length-2;r++)n.push([t[r],t[r+(r<2?1:2)],e[r+(r<2?1:2)],e[r]]);return n}();let R,E,O,Z;function L(t){const e=s.sum(t.map((t=>t**2*3.14)));return Math.floor(2*Math.sqrt(e/3.14)/2)}function z(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r&&O&&n.length===Z)return O;R&&n.length===E||(R=s.range(4).map((()=>I(T(1),E=n.length))));const a=L(n.map((t=>{let{r:e}=t;return e}))),o=R[Math.floor(Math.random()*R.length)].map((t=>{let[e,n]=t;return[e*a,n*a]})),i=c().Engine,l=c().Bodies,h=c().Composite,u=i.create(),d=o.sort(((t,e)=>e[1]-t[1])),p=n.map(((t,e)=>{let{r:n,id:r}=t;const[a,s]=d[e];return l.circle(a,s,n,{restitution:0,id:r})})),f=F.map((t=>c().Body.create({position:c().Vertices.centre(t),vertices:t,isStatic:!0}))),m=c().Body.create({isStatic:!0});c().Body.setParts(m,f),c().Body.setCentre(m,{x:0,y:0}),c().Body.scale(m,a,a),h.add(u.world,[...p,m]);for(let s=0,c=60,y=.1;s<c*y;s++)i.update(u,1e3/c);const g=p.map((n=>{let{position:r,id:a}=n;return{id:a,x:r.x+t,y:r.y+e}}));return g.height=a/2/y*M,!r||O&&g.length===Z||(O=g,Z=g.length),g}function V(t,e){const[n,r]=(0,i.useState)(t);return[(0,i.useMemo)((()=>e(n)),[n]),(0,i.useCallback)((t=>{r(e(t))}),[])]}function Q(t,e,n,r){const a=n[t][l.Vk][e][l.Zl];return s.scaleLinear().domain((0,h.kd)(0,1,a.length)).range(a.map((t=>Math.min(1,t/r)))).clamp(!0)}function A(t,e,n){return"median"===t?Object.keys(e[n][l.Vk]).sort(((t,r)=>s.mean(e[n][l.Vk][t][l.Zl])-s.mean(e[n][l.Vk][r][l.Zl]))):"deliveries"===t?Object.keys(e[n][l.Vk]).sort(((t,r)=>s.max(e[n][l.Vk][t][l.Zl])-s.max(e[n][l.Vk][r][l.Zl]))):"alphabetical"===t?Object.keys(e[n][l.Vk]).sort():void 0}function Y(t,e,n){var r;const a=e.split(".");for(let s of a){if(!t)return n;t=t[s]}return null!==(r=t)&&void 0!==r?r:n}function X(t){return"string"===typeof t?e=>Y(e,t):t}function q(t,e){return e=X(e),t.sort(((t,n)=>{const r=e(t),a=e(n);return r<a?-1:r>a?1:0}))}function N(t){return t*Math.PI/180}class D{constructor(t){let{fov:e,near:n,far:r,width:o,height:c,domElement:i,zoomFn:l}=t;this.raycaster=new a.tBo,this.fov=e,this.near=n,this.far=r,this.width=o,this.height=c,this.camera=new a.ubm(e,o/c,n,r+1),this.camera.position.set(0,0,this.far),this.zoom=s.zoom().scaleExtent([this.getScaleFromZ(this.far),this.getScaleFromZ(this.near)]).on("zoom",(t=>{this.d3ZoomHandler(t),this.curTransform=t.transform,l&&l(t)})),this.view=s.select(i),this.view.call(this.zoom),this.zoom.transform(this.view,s.zoomIdentity.translate(this.width/2,this.height/2).scale(this.getScaleFromZ(this.far)))}d3ZoomHandler(t){const e=t.transform.k,n=-(t.transform.x-this.width/2)/e,r=(t.transform.y-this.height/2)/e,a=this.getZFromScale(e);this.camera.position.set(n,r,a)}getScaleFromZ(t){const e=N(this.fov/2),n=2*(Math.tan(e)*t);return this.height/n}getZFromScale(t){const e=N(this.fov/2);return this.height/t/(2*Math.tan(e))}intersectObject(t,e,n){return this.raycaster.setFromCamera({x:t,y:e},this.camera),this.raycaster.intersectObject(n)}}class G{constructor(){this.threeGeom=new a.V23,this.idx=0}addMeshCoords(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const s=[];for(let o=0;o<t.length;o++){const[c,i,l]=t[o],h=new a.Pq0(e.x+c[0],e.y-c[1],r),u=new a.Pq0(e.x+i[0],e.y-i[1],r),d=new a.Pq0(e.x+l[0],e.y-l[1],r);this.threeGeom.vertices.push(h,u,d);const p=new a.nFj(3*this.idx+0,3*this.idx+1,3*this.idx+2);n&&(p.vertexColors.push(n),p.vertexColors.push(n),p.vertexColors.push(n)),this.threeGeom.faces.push(p),s.push(this.idx++)}return s}}function W(t,e,n,r){return{x:t/n*2-1,y:-e/r*2+1}}function _(t){const[e,n]=(0,i.useState)(t),r=(0,i.useRef)(t);(0,i.useEffect)((()=>{r.current=e}),[e]);const a=(0,i.useCallback)((t=>{n(r.current=t)}),[]);return[e,a,r]}r()}catch(d){r(d)}}))}}]);
//# sourceMappingURL=864.a0c363b5.chunk.js.map