{"version":3,"file":"static/js/866.a8632725.chunk.js","mappings":"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","sources":["ExplanationAnim2VertApp.jsx","data/exampleObjectivesData.jsx","utils/explanation-anim-2/constants.jsx","utils/explanation-anim-2/data-story-anims.jsx","utils/explanation-anim-2/useDataStory.jsx","utils/explanation-anim-2/useDataStoryVars.jsx","utils/explanation-anim-vert/DotHistogram.jsx"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport React, { forwardRef } from \"react\";\r\nimport { Scrollama, Step } from \"react-scrollama\";\r\n\r\nimport BucketGlyph from \"./bucket-lib/BucketGlyph\";\r\n\r\nimport DotHistogram from \"./utils/explanation-anim-vert/DotHistogram\";\r\nimport WaterdropGlyph from \"./utils/explanation-anim/WaterdropGlyph\";\r\n\r\nimport { constants } from \"./utils/explanation-anim-2/constants\";\r\nimport { useDataStory } from \"./utils/explanation-anim-2/useDataStory\";\r\n\r\nexport default function ExplanationAnim2App() {\r\n  const { slides, storyVars } = useDataStory(constants.DEFAULT_OBJECTIVE);\r\n\r\n  return (\r\n    <div className=\"tutorial-view\">\r\n      <div className=\"scrollama scrollama-1\">\r\n        <DataStoryGraphics storyVars={storyVars} />\r\n        <DataStoryTexts slides={slides} />\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryGraphics({ storyVars }) {\r\n  return (\r\n    <div className=\"tut-panel-wrapper\">\r\n      {d3.range(4).map((i) => (\r\n        <VariationPanels\r\n          key={i}\r\n          label={constants.VARIATIONS[i].scen_str}\r\n          bucketInterper={storyVars.curBucketInterpers[i]}\r\n          dropInterper={storyVars.curDropInterpers[i]}\r\n          histData={storyVars.variationDelivsUnord[i]}\r\n        />\r\n      ))}\r\n    </div>\r\n  );\r\n}\r\n\r\nfunction DataStoryTexts({ slides }) {\r\n  return (\r\n    <DataStoryScrollama\r\n      cleanupFn={() => {\r\n        for (let i = slides.length - 1; i >= 0; i--) {\r\n          slides[i].animHandler?.undo();\r\n        }\r\n      }}\r\n    >\r\n      {slides.map((slide, i) => (\r\n        <Step key={i} data={slide}>\r\n          <Slide slide={slide} />\r\n        </Step>\r\n      ))}\r\n    </DataStoryScrollama>\r\n  );\r\n}\r\n\r\nfunction DataStoryScrollama({ cleanupFn, children }) {\r\n  const onStepEnter = async ({ data, direction }) => {\r\n    if (direction === \"up\") return;\r\n    data.animHandler?.do();\r\n  };\r\n\r\n  const onStepExit = async ({ data, direction }) => {\r\n    if (direction === \"down\") return;\r\n    data.animHandler?.undo();\r\n  };\r\n  return (\r\n    <Scrollama offset={0.9} onStepEnter={onStepEnter} onStepExit={onStepExit}>\r\n      {children}\r\n      <Step key={\"last\"} data={{}}>\r\n        <ReturnToTop cleanupFn={cleanupFn} />\r\n      </Step>\r\n    </Scrollama>\r\n  );\r\n}\r\n\r\nfunction VariationPanels({ label, bucketInterper, dropInterper, histData }) {\r\n  return (\r\n    <div className=\"tut-panel\">\r\n      <div className=\"tut-graph-wrapper\">\r\n        <div className=\"tut-graph\">\r\n          <svg id=\"bar-graph\"></svg>\r\n          <BucketGlyph\r\n            levelInterp={bucketInterper}\r\n            width={300}\r\n            height={constants.BAR_CHART_HEIGHT}\r\n            colorInterp={constants.INTERP_COLOR}\r\n          />\r\n          <p className=\"fancy-font objective-label\">{label}</p>\r\n        </div>\r\n      </div>\r\n\r\n      <div className=\"tut-drop-graphics-wrapper\">\r\n        <div className=\"main-waterdrop\">\r\n          <WaterdropGlyph\r\n            levelInterp={dropInterper}\r\n            width={400}\r\n            height={constants.BAR_CHART_HEIGHT}\r\n            colorInterp={constants.INTERP_COLOR}\r\n          />\r\n        </div>\r\n        <div className=\"main-histogram example-drops-hg\">\r\n          <DotHistogram\r\n            width={267}\r\n            height={400}\r\n            data={histData}\r\n            domain={[0, 1200]}\r\n          />\r\n        </div>\r\n        <p className=\"fancy-font objective-label\">{label}</p>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n\r\nconst Slide = forwardRef(function Slide({ slide }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\">\r\n      {slide.text}\r\n    </div>\r\n  );\r\n});\r\n\r\nconst ReturnToTop = forwardRef(function ReturnToTop({ cleanupFn }, ref) {\r\n  return (\r\n    <div ref={ref} className=\"tut-text-card\" style={{ marginBottom: \"40vh\" }}>\r\n      <button\r\n        onClick={() => {\r\n          window.scrollTo(0, 0);\r\n          cleanupFn();\r\n        }}\r\n      >\r\n        Back to Top\r\n      </button>\r\n    </div>\r\n  );\r\n});\r\n","import * as d3 from \"d3\";\r\nimport { mapBy } from \"../utils/utils\";\r\n\r\nexport const MAX_DELIVS = 1200;\r\nexport const SCENARIO_KEY_STRING = \"scens\";\r\nexport const DELIV_KEY_STRING = \"delivs\";\r\nexport const DELIV_KEY_STRING_UNORD = \"delivs_unord\";\r\n\r\nexport const objectivesData = await (async function () {\r\n  const numYears = 50;\r\n\r\n  const objs = [\r\n    {\r\n      obj: \"exampleObj\",\r\n      scens: [\r\n        {\r\n          name: \"always_100_perc\",\r\n          delivs: d3.range(numYears).map(() => MAX_DELIVS),\r\n        },\r\n        {\r\n          name: \"always_0_perc\",\r\n          delivs: d3.range(numYears).map(() => 0),\r\n        },\r\n        {\r\n          name: \"always_50_perc\",\r\n          delivs: d3.range(numYears).map(() => MAX_DELIVS / 2),\r\n        },\r\n        {\r\n          name: \"uniform_50_perc\",\r\n          delivs: d3.range(numYears).map((_, i) => (i / numYears) * MAX_DELIVS),\r\n        },\r\n      ],\r\n    },\r\n  ];\r\n\r\n  for (const obj of objs) {\r\n    for (const scen of obj[SCENARIO_KEY_STRING]) {\r\n      scen[DELIV_KEY_STRING_UNORD] = Array.from(scen[DELIV_KEY_STRING]);\r\n      scen[DELIV_KEY_STRING] = Array.from(scen[DELIV_KEY_STRING]).sort(\r\n        (a, b) => b - a\r\n      );\r\n    }\r\n    obj[SCENARIO_KEY_STRING] = mapBy(\r\n      obj[SCENARIO_KEY_STRING],\r\n      ({ name }) => name\r\n    );\r\n  }\r\n\r\n  console.log(\"DATA: loading example objectives data\");\r\n\r\n  return mapBy(objs, ({ obj }) => obj);\r\n})();\r\n\r\nexport const objectiveIDs = Object.keys(objectivesData);\r\nexport const scenarioIDs = Object.keys(\r\n  Object.values(objectivesData)[0][SCENARIO_KEY_STRING]\r\n);\r\n","import * as d3 from \"d3\";\r\n\r\nimport { interpolateWatercolorBlue } from \"../../bucket-lib/utils\";\r\n\r\nfunction initConstants() {\r\n  const BAR_CHART_WIDTH = 500,\r\n    BAR_CHART_HEIGHT = 400;\r\n\r\n  const INTERP_COLOR = interpolateWatercolorBlue;\r\n\r\n  const DEFAULT_OBJECTIVE = \"exampleObj\";\r\n\r\n  const VARIATIONS = [\r\n    {\r\n      scen_str: \"always_100_perc\",\r\n    },\r\n    {\r\n      scen_str: \"always_0_perc\",\r\n    },\r\n    {\r\n      scen_str: \"always_50_perc\",\r\n    },\r\n    {\r\n      scen_str: \"uniform_50_perc\",\r\n    },\r\n  ];\r\n\r\n  const EMPTY_INTERPER = d3.scaleLinear().range([0, 0]);\r\n  const EMPTY_INTERPERS = VARIATIONS.map(() => EMPTY_INTERPER);\r\n\r\n  return {\r\n    BAR_CHART_WIDTH,\r\n    BAR_CHART_HEIGHT,\r\n    INTERP_COLOR,\r\n    DEFAULT_OBJECTIVE,\r\n    VARIATIONS,\r\n    EMPTY_INTERPERS,\r\n  };\r\n}\r\n\r\nexport const constants = initConstants();\r\n","import * as d3 from \"d3\";\r\n\r\nimport { constants } from \"./constants\";\r\nimport { hideElems, showElems } from \"../explanation-anim/render-utils\";\r\n\r\nfunction initAllAnims() {\r\n  function prepareDOM() {\r\n    hideElems(\".bucket-wrapper, .main-histogram, .tut-drop-graphics-wrapper\");\r\n  }\r\n\r\n  function initChartAnimGroup({ deps }) {\r\n    let _XInterp;\r\n    let _XAxis;\r\n    let _dataDescendings;\r\n    let _maxDelivs;\r\n\r\n    const BAR_CHART_MARGIN = { top: 40, right: 30, bottom: 40, left: 60 };\r\n\r\n    function prepareSVG() {\r\n      {\r\n        d3.selectAll(\"#bar-graph > *\").remove();\r\n\r\n        const svgGroup = d3\r\n          .selectAll(\"#bar-graph\")\r\n          .attr(\r\n            \"width\",\r\n            constants.BAR_CHART_WIDTH +\r\n              BAR_CHART_MARGIN.left +\r\n              BAR_CHART_MARGIN.right\r\n          )\r\n          .attr(\r\n            \"height\",\r\n            constants.BAR_CHART_HEIGHT +\r\n              BAR_CHART_MARGIN.top +\r\n              BAR_CHART_MARGIN.bottom\r\n          )\r\n          .attr(\"opacity\", 1)\r\n          .append(\"g\")\r\n          .attr(\"class\", \"svg-group\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        const allDelivs = deps.variationDelivsUnord;\r\n\r\n        _maxDelivs = d3.max(allDelivs[0]);\r\n\r\n        const dataDescendings = allDelivs.map((delivs) =>\r\n          delivs\r\n            .map((val, placeFromLeft) => ({\r\n              val,\r\n              placeFromLeft,\r\n              year: placeFromLeft + 1,\r\n            }))\r\n            .sort((a, b) => b.val - a.val)\r\n        );\r\n\r\n        const x = d3\r\n          .scaleBand()\r\n          .domain(\r\n            dataDescendings[0].map(({ year }) => year).sort((a, b) => a - b)\r\n          )\r\n          .range([0, constants.BAR_CHART_WIDTH])\r\n          .padding(0.4);\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        const xaxis = d3\r\n          .axisBottom(x)\r\n          .tickSize(0)\r\n          .tickFormat((d) => `year ${d}`)\r\n          .tickValues(\r\n            x.domain().filter((_, i) => i === 0 || (i + 1) % 10 === 0)\r\n          );\r\n\r\n        svgGroup.append(\"g\").attr(\"class\", \"anim-xaxis\");\r\n        svgGroup.append(\"g\").attr(\"class\", \"axis-y\");\r\n        svgGroup\r\n          .selectAll(\".anim-xaxis\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .call(xaxis)\r\n          .selectAll(\"text\")\r\n          .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\r\n          .style(\"text-anchor\", \"end\");\r\n        svgGroup\r\n          .selectAll(\".axis-y\")\r\n          .call(d3.axisLeft(y).tickFormat(d3.format(\".2s\")))\r\n          .append(\"text\")\r\n          .text(\"Deliveries (TAF)\")\r\n          .attr(\"fill\", \"black\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(-50, ${constants.BAR_CHART_HEIGHT / 2}) rotate(-90)`\r\n          );\r\n\r\n        _XInterp = x;\r\n        _XAxis = xaxis;\r\n        _dataDescendings = dataDescendings;\r\n      }\r\n    }\r\n\r\n    function barsAppearDo() {\r\n      {\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        d3.selectAll(\"#bar-graph .svg-group\").each(function (_, i) {\r\n          const s = d3.select(this);\r\n\r\n          s.selectAll(\".bars\")\r\n            .data(_dataDescendings[i], (d) => d.placeFromLeft)\r\n            .join(\"rect\")\r\n            .attr(\"class\", \"bars\")\r\n            .attr(\"x\", (d) => _XInterp(d.year))\r\n            .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n            .attr(\"width\", _XInterp.bandwidth())\r\n            .attr(\"height\", 0)\r\n            .attr(\"opacity\", 1)\r\n            .attr(\"fill\", \"steelblue\")\r\n            .transition()\r\n            .duration(500)\r\n            .delay((d) => d.placeFromLeft * 10)\r\n            .attr(\"y\", (d) => y(d.val))\r\n            .attr(\"height\", (d) => constants.BAR_CHART_HEIGHT - y(d.val));\r\n        });\r\n      }\r\n    }\r\n\r\n    function barsAppearUndo() {\r\n      {\r\n        d3.selectAll(\"#bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          // .data(_dataDescendings, (d) => d.placeFromLeft)\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => (_dataDescendings[0].length - d.placeFromLeft - 1) * 10)\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"height\", 0);\r\n      }\r\n    }\r\n\r\n    async function barsCondenseDo() {\r\n      {\r\n        const newWidth = constants.BAR_CHART_WIDTH / 8;\r\n        const svgGroup = d3.selectAll(\"#bar-graph .svg-group\");\r\n\r\n        svgGroup.selectAll(\".anim-xaxis\").call(_XAxis.tickFormat(\"\"));\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        bars\r\n          .style(\"mix-blend-mode\", \"multiply\")\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 0.05)\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 +\r\n              (1 - (1 - d.placeFromLeft / _dataDescendings[0].length) ** 4) *\r\n                1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"width\", newWidth)\r\n          .attr(\"x\", constants.BAR_CHART_WIDTH / 2 - newWidth / 2)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            svgGroup\r\n              .selectAll(\".anim-xaxis\")\r\n              .transition()\r\n              .transition(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(0, ${constants.BAR_CHART_HEIGHT + 50})`\r\n              )\r\n              .attr(\"opacity\", 0);\r\n\r\n            bars.transition().delay(500).attr(\"x\", 0);\r\n\r\n            svgGroup\r\n              .transition()\r\n              .delay(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(${\r\n                  BAR_CHART_MARGIN.left +\r\n                  constants.BAR_CHART_WIDTH / 2 -\r\n                  newWidth / 2\r\n                },${BAR_CHART_MARGIN.top})`\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n    function barsCondenseUndo() {\r\n      {\r\n        const svgGroup = d3.selectAll(\"#bar-graph .svg-group\");\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        svgGroup\r\n          .selectAll(\".anim-xaxis\")\r\n          .transition()\r\n          .transition(500)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        svgGroup\r\n          .selectAll(\".anim-xaxis\")\r\n          .call(_XAxis.tickFormat((d) => `year ${d}`));\r\n\r\n        svgGroup\r\n          .transition()\r\n          .delay(500)\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        bars\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 +\r\n              (1 - (d.placeFromLeft / _dataDescendings[0].length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 1)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            bars.style(\"mix-blend-mode\", \"normal\");\r\n          });\r\n      }\r\n    }\r\n\r\n    prepareSVG();\r\n\r\n    return {\r\n      barsAppear: {\r\n        do: barsAppearDo,\r\n        undo: barsAppearUndo,\r\n      },\r\n      barsCondense: {\r\n        do: barsCondenseDo,\r\n        undo: barsCondenseUndo,\r\n      },\r\n    };\r\n  }\r\n\r\n  function initBucketsFillAnim({ deps }) {\r\n    function animDo() {\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"initial\"\r\n      );\r\n      d3.selectAll(\"#bar-graph\").attr(\"opacity\", 0);\r\n\r\n      deps.setCurBucketInterpers(deps.variationBucketInterpers);\r\n    }\r\n\r\n    function animUndo() {\r\n      deps.setCurBucketInterpers(() => constants.EMPTY_INTERPERS);\r\n\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"none\"\r\n      );\r\n      d3.selectAll(\"#bar-graph\").transition().attr(\"opacity\", 1);\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initDropFillAnim({ deps }) {\r\n    function animDo() {\r\n      showElems(\".main-waterdrop\");\r\n      showElems(\".tut-drop-graphics-wrapper\", d3, \"grid\");\r\n      hideElems(\".tut-graph-wrapper, .bucket-wrapper\");\r\n\r\n      deps.setCurDropInterpers(deps.variationDropInterpers);\r\n    }\r\n\r\n    function animUndo() {\r\n      hideElems(\".tut-drop-graphics-wrapper, .main-waterdrop\");\r\n      showElems(\".bucket-wrapper\");\r\n      showElems(\".tut-graph-wrapper\", d3, \"flex\");\r\n      deps.setCurDropInterpers(() => constants.EMPTY_INTERPERS);\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initShowVariationsAnim({ deps }) {\r\n    return {\r\n      do: function () {\r\n        // quantiles\r\n\r\n        d3.selectAll(\".var-scen-label\").style(\"opacity\", \"1\");\r\n\r\n        d3.selectAll(\".main-waterdrop\")\r\n          .transition()\r\n          .style(\"transform\", \"translateX(-200px)\");\r\n\r\n        d3.selectAll(\".main-histogram\").style(\"display\", \"initial\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n      },\r\n      undo: function () {\r\n        // quantiles\r\n        d3.selectAll(\".main-waterdrop\").transition().style(\"transform\", \"none\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.selectAll(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"none\");\r\n\r\n        d3.selectAll(\".main-histogram\").style(\"display\", \"none\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n      },\r\n    };\r\n  }\r\n\r\n  return {\r\n    prepareDOM,\r\n    initChartAnimGroup,\r\n    initBucketsFillAnim,\r\n    initDropFillAnim,\r\n    initShowVariationsAnim,\r\n  };\r\n}\r\n\r\nexport const animations = initAllAnims();\r\n","import { useEffect, useState } from \"react\";\r\nimport { animations as anims } from \"./data-story-anims\";\r\nimport useDataStoryVars from \"./useDataStoryVars\";\r\n\r\nexport function useDataStory(objective) {\r\n  /*\r\n    slides = [\r\n        name: string,\r\n        animHandler: {\r\n            do: someFunctionToDoAnimation,\r\n            undo: someFunctionToReverseAnimation,\r\n        }\r\n    ]\r\n     */\r\n  const [slides, setSlides] = useState([]);\r\n  const storyVars = useDataStoryVars(objective);\r\n\r\n  useEffect(\r\n    function hookAnimations() {\r\n      const context = { deps: storyVars, objective };\r\n\r\n      anims.prepareDOM();\r\n\r\n      const chartAnimGroup = anims.initChartAnimGroup(context);\r\n      const bucketsFillAnim = anims.initBucketsFillAnim(context);\r\n      const dropFillAnim = anims.initDropFillAnim(context);\r\n      const showVariationsAnim = anims.initShowVariationsAnim(context);\r\n\r\n      const _slides = [\r\n        {\r\n          name: \"barsAppear\",\r\n          animHandler: chartAnimGroup.barsAppear,\r\n          text: \"Bar Graph\",\r\n        },\r\n        {\r\n          name: \"barsCondense\",\r\n          animHandler: chartAnimGroup.barsCondense,\r\n          text: \"Gradient\",\r\n        },\r\n        {\r\n          name: \"bucketsFill\",\r\n          animHandler: bucketsFillAnim,\r\n          text: \"Bucket\",\r\n        },\r\n        {\r\n          name: \"forNowLetsFocus\",\r\n          animHandler: dropFillAnim,\r\n          text: \"Waterdrop\",\r\n        },\r\n        {\r\n          name: \"ifChangeReality\",\r\n          animHandler: showVariationsAnim,\r\n          text: \"Different Scenarios\",\r\n        },\r\n      ];\r\n\r\n      setSlides(_slides);\r\n    },\r\n    [storyVars.variationDelivsUnord]\r\n  );\r\n\r\n  return { slides, storyVars };\r\n}\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  DELIV_KEY_STRING_UNORD,\r\n  MAX_DELIVS,\r\n  SCENARIO_KEY_STRING,\r\n  objectivesData,\r\n} from \"../../data/exampleObjectivesData\";\r\nimport { constants } from \"./constants\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nexport default function useDataStoryVars(objective) {\r\n  const [curDropInterpers, setCurDropInterpers] = useState(\r\n    () => constants.EMPTY_INTERPERS\r\n  );\r\n\r\n  const [curBucketInterpers, setCurBucketInterpers] = useState(\r\n    () => constants.EMPTY_INTERPERS\r\n  );\r\n\r\n  const [variationDelivsUnord, setVariationDelivsUnord] = useState(() =>\r\n    constants.VARIATIONS.map(() => [])\r\n  );\r\n  const [variationBucketInterpers, setVariationBucketInterpers] = useState(\r\n    () => constants.EMPTY_INTERPERS\r\n  );\r\n  const [variationDropInterpers, setVariationDropInterpers] = useState(\r\n    () => constants.EMPTY_INTERPERS\r\n  );\r\n\r\n  useEffect(\r\n    function onObjectiveChange() {\r\n      setCurBucketInterpers(() => constants.EMPTY_INTERPERS);\r\n      setCurDropInterpers(() => constants.EMPTY_INTERPERS);\r\n\r\n      const baselineMaxDelivs = MAX_DELIVS;\r\n\r\n      const varDelivsArrUnord = constants.VARIATIONS.map(\r\n        ({ scen_str }) =>\r\n          objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n            DELIV_KEY_STRING_UNORD\r\n          ]\r\n      );\r\n\r\n      const varDelivsArr = constants.VARIATIONS.map(\r\n        ({ scen_str }) =>\r\n          objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n            DELIV_KEY_STRING\r\n          ]\r\n      );\r\n\r\n      const objVarBucketInterps = varDelivsArr.map(\r\n        (varDelivs) => (val) =>\r\n          d3\r\n            .scaleLinear()\r\n            .domain(ticksExact(0, 1, varDelivs.length))\r\n            .range(\r\n              varDelivs\r\n                .map((v) => v / baselineMaxDelivs)\r\n                .sort((a, b) => a - b)\r\n                .reverse()\r\n            )\r\n            .clamp(true)(val)\r\n      );\r\n\r\n      const objVarDropInterps = varDelivsArr.map(\r\n        (varDelivs) => (val) =>\r\n          percentToRatioFilled(\r\n            d3\r\n              .scaleLinear()\r\n              .domain(ticksExact(0, 1, varDelivs.length))\r\n              .range(\r\n                varDelivs\r\n                  .map((v) => v / baselineMaxDelivs)\r\n                  .sort((a, b) => a - b)\r\n                  .reverse()\r\n              )\r\n              .clamp(true)(val)\r\n          )\r\n      );\r\n\r\n      setVariationDelivsUnord(() => varDelivsArrUnord);\r\n      setVariationBucketInterpers(() => objVarBucketInterps);\r\n      setVariationDropInterpers(() => objVarDropInterps);\r\n    },\r\n    [objective]\r\n  );\r\n\r\n  return {\r\n    curDropInterpers,\r\n    setCurDropInterpers,\r\n    curBucketInterpers,\r\n    setCurBucketInterpers,\r\n    variationDelivsUnord,\r\n    variationBucketInterpers,\r\n    variationDropInterpers,\r\n  };\r\n}\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useMemo, useRef } from \"react\";\r\nimport { getQuantileBins } from \"../../bucket-lib/quantile-histogram\";\r\n\r\nconst NUM_CIRCLES = 20;\r\nconst MARGIN = { top: 10, right: 10, bottom: 10, left: 60 };\r\n\r\nconst WATERDROP_ICON = {\r\n  draw: function (context, size) {\r\n    context.moveTo(0, -size / 2);\r\n    context.lineTo(size / 4, -size / 4);\r\n\r\n    context.arc(0, 0, size / Math.SQRT2 / 2, -Math.PI / 4, (Math.PI * 5) / 4);\r\n    context.lineTo(0, -size / 2);\r\n    context.closePath();\r\n  },\r\n};\r\n\r\nexport default function DotHistogram({\r\n  data,\r\n  domain = [0, d3.max(data)],\r\n  width = 600,\r\n  height = 400,\r\n}) {\r\n  const svgSelector = useRef();\r\n  const circles = useMemo(\r\n    () =>\r\n      getQuantileBins(data, domain, data.length / NUM_CIRCLES, height, width),\r\n    [data, domain]\r\n  );\r\n\r\n  const dataRange = [0, data.length];\r\n  const x = d3.scaleLinear().domain(dataRange).range([0, width]);\r\n  const y = d3.scaleLinear().domain(domain).range([height, 0]);\r\n\r\n  useEffect(() => {\r\n    svgSelector.current.selectAll(\"*\").remove();\r\n    const svgContainer = svgSelector.current\r\n      .attr(\"width\", width + MARGIN.left + MARGIN.right)\r\n      .attr(\"height\", height + MARGIN.top + MARGIN.bottom)\r\n      .style(\"pointer-events\", \"none\")\r\n      .append(\"g\")\r\n      .attr(\"class\", \"graph-area\")\r\n      .attr(\"transform\", `translate(${MARGIN.left},${MARGIN.top})`);\r\n\r\n    svgContainer\r\n      .append(\"g\")\r\n      .call(d3.axisLeft().scale(y).tickFormat(d3.format(\".2s\")))\r\n      .call((s) => {\r\n        s.selectAll(\"line\").attr(\"stroke\", \"gray\");\r\n        s.selectAll(\"path\").attr(\"stroke\", \"gray\");\r\n        s.selectAll(\"text\").attr(\"fill\", \"gray\");\r\n      })\r\n      .append(\"text\")\r\n      .attr(\"fill\", \"black\")\r\n      .attr(\"font-size\", \"2em\")\r\n      .attr(\r\n        \"transform\",\r\n        `translate(${-(MARGIN.left - 5)}, ${height / 2}) rotate(-90)`\r\n      )\r\n      .attr(\"text-anchor\", \"middle\")\r\n      .attr(\"dominant-baseline\", \"hanging\")\r\n      .text(\"Deliveries (TAF)\");\r\n  }, [data, domain]);\r\n\r\n  useEffect(() => {\r\n    const svgCircles = svgSelector.current\r\n      .select(\".graph-area\")\r\n      .selectAll(\".icons\")\r\n      .data(circles)\r\n      .join((enter) => enter.append(\"g\").call((s) => s.append(\"path\")))\r\n      .attr(\"class\", \"icons\")\r\n      .call((s) => {\r\n        s.selectAll(\"path\").attr(\r\n          \"d\",\r\n          d3.symbol(WATERDROP_ICON, height / NUM_CIRCLES)\r\n        );\r\n      });\r\n\r\n    svgCircles.attr(\"transform\", (d) => `translate(${x(d[1])},${y(d[0])})`);\r\n\r\n    svgCircles.attr(\"fill\", \"steelblue\");\r\n  }, [circles]);\r\n\r\n  return (\r\n    <div className={`dot-histogram-wrapper`}>\r\n      <svg ref={(e) => void (svgSelector.current = d3.select(e))}></svg>\r\n    </div>\r\n  );\r\n}\r\n"],"names":["ExplanationAnim2App","slides","storyVars","useDataStory","constants","DEFAULT_OBJECTIVE","_jsx","className","children","_jsxs","DataStoryGraphics","DataStoryTexts","_ref","d3","map","i","VariationPanels","label","VARIATIONS","scen_str","bucketInterper","curBucketInterpers","dropInterper","curDropInterpers","histData","variationDelivsUnord","_ref2","DataStoryScrollama","cleanupFn","length","_slides$i$animHandler","animHandler","undo","slide","Step","data","Slide","_ref3","Scrollama","offset","onStepEnter","async","_data$animHandler","direction","_ref4","do","onStepExit","_data$animHandler2","_ref5","ReturnToTop","_ref6","id","BucketGlyph","levelInterp","width","height","BAR_CHART_HEIGHT","colorInterp","INTERP_COLOR","WaterdropGlyph","DotHistogram","domain","forwardRef","_ref7","ref","text","_ref8","style","marginBottom","onClick","window","scrollTo","MAX_DELIVS","SCENARIO_KEY_STRING","DELIV_KEY_STRING","DELIV_KEY_STRING_UNORD","objectivesData","objs","obj","scens","name","delivs","_","scen","Array","from","sort","a","b","mapBy","console","log","Object","keys","values","interpolateWatercolorBlue","EMPTY_INTERPER","range","EMPTY_INTERPERS","BAR_CHART_WIDTH","initConstants","animations","prepareDOM","hideElems","initChartAnimGroup","_XInterp","_XAxis","_dataDescendings","_maxDelivs","deps","BAR_CHART_MARGIN","remove","svgGroup","attr","append","concat","allDelivs","dataDescendings","val","placeFromLeft","year","x","padding","y","xaxis","tickSize","tickFormat","d","tickValues","filter","selectAll","call","prepareSVG","barsAppear","each","this","join","bandwidth","transition","duration","delay","barsCondense","newWidth","bars","end","catch","then","initBucketsFillAnim","setCurBucketInterpers","variationBucketInterpers","initDropFillAnim","showElems","setCurDropInterpers","variationDropInterpers","initShowVariationsAnim","objective","setSlides","useState","useDataStoryVars","useEffect","context","anims","chartAnimGroup","bucketsFillAnim","dropFillAnim","showVariationsAnim","_slides","setVariationDelivsUnord","setVariationBucketInterpers","setVariationDropInterpers","baselineMaxDelivs","varDelivsArrUnord","varDelivsArr","objVarBucketInterps","varDelivs","ticksExact","v","reverse","clamp","objVarDropInterps","percentToRatioFilled","NUM_CIRCLES","MARGIN","top","right","bottom","left","WATERDROP_ICON","draw","size","moveTo","lineTo","arc","Math","SQRT2","PI","closePath","svgSelector","useRef","circles","useMemo","getQuantileBins","dataRange","current","scale","s","svgCircles","select","enter","e"],"sourceRoot":""}