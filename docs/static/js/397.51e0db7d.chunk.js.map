{"version":3,"file":"static/js/397.51e0db7d.chunk.js","mappings":"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","sources":["ExplanationAnimApp.jsx","data/completeObjectivesData.jsx","utils/explanation-anim/constants.jsx","utils/explanation-anim/data-story-anims.jsx","utils/explanation-anim/useDataStory.jsx","utils/explanation-anim/useTutorialState.jsx"],"sourcesContent":["import * as d3 from \"d3\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { Scrollama, Step } from \"react-scrollama\";\r\n\r\nimport BucketGlyph from \"./bucket-lib/BucketGlyph\";\r\n\r\nimport DotHistogram from \"./utils/explanation-anim/DotHistogram\";\r\nimport WaterdropGlyph from \"./utils/explanation-anim/WaterdropGlyph\";\r\nimport { constants } from \"./utils/explanation-anim/constants\";\r\nimport { hideElems } from \"./utils/explanation-anim/render-utils\";\r\nimport { useDataStory } from \"./utils/explanation-anim/useDataStory\";\r\nimport useTutorialState from \"./utils/explanation-anim/useTutorialState\";\r\n\r\nexport default function ExplanationAnimApp() {\r\n  const [curObjective, setCurObjective] = useState(constants.DEFAULT_OBJECTIVE);\r\n\r\n  const tutorialState = useTutorialState(curObjective);\r\n  const slides = useDataStory(tutorialState, curObjective);\r\n\r\n  useEffect(\r\n    function changeObjective() {\r\n      hideElems(\r\n        \".bucket-wrapper, .vardrop, .var-scen-label, .vardrop .dot-histogram-wrapper, .main-histogram, .tut-drop-graphics-wrapper\"\r\n      );\r\n\r\n      tutorialState.setReadyHash((rh) => rh + 1);\r\n    },\r\n    [curObjective]\r\n  );\r\n\r\n  const onStepEnter = async ({ data, direction }) => {\r\n    if (direction === \"up\") return;\r\n    data.animHandler?.do();\r\n  };\r\n\r\n  const onStepExit = async ({ data, direction }) => {\r\n    if (direction === \"down\") return;\r\n    data.animHandler?.undo();\r\n  };\r\n\r\n  return (\r\n    <div className=\"tutorial-view\">\r\n      <select\r\n        value={curObjective}\r\n        onChange={(e) => setCurObjective(e.target.value)}\r\n      >\r\n        {Object.keys(constants.SELECTED_OBJS).map((objectiveID) => (\r\n          <option value={objectiveID} key={objectiveID}>\r\n            {constants.SELECTED_OBJS[objectiveID]}\r\n          </option>\r\n        ))}\r\n      </select>\r\n      <div className=\"scrollama scrollama-1\">\r\n        <div className=\"tut-graph-wrapper\">\r\n          <div className=\"tut-graph\">\r\n            <svg id=\"pag-bar-graph\"></svg>\r\n            <BucketGlyph\r\n              levelInterp={tutorialState.bucketInterper}\r\n              width={300}\r\n              height={constants.BAR_CHART_HEIGHT}\r\n              colorInterp={constants.INTERP_COLOR}\r\n            />\r\n            <p className=\"fancy-font objective-label\">\r\n              {constants.SELECTED_OBJS[curObjective]}\r\n            </p>\r\n          </div>\r\n        </div>\r\n\r\n        <div className=\"tut-drop-graphics-wrapper\">\r\n          <div className=\"main-waterdrop\">\r\n            <WaterdropGlyph\r\n              levelInterp={tutorialState.dropInterper}\r\n              width={400}\r\n              height={constants.BAR_CHART_HEIGHT}\r\n              colorInterp={constants.INTERP_COLOR}\r\n            />\r\n          </div>\r\n          <div className=\"main-histogram\">\r\n            <DotHistogram\r\n              width={330}\r\n              height={220}\r\n              data={tutorialState.objectiveDelivs}\r\n              domain={[0, d3.max(tutorialState.objectiveDelivs)]}\r\n            />\r\n          </div>\r\n          {constants.VARIATIONS.map(({ idx, clas, desc }) => (\r\n            <div className={`vardrop ${clas}`} key={idx} desc={desc}>\r\n              <div>\r\n                <WaterdropGlyph\r\n                  levelInterp={tutorialState.variationInterpers[idx]}\r\n                  width={200}\r\n                  height={(constants.BAR_CHART_HEIGHT * 2) / 3 / 2}\r\n                  colorInterp={constants.INTERP_COLOR}\r\n                />\r\n                <DotHistogram\r\n                  width={330}\r\n                  height={220}\r\n                  data={tutorialState.objectiveVariationDelivs[idx]}\r\n                  domain={[0, d3.max(tutorialState.objectiveDelivs)]}\r\n                />\r\n              </div>\r\n              <p className=\"var-scen-label\">{desc}</p>\r\n            </div>\r\n          ))}\r\n          <p className=\"fancy-font objective-label\">\r\n            {constants.SELECTED_OBJS[curObjective]}\r\n          </p>\r\n        </div>\r\n        <Scrollama\r\n          offset={0.9}\r\n          onStepEnter={onStepEnter}\r\n          onStepExit={onStepExit}\r\n        >\r\n          {slides.map((slide, i) => (\r\n            <Step key={i} data={slide}>\r\n              <div className=\"tut-text-card\">{slide.text}</div>\r\n            </Step>\r\n          ))}\r\n          <Step key={\"last\"} data={{}}>\r\n            <div className=\"tut-text-card\" style={{ marginBottom: \"40vh\" }}>\r\n              <button\r\n                onClick={() => {\r\n                  window.scrollTo(0, 0);\r\n                  for (let i = slides.length - 1; i >= 0; i--) {\r\n                    slides[i].animHandler?.undo();\r\n                  }\r\n                }}\r\n              >\r\n                Back to Top\r\n              </button>\r\n            </div>\r\n          </Step>\r\n        </Scrollama>\r\n      </div>\r\n    </div>\r\n  );\r\n}\r\n","import { mapBy } from \"../utils/utils\";\r\n\r\nexport const MAX_DELIVS = 1200;\r\nexport const SCENARIO_KEY_STRING = \"scens\";\r\nexport const DELIV_KEY_STRING = \"delivs\";\r\nexport const DELIV_KEY_STRING_UNORD = \"delivs_unord\";\r\n\r\nexport const objectivesData = await (async function () {\r\n  const objs = await (await fetch(\"./select_complete_objectives.json\")).json();\r\n\r\n  for (const obj of objs) {\r\n    for (const scen of obj[SCENARIO_KEY_STRING]) {\r\n      scen[DELIV_KEY_STRING_UNORD] = Array.from(scen[DELIV_KEY_STRING]);\r\n      scen[DELIV_KEY_STRING] = Array.from(scen[DELIV_KEY_STRING]).sort(\r\n        (a, b) => b - a\r\n      );\r\n    }\r\n    obj[SCENARIO_KEY_STRING] = mapBy(\r\n      obj[SCENARIO_KEY_STRING],\r\n      ({ name }) => name\r\n    );\r\n  }\r\n\r\n  console.log(\"DATA: loading objectives data\");\r\n\r\n  return mapBy(objs, ({ obj }) => obj);\r\n})();\r\n\r\nexport const objectiveIDs = Object.keys(objectivesData);\r\nexport const scenarioIDs = Object.keys(\r\n  Object.values(objectivesData)[0][SCENARIO_KEY_STRING]\r\n);\r\n","import * as d3 from \"d3\";\r\nimport { interpolateWatercolorBlue } from \"../../bucket-lib/utils\";\r\n\r\nfunction initConstants() {\r\n  const BAR_CHART_WIDTH = 500,\r\n    BAR_CHART_HEIGHT = 400;\r\n\r\n  // const INTERP_COLOR = d3.interpolateRgbBasis([\r\n  //   \"#F2F5FB\",\r\n  //   \"#D0DDEB\",\r\n  //   \"#7B9BC0\",\r\n  //   \"#4F739F\",\r\n  //   \"#112A57\",\r\n  // ]);\r\n  const INTERP_COLOR = interpolateWatercolorBlue;\r\n\r\n  const DEFAULT_OBJECTIVE = \"DEL_NOD_AG_TOTAL\";\r\n  const BASELINE_SCENARIO = \"expl0000\";\r\n\r\n  const _VARIATIONS = [\r\n    {\r\n      scen_num_str: \"0129\",\r\n      desc: \"natural flows\",\r\n    },\r\n    {\r\n      scen_num_str: \"0015\",\r\n      desc: \"reduce delta regs.\",\r\n    },\r\n    {\r\n      scen_num_str: \"0320\",\r\n      desc: \"prioritize carryover\",\r\n    },\r\n    {\r\n      scen_num_str: \"0360\",\r\n      desc: \"municipal priority\",\r\n    },\r\n    {\r\n      scen_num_str: \"0261\",\r\n      desc: \"rebalancing\",\r\n    },\r\n  ];\r\n\r\n  const VARIATIONS = _VARIATIONS.map(extendVarObj);\r\n\r\n  const SELECTED_OBJS = {\r\n    DEL_NOD_AG_TOTAL: \"DEL_NOD_AG_TOTAL\",\r\n    DEL_SJV_AG_TOTAL: \"DEL_SJV_AG_TOTAL\",\r\n    DEL_NOD_MI_TOTAL: \"DEL_NOD_MI_TOTAL\",\r\n    DEL_SJV_MI_TOTAL: \"DEL_SJV_MI_TOTAL\",\r\n    DEL_SOCAL_MI_TOTAL: \"DEL_SOCAL_MI_TOTAL\",\r\n    CVP_SWP_EXPORTS: \"CVP_SWP_EXPORTS\",\r\n    NDO: \"NDO\",\r\n    SAC_IN: \"SAC_IN\",\r\n    SJR_IN: \"SJR_IN\",\r\n    STO_NOD_TOTAL: \"STO_NOD_TOTAL\",\r\n    STO_SOD_TOTAL: \"STO_SOD_TOTAL\",\r\n  };\r\n\r\n  return {\r\n    BAR_CHART_WIDTH,\r\n    BAR_CHART_HEIGHT,\r\n    INTERP_COLOR,\r\n    DEFAULT_OBJECTIVE,\r\n    BASELINE_SCENARIO,\r\n    VARIATIONS,\r\n    SELECTED_OBJS,\r\n  };\r\n}\r\n\r\nfunction extendVarObj({ scen_num_str, desc }, idx) {\r\n  return {\r\n    idx,\r\n    scen_num_str,\r\n    desc,\r\n    scen_str: `expl${scen_num_str}`,\r\n    clas: `drop${idx + 1}`,\r\n  };\r\n}\r\n\r\nexport const constants = initConstants();\r\n","import * as d3 from \"d3\";\r\n\r\nimport { objectivesData } from \"../../data/completeObjectivesData\";\r\n\r\nimport { constants } from \"./constants\";\r\nimport { hideElems, showElems } from \"./render-utils\";\r\nimport {\r\n  DELIV_KEY_STRING_UNORD,\r\n  SCENARIO_KEY_STRING,\r\n} from \"../../data/objectivesData\";\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nconst BASELINE_SCENARIO = \"expl0000\";\r\n\r\nfunction getBucketInterper(objective) {\r\n  const delivs =\r\n    objectivesData[objective][SCENARIO_KEY_STRING][BASELINE_SCENARIO][\r\n      DELIV_KEY_STRING_UNORD\r\n    ];\r\n  const maxDelivs = d3.max(delivs);\r\n  return d3\r\n    .scaleLinear()\r\n    .domain(ticksExact(0, 1, delivs.length))\r\n    .range(\r\n      delivs\r\n        .map((v) => v / maxDelivs)\r\n        .sort()\r\n        .reverse()\r\n    )\r\n    .clamp(true);\r\n}\r\n\r\nfunction getDropInterper(objective) {\r\n  const delivs =\r\n    objectivesData[objective][SCENARIO_KEY_STRING][BASELINE_SCENARIO][\r\n      DELIV_KEY_STRING_UNORD\r\n    ];\r\n  const maxDelivs = d3.max(delivs);\r\n  return (val) =>\r\n    percentToRatioFilled(\r\n      d3\r\n        .scaleLinear()\r\n        .domain(ticksExact(0, 1, delivs.length))\r\n        .range(\r\n          delivs\r\n            .map((v) => v / maxDelivs)\r\n            .sort()\r\n            .reverse()\r\n        )\r\n        .clamp(true)(val)\r\n    );\r\n}\r\n\r\nfunction initAllAnims() {\r\n  function initChartAnimGroup({ deps, objective }) {\r\n    let _XInterp;\r\n    let _XAxis;\r\n    let _dataDescending;\r\n    let _maxDelivs;\r\n\r\n    const BAR_CHART_MARGIN = { top: 40, right: 30, bottom: 40, left: 60 };\r\n\r\n    function prepareSVG() {\r\n      {\r\n        d3.select(\"#pag-bar-graph > *\").remove();\r\n\r\n        const svgGroup = d3\r\n          .select(\"#pag-bar-graph\")\r\n          .attr(\r\n            \"width\",\r\n            constants.BAR_CHART_WIDTH +\r\n              BAR_CHART_MARGIN.left +\r\n              BAR_CHART_MARGIN.right\r\n          )\r\n          .attr(\r\n            \"height\",\r\n            constants.BAR_CHART_HEIGHT +\r\n              BAR_CHART_MARGIN.top +\r\n              BAR_CHART_MARGIN.bottom\r\n          )\r\n          .attr(\"opacity\", 1)\r\n          .append(\"g\")\r\n          .attr(\"class\", \"svg-group\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        const delivs =\r\n          objectivesData[objective][SCENARIO_KEY_STRING][BASELINE_SCENARIO][\r\n            DELIV_KEY_STRING_UNORD\r\n          ];\r\n\r\n        _maxDelivs = d3.max(delivs);\r\n\r\n        const dataDescending = delivs\r\n          .map((val, placeFromLeft) => ({\r\n            val,\r\n            placeFromLeft,\r\n            year: placeFromLeft + 1,\r\n          }))\r\n          .sort((a, b) => b.val - a.val);\r\n\r\n        const x = d3\r\n          .scaleBand()\r\n          .domain(dataDescending.map(({ year }) => year).sort((a, b) => a - b))\r\n          .range([0, constants.BAR_CHART_WIDTH])\r\n          .padding(0.4);\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        const xaxis = d3\r\n          .axisBottom(x)\r\n          .tickSize(0)\r\n          .tickFormat((d) => `year ${d}`)\r\n          .tickValues(\r\n            x.domain().filter((_, i) => i === 0 || (i + 1) % 10 === 0)\r\n          );\r\n\r\n        svgGroup.append(\"g\").attr(\"class\", \"anim-xaxis\");\r\n        svgGroup.append(\"g\").attr(\"class\", \"axis-y\");\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .call(xaxis)\r\n          .selectAll(\"text\")\r\n          .attr(\"transform\", \"translate(-10,0)rotate(-45)\")\r\n          .style(\"text-anchor\", \"end\");\r\n        svgGroup\r\n          .select(\".axis-y\")\r\n          .call(d3.axisLeft(y).tickFormat(d3.format(\".2s\")))\r\n          .append(\"text\")\r\n          .text(\"Deliveries (TAF)\")\r\n          .attr(\"fill\", \"black\")\r\n          .attr(\"font-weight\", \"bold\")\r\n          .attr(\r\n            \"transform\",\r\n            `translate(-50, ${constants.BAR_CHART_HEIGHT / 2}) rotate(-90)`\r\n          );\r\n\r\n        _XInterp = x;\r\n        _XAxis = xaxis;\r\n        _dataDescending = dataDescending;\r\n      }\r\n    }\r\n\r\n    function barsAppearDo() {\r\n      {\r\n        const y = d3\r\n          .scaleLinear()\r\n          .domain([0, _maxDelivs])\r\n          .range([constants.BAR_CHART_HEIGHT, 0]);\r\n\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .join(\"rect\")\r\n          .attr(\"class\", \"bars\")\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .attr(\"height\", 0)\r\n          .attr(\"opacity\", 1)\r\n          .attr(\"fill\", \"steelblue\")\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => d.placeFromLeft * 10)\r\n          .attr(\"y\", (d) => y(d.val))\r\n          .attr(\"height\", (d) => constants.BAR_CHART_HEIGHT - y(d.val));\r\n      }\r\n    }\r\n\r\n    function barsAppearUndo() {\r\n      {\r\n        d3.select(\"#pag-bar-graph .svg-group\")\r\n          .selectAll(\".bars\")\r\n          .data(_dataDescending, (d) => d.placeFromLeft)\r\n          .transition()\r\n          .duration(500)\r\n          .delay((d) => (_dataDescending.length - d.placeFromLeft - 1) * 10)\r\n          .attr(\"y\", constants.BAR_CHART_HEIGHT)\r\n          .attr(\"height\", 0);\r\n      }\r\n    }\r\n\r\n    async function barsCondenseDo() {\r\n      {\r\n        const newWidth = constants.BAR_CHART_WIDTH / 8;\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        svgGroup.select(\".anim-xaxis\").call(_XAxis.tickFormat(\"\"));\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        bars\r\n          .style(\"mix-blend-mode\", \"multiply\")\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 0.05)\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 +\r\n              (1 - (1 - d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"width\", newWidth)\r\n          .attr(\"x\", constants.BAR_CHART_WIDTH / 2 - newWidth / 2)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            svgGroup\r\n              .select(\".anim-xaxis\")\r\n              .transition()\r\n              .transition(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(0, ${constants.BAR_CHART_HEIGHT + 50})`\r\n              )\r\n              .attr(\"opacity\", 0);\r\n\r\n            bars.transition().delay(500).attr(\"x\", 0);\r\n\r\n            svgGroup\r\n              .transition()\r\n              .delay(500)\r\n              .attr(\r\n                \"transform\",\r\n                `translate(${\r\n                  BAR_CHART_MARGIN.left +\r\n                  constants.BAR_CHART_WIDTH / 2 -\r\n                  newWidth / 2\r\n                },${BAR_CHART_MARGIN.top})`\r\n              );\r\n          });\r\n      }\r\n    }\r\n\r\n    function barsCondenseUndo() {\r\n      {\r\n        const svgGroup = d3.select(\"#pag-bar-graph .svg-group\");\r\n\r\n        const bars = svgGroup.selectAll(\".bars\");\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .transition()\r\n          .transition(500)\r\n          .attr(\"transform\", `translate(0, ${constants.BAR_CHART_HEIGHT})`)\r\n          .attr(\"opacity\", 1);\r\n\r\n        svgGroup\r\n          .select(\".anim-xaxis\")\r\n          .call(_XAxis.tickFormat((d) => `year ${d}`));\r\n\r\n        svgGroup\r\n          .transition()\r\n          .delay(500)\r\n          .attr(\r\n            \"transform\",\r\n            `translate(${BAR_CHART_MARGIN.left},${BAR_CHART_MARGIN.top})`\r\n          );\r\n\r\n        bars\r\n          .transition()\r\n          .delay(\r\n            (d) =>\r\n              100 + (1 - (d.placeFromLeft / _dataDescending.length) ** 4) * 1000\r\n          )\r\n          .duration(500)\r\n          .attr(\"x\", (d) => _XInterp(d.year))\r\n          .attr(\"width\", _XInterp.bandwidth())\r\n          .transition()\r\n          .duration(500)\r\n          .attr(\"opacity\", 1)\r\n          .end()\r\n          .catch(() => {})\r\n          .then(() => {\r\n            bars.style(\"mix-blend-mode\", \"normal\");\r\n          });\r\n      }\r\n    }\r\n\r\n    prepareSVG();\r\n\r\n    return {\r\n      barsAppear: {\r\n        do: barsAppearDo,\r\n        undo: barsAppearUndo,\r\n      },\r\n      barsCondense: {\r\n        do: barsCondenseDo,\r\n        undo: barsCondenseUndo,\r\n      },\r\n    };\r\n  }\r\n\r\n  function initBucketsFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"initial\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").attr(\"opacity\", 0);\r\n\r\n      deps.setBucketInterper(() => getBucketInterper(objective));\r\n    }\r\n\r\n    function animUndo() {\r\n      deps.setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n\r\n      d3.selectAll(\".tut-graph-wrapper .bucket-wrapper\").style(\r\n        \"display\",\r\n        \"none\"\r\n      );\r\n      d3.select(\"#pag-bar-graph\").transition().attr(\"opacity\", 1);\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initDropFillAnim({ deps, objective }) {\r\n    function animDo() {\r\n      showElems(\".main-waterdrop\");\r\n      showElems(\".tut-drop-graphics-wrapper\", d3, \"grid\");\r\n      hideElems(\".tut-graph-wrapper, .bucket-wrapper\");\r\n      deps.setDropInterper(() => getDropInterper(objective));\r\n    }\r\n\r\n    function animUndo() {\r\n      hideElems(\".tut-drop-graphics-wrapper, .main-waterdrop\");\r\n      showElems(\".bucket-wrapper\");\r\n      showElems(\".tut-graph-wrapper\", d3, \"flex\");\r\n      deps.setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    }\r\n\r\n    return {\r\n      do: animDo,\r\n      undo: animUndo,\r\n    };\r\n  }\r\n\r\n  function initShowVariationsAnim({ deps }) {\r\n    return {\r\n      do: function () {\r\n        // vardrops\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"initial\")\r\n          .classed(\"hasarrow\", true);\r\n\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        deps.setVariationInterpers(deps.objectiveVariationInterpers);\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"block\");\r\n\r\n        // quantiles\r\n\r\n        d3.selectAll(\".var-scen-label\").style(\"opacity\", \"1\");\r\n\r\n        d3.select(\".main-waterdrop\")\r\n          .transition()\r\n          .style(\"transform\", \"translateY(100px) scale(0.5)\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(2)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"initial\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n      },\r\n      undo: function () {\r\n        // quantiles\r\n        d3.select(\".main-waterdrop\").transition().style(\"transform\", \"none\");\r\n        // undo scaling of label due to shrinking div\r\n        d3.select(\".main-waterdrop .var-scen-label\")\r\n          .transition()\r\n          .style(\"transform\", \"scale(1)\");\r\n\r\n        d3.select(\".main-histogram\").style(\"display\", \"none\");\r\n        d3.selectAll(\".vardrop .dot-histogram-wrapper\").style(\r\n          \"display\",\r\n          \"none\"\r\n        );\r\n\r\n        // scen labels\r\n        d3.selectAll(\".var-scen-label\").style(\"display\", \"none\");\r\n\r\n        // vardrops\r\n        d3.selectAll(\".tut-drop-graphics-wrapper .objective-label\").style(\r\n          \"display\",\r\n          \"initial\"\r\n        );\r\n        d3.selectAll(\".vardrop\")\r\n          .style(\"display\", \"none\")\r\n          .classed(\"hasarrow\", false);\r\n\r\n        deps.setVariationInterpers(\r\n          constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n        );\r\n      },\r\n    };\r\n  }\r\n\r\n  return {\r\n    initChartAnimGroup,\r\n    initBucketsFillAnim,\r\n    initDropFillAnim,\r\n    initShowVariationsAnim,\r\n  };\r\n}\r\n\r\nexport const animations = initAllAnims();\r\n","import { useCallback, useEffect, useState } from \"react\";\r\nimport { animations as anims } from \"./data-story-anims\";\r\n\r\nexport function useDataStory(deps, objective, scenario) {\r\n  /*\r\n    slides = [\r\n        name: string,\r\n        animHandler: {\r\n            do: someFunctionToDoAnimation,\r\n            undo: someFunctionToReverseAnimation,\r\n        }\r\n    ]\r\n     */\r\n  const [slides, setSlides] = useState([]);\r\n\r\n  useEffect(\r\n    function initialize() {\r\n      if (deps.readyHash === 0) return;\r\n\r\n      const context = { deps, objective, scenario };\r\n\r\n      const chartAnimGroup = anims.initChartAnimGroup(context);\r\n      const bucketsFillAnim = anims.initBucketsFillAnim(context);\r\n      const dropFillAnim = anims.initDropFillAnim(context);\r\n      const showVariationsAnim = anims.initShowVariationsAnim(context);\r\n\r\n      const _slides = [\r\n        {\r\n          name: \"barsAppear\",\r\n          animHandler: chartAnimGroup.barsAppear,\r\n          text: \"Bar Graph\",\r\n        },\r\n        {\r\n          name: \"barsCondense\",\r\n          animHandler: chartAnimGroup.barsCondense,\r\n          text: \"Gradient\",\r\n        },\r\n        {\r\n          name: \"bucketsFill\",\r\n          animHandler: bucketsFillAnim,\r\n          text: \"Bucket\",\r\n        },\r\n        {\r\n          name: \"forNowLetsFocus\",\r\n          animHandler: dropFillAnim,\r\n          text: \"Waterdrop\",\r\n        },\r\n        {\r\n          name: \"ifChangeReality\",\r\n          animHandler: showVariationsAnim,\r\n          text: \"Different Scenarios\",\r\n        },\r\n      ];\r\n\r\n      setSlides(_slides);\r\n    },\r\n    [deps.readyHash]\r\n  );\r\n\r\n  return slides;\r\n}\r\n","import * as d3 from \"d3\";\r\nimport { useEffect, useState } from \"react\";\r\n\r\nimport { ticksExact } from \"../../bucket-lib/utils\";\r\nimport {\r\n  DELIV_KEY_STRING,\r\n  SCENARIO_KEY_STRING,\r\n  objectivesData,\r\n} from \"../../data/completeObjectivesData\";\r\nimport { constants } from \"./constants\";\r\nimport { percentToRatioFilled } from \"../utils\";\r\n\r\nexport default function useTutorialState(objective) {\r\n  const [readyHash, setReadyHash] = useState(0);\r\n\r\n  const [bucketInterper, setBucketInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n  const [dropInterper, setDropInterper] = useState(() =>\r\n    d3.scaleLinear().range([0, 0])\r\n  );\r\n\r\n  const [variationInterpers, setVariationInterpers] = useState(() =>\r\n    constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n  );\r\n\r\n  const [objectiveDelivs, setObjectiveDelivs] = useState(() => []);\r\n  const [objectiveVariationDelivs, setObjectiveVariationDelivs] = useState(() =>\r\n    constants.VARIATIONS.map(() => [])\r\n  );\r\n  const [objectiveVariationInterpers, setObjectiveVariationInterpers] =\r\n    useState(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n  useEffect(() => {\r\n    setBucketInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setDropInterper(() => d3.scaleLinear().range([0, 0]));\r\n    setVariationInterpers(() =>\r\n      constants.VARIATIONS.map(() => d3.scaleLinear().range([0, 0]))\r\n    );\r\n\r\n    const objDelivs =\r\n      objectivesData[objective][SCENARIO_KEY_STRING][\r\n        constants.BASELINE_SCENARIO\r\n      ][DELIV_KEY_STRING];\r\n    const maxDelivs = d3.max(objDelivs);\r\n\r\n    setObjectiveDelivs(() => objDelivs);\r\n\r\n    const varDelivsArr = constants.VARIATIONS.map(\r\n      ({ scen_str }) =>\r\n        objectivesData[objective][SCENARIO_KEY_STRING][scen_str][\r\n          DELIV_KEY_STRING\r\n        ]\r\n    );\r\n\r\n    const objVars = varDelivsArr.map(\r\n      (varDelivs) => (val) =>\r\n        percentToRatioFilled(\r\n          d3\r\n            .scaleLinear()\r\n            .domain(ticksExact(0, 1, varDelivs.length))\r\n            .range(\r\n              varDelivs\r\n                .map((v) => v / maxDelivs)\r\n                .sort()\r\n                .reverse()\r\n            )\r\n            .clamp(true)(val)\r\n        )\r\n    );\r\n\r\n    setObjectiveVariationDelivs(() => varDelivsArr);\r\n    setObjectiveVariationInterpers(() => objVars);\r\n  }, [objective]);\r\n\r\n  return {\r\n    readyHash,\r\n    setReadyHash,\r\n    bucketInterper,\r\n    setBucketInterper,\r\n    dropInterper,\r\n    setDropInterper,\r\n    variationInterpers,\r\n    setVariationInterpers,\r\n    objectiveDelivs,\r\n    objectiveVariationDelivs,\r\n    objectiveVariationInterpers,\r\n  };\r\n}\r\n"],"names":["ExplanationAnimApp","curObjective","setCurObjective","useState","constants","DEFAULT_OBJECTIVE","tutorialState","useTutorialState","slides","useDataStory","useEffect","hideElems","setReadyHash","rh","_jsxs","className","children","_jsx","value","onChange","e","target","Object","keys","SELECTED_OBJS","map","objectiveID","id","BucketGlyph","levelInterp","bucketInterper","width","height","BAR_CHART_HEIGHT","colorInterp","INTERP_COLOR","WaterdropGlyph","dropInterper","DotHistogram","data","objectiveDelivs","domain","d3","VARIATIONS","_ref3","idx","clas","desc","concat","variationInterpers","objectiveVariationDelivs","Scrollama","offset","onStepEnter","async","_data$animHandler","direction","_ref","animHandler","do","onStepExit","_data$animHandler2","_ref2","undo","slide","i","Step","text","style","marginBottom","onClick","window","scrollTo","length","_slides$i$animHandler","SCENARIO_KEY_STRING","DELIV_KEY_STRING","DELIV_KEY_STRING_UNORD","objectivesData","objs","fetch","json","obj","scen","Array","from","sort","a","b","mapBy","name","console","log","values","extendVarObj","scen_num_str","scen_str","BAR_CHART_WIDTH","interpolateWatercolorBlue","BASELINE_SCENARIO","DEL_NOD_AG_TOTAL","DEL_SJV_AG_TOTAL","DEL_NOD_MI_TOTAL","DEL_SJV_MI_TOTAL","DEL_SOCAL_MI_TOTAL","CVP_SWP_EXPORTS","NDO","SAC_IN","SJR_IN","STO_NOD_TOTAL","STO_SOD_TOTAL","getBucketInterper","objective","delivs","maxDelivs","ticksExact","range","v","reverse","clamp","getDropInterper","val","percentToRatioFilled","initAllAnims","initChartAnimGroup","_XInterp","_XAxis","_dataDescending","_maxDelivs","deps","BAR_CHART_MARGIN","remove","svgGroup","attr","append","dataDescending","placeFromLeft","year","x","padding","y","xaxis","tickSize","tickFormat","d","tickValues","filter","_","select","call","selectAll","prepareSVG","barsAppear","join","bandwidth","transition","duration","delay","barsCondense","newWidth","bars","end","catch","then","initBucketsFillAnim","setBucketInterper","initDropFillAnim","_ref4","showElems","setDropInterper","initShowVariationsAnim","_ref5","classed","setVariationInterpers","objectiveVariationInterpers","animations","scenario","setSlides","readyHash","context","chartAnimGroup","anims","bucketsFillAnim","dropFillAnim","showVariationsAnim","_slides","setObjectiveDelivs","setObjectiveVariationDelivs","setObjectiveVariationInterpers","objDelivs","varDelivsArr","objVars","varDelivs"],"sourceRoot":""}