"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[704],{704:(t,e,a)=>{a.a(t,(async(t,n)=>{try{a.r(e),a.d(e,{default:()=>V});var r=a(43),c=a(243),o=a(111),s=a(63),l=a(639),i=a(684),u=a(829),h=a(579),d=t([s,l,u]);[s,l,u]=d.then?(await d)():d;const p="expl0000",m="DEL_CVP_PAG_N",g=0,y=10,v="demand",k="carryover",x="priority",b="regs",j="minflow",w={[v]:5,[k]:3,[x]:2,[b]:4,[j]:5},M={};function V(){const{current:t}=(0,r.useRef)(Object.keys(s.jx)),[e,a]=(0,r.useState)(p),[n,c]=(0,r.useState)(m),[i,d]=(0,u.nC)(g,M[v]),[f,w]=(0,u.nC)(g,M[k]),[V,A]=(0,u.nC)(g,M[x]),[B,Y]=(0,u.nC)(g,M[b]),[T,W]=(0,u.nC)(g,M[j]),Z=(0,r.useMemo)((()=>E(n,e)),[e,n]);(0,r.useEffect)((()=>{a(l.F[C(i,f,V,B,T)])}),[i,f,V,B,T]);const q=[{label:"demand [1, 0.9, 0.8, 0.7, 0.6]",controlVar:v,val:i,setter:d},{label:"carryover [1.0, 1.2, 1.3]",controlVar:k,val:f,setter:w},{label:"priority [0, 1]",controlVar:x,val:V,setter:A},{label:"regs [1, 2, 3, 4]",controlVar:b,val:B,setter:Y},{label:"minflow [0, 0.4, 0.6, 0.7, 0.8]",controlVar:j,val:T,setter:W}];return(0,h.jsx)(h.Fragment,{children:(0,h.jsxs)("div",{className:"editor",children:[(0,h.jsxs)("div",{className:"sliders",children:[(0,h.jsx)("select",{value:n,onChange:t=>c(t.target.value),children:t.map((t=>(0,h.jsx)("option",{name:t,value:t,children:t},t)))}),q.map((t=>{let{label:e,controlVar:a,val:r,setter:c}=t;return(0,h.jsxs)("div",{children:[(0,h.jsx)("span",{children:e}),(0,h.jsx)(P,{data:I({demand:i,carryover:f,priority:V,regs:B,minflow:T},a,n),val:r,setVal:c})]},a)}))]}),(0,h.jsxs)("div",{children:[(0,h.jsx)(o.A,{levelInterp:Z,width:300,height:400,resolution:y}),(0,h.jsx)("span",{style:{display:"block",textAlign:"center"},children:e})]})]})})}function P(t){let{data:e,val:a,setVal:n}=t;const o=5,s=5,l=0,u=5,d=400,f=(0,r.useRef)(),p=c.m4Y().range([0,d]),m=c.m4Y().range([50,0]);return(0,r.useEffect)((()=>{f.current.attr("width",d+u+s).attr("height",50+o+l).call((t=>t.node().addEventListener("mousedown",(t=>n(c.m4Y().domain([u,d+u]).clamp(!0)(t.offsetX)))))).call((t=>{t.append("g").attr("transform","translate(".concat(u,",").concat(o,")")).call(c.tlR(c.hqK(c.y17(e[0].length),[0,d])).tickFormat("")).selectAll("path").style("stroke","lightgrey")})).append("g").attr("class","graph-area").attr("transform","translate(".concat(u,",").concat(o,")")).call((t=>t.selectAll("path").data(e).join("path").attr("fill",((t,a)=>(0,i.YW)(a/e.length))))).call((t=>t.append("rect").attr("width",d).attr("height",50).attr("fill","none").attr("stroke","lightgrey"))).append("rect").attr("class","razor").attr("fill","red").attr("width",5).attr("height",50)}),[]),(0,r.useEffect)((()=>{f.current.select(".graph-area").selectAll("path").data(e).attr("d",(t=>c.Wcw().x(((e,a)=>p(a/(t.length-1)))).y1((t=>m(t))).y0(m(0))(t)))}),[e]),(0,r.useEffect)((()=>{f.current.select(".graph-area").select(".razor").attr("x",p(a)-2.5)}),[a]),(0,h.jsx)("svg",{className:"line-slider",ref:t=>{f.current=c.Ltv(t)}})}function C(t,e,a,n,r){const o=(t,e)=>c.WT_(c.y17(1,w[e]+1))(t);return console.log("".concat(o(t,v)).concat(o(e,k)).concat(o(a,x)).concat(o(n,b)).concat(o(r,j))),"".concat(o(t,v)).concat(o(e,k)).concat(o(a,x)).concat(o(n,b)).concat(o(r,j))}function E(t,e){console.log(e);const a=s.jx[t][s.Vk][e][s.Zl];return c.m4Y().domain((0,i.kd)(0,1,a.length)).range(a.map((t=>t/s.pk))).clamp(!0)}function I(t,e,a){let{demand:n,carryover:r,priority:c,regs:o,minflow:s}=t;const u=[],h=e!==v?[n]:M[v].range(),d=e!==k?[r]:M[k].range(),f=e!==x?[c]:M[x].range(),p=e!==b?[o]:M[b].range(),m=e!==j?[s]:M[j].range();for(const l of h)for(const t of d)for(const e of f)for(const a of p)for(const n of m)u.push([l,t,e,a,n]);const g=u.map((t=>E(a,l.F[C(...t)])));return(0,i.kd)(0,1,y+1).map((t=>g.map((e=>e(t)))))}Object.keys(w).forEach((t=>M[t]=c.WT_((0,i.kd)(0,1,w[t])))),n()}catch(f){n(f)}}))},111:(t,e,a)=>{a.d(e,{A:()=>u});var n=a(243),r=a(43),c=a(684),o=a(579);const s=40,l=10,i=3;function u(t){let{levelInterp:e,colorInterp:a=c.YW,width:u=200,height:h=400,resolution:d=l}=t;const f=(0,r.useId)(),p=(0,r.useRef)(),m=(0,r.useMemo)((()=>(0,c.kd)(0,1,d+1).map((t=>e(t)))),[e,d]),g=(0,c.ZC)(m),y=u-2*i,v=h-i;return(0,r.useLayoutEffect)((()=>{const t=p.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(i,", ").concat(i/2,")"));t.append("defs").append("clipPath").attr("id","bucket-mask-"+f).append("path").attr("class","bucket-mask-path"),t.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(f,")")),t.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",i).attr("fill","none")}),[f]),(0,r.useLayoutEffect)((()=>{const t=p.current.attr("width",u).attr("height",h).select(".svg-container");t.select(".bucket-mask-path").attr("d",(0,c.wh)(y,v)),t.select(".bucket-outline").attr("d",(0,c.wh)(y,v).split("z")[0])}),[u,h,y,v]),(0,r.useLayoutEffect)((()=>{const t=p.current.select(".graph-area").selectAll(".bucketBox").data(m).join("rect").attr("class","bucketBox").attr("width",2*y).attr("height",2*v).attr("x",-y/2).attr("fill",((t,e)=>a(e/l)));t.transition("liquidLevel").ease(n.guX.period(.6)).delay(((t,e)=>e*(100/d))).duration(1e3).attr("y",(t=>v-t*v)),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(n.I1g).attrTween("transform",(function(t,e){const a=g?Math.abs(g[e]-t):0;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*a+.5),4*Math.PI))*a*s*(1-t),", ").concat(y/2,", ",0,")")}))}),[m,g,u,h,y,v,d,a]),(0,o.jsx)("div",{className:"bucket-wrapper",children:(0,o.jsx)("svg",{ref:t=>{p.current=n.Ltv(t)}})})}},684:(t,e,a)=>{a.d(e,{Q2:()=>s,YW:()=>i,ZC:()=>l,kd:()=>c,wh:()=>o});var n=a(243),r=a(43);function c(t,e,a){return n.y17(a).map((n=>n/(a-1)*(e-t)+t))}function o(t,e){let a=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,c=t*r+t*(1-r)/2,o=t*(1-r)/2,s=[{x:n.GWP(c,t)(a),y:n.GWP(e,0)(a)},{x:c,y:e},{x:o,y:e},{x:n.GWP(o,0)(a),y:n.GWP(e,0)(a)}];return n.n8j().x((function(t){return t.x})).y((function(t){return t.y}))(s)+"z"}function s(t,e,a){let r=t.map((t=>Math.round(t.length/e))),c=n.czq(r);for(;c>a;)r[n.z94(t,((t,a)=>0!==t.length?t.length/e-r[a]:1/0))]-=1,c=n.czq(r);for(;c<a;)r[n.P2Z(t,((t,a)=>0!==t.length?t.length/e-r[a]:-1/0))]+=1,c=n.czq(r);return r}function l(t,e){const a=(0,r.useRef)({value:t,prev:null}),n=a.current.value;return(e?e(t,n):t===n)||(a.current={value:t,prev:n}),a.current.prev}const i=t=>n.dM(n.m4Y([.2,1])(t))},639:(t,e,a)=>{a.a(t,(async(t,n)=>{try{a.d(e,{F:()=>t});const t=await async function(){const t=await(await fetch("./factors.json")).json();return console.log("DATA: loading factors data"),t}();n()}catch(r){n(r)}}),1)},63:(t,e,a)=>{a.a(t,(async(t,n)=>{try{a.d(e,{Vk:()=>s,Zl:()=>l,jx:()=>i,pk:()=>o});var r=a(829),c=t([r]);r=(c.then?(await c)():c)[0];const o=1200,s="scens",l="delivs",i=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const e of t){e[s]=e[s];for(const t of e[s])t[l]=t[l].map((t=>Math.min(Math.max(0,t),o))).sort(((t,e)=>e-t));e[s]=(0,r.Et)(e[s],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,r.Et)(t,(t=>{let{obj:e}=t;return e}))}();n()}catch(o){n(o)}}),1)},829:(t,e,a)=>{a.a(t,(async(t,n)=>{try{a.d(e,{C5:()=>m,Et:()=>d,XC:()=>f,Yb:()=>V,cv:()=>M,hh:()=>j,nC:()=>w,si:()=>p,xC:()=>g});var r=a(243),c=a(783),o=a.n(c),s=a(43),l=a(63),i=a(684),u=t([l]);function d(t,e){const a=Object.groupBy(t,e);for(const n of Object.keys(a))a[n]=a[n][0];return a}l=(u.then?(await u)():u)[0];const f={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.sqrt(2)/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}};function p(t){return(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.4}function m(t,e){return function(a){return e.map((function(e){return[e,r.i2o(a,(function(a){return t(e-a)}))]}))}}function g(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function y(t){const e=t/2,a=3*Math.PI/2/16,n=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let r=0;r<=16;r++)n.push({x:Math.cos(r*a-Math.PI/4)*e,y:Math.sin(r*a-Math.PI/4)*e});return n}function v(t,e){const a=o().Bounds.create(t),n=a.min.x,c=a.max.x,s=a.min.y,l=a.max.y,i=r.m4Y([n,c]),u=r.m4Y([s,l]),h=[];for(let r=0;r<e;r++)for(;;){const e=i(Math.random()),a=u(Math.random());if(o().Vertices.contains(t,{x:e,y:a})){h.push([e,a]);break}}return h}const k=function(){const t=y(3),e=y(1),a=[];for(let n=0;n<t.length-2;n++)a.push([t[n],t[n+(n<2?1:2)],e[n+(n<2?1:2)],e[n]]);return a}();let x,b;function j(t,e,a){x&&a.length===b||(x=r.y17(4).map((()=>v(y(1),b=a.length))));const n=r.czq(a.map((t=>{let{r:e}=t;return e**2*3.14}))),c=Math.floor(2*Math.sqrt(n/3.14)/2),s=x[Math.floor(Math.random()*x.length)].map((t=>{let[e,a]=t;return[e*c,a*c]})),l=o().Engine,i=o().Bodies,u=o().Composite,h=l.create(),d=s.sort(((t,e)=>e[1]-t[1])),f=a.map(((t,e)=>{let{r:a,id:n}=t;const[r,c]=d[e];return i.circle(r,c,a,{restitution:0,id:n})})),p=k.map((t=>o().Body.create({position:o().Vertices.centre(t),vertices:t,isStatic:!0}))),m=o().Body.create({isStatic:!0});o().Body.setParts(m,p),o().Body.setCentre(m,{x:0,y:0}),o().Body.scale(m,1.1*c,1.1*c),u.add(h.world,[...f,m]);for(let r=0,o=60,g=.3;r<o*g;r++)l.update(h,1e3/o);return f.map((a=>{let{position:n,id:r}=a;return{id:r,x:n.x+t,y:n.y+e+.1*c}}))}function w(t,e){const[a,n]=(0,s.useState)(t);return[(0,s.useMemo)((()=>e(a)),[a]),(0,s.useCallback)((t=>{n(e(t))}),[])]}function M(t,e,a,n){const c=a[t][l.Vk][e][l.Zl];return r.m4Y().domain((0,i.kd)(0,1,c.length)).range(c.map((t=>Math.min(1,t/n)||0))).clamp(!0)}function V(t,e,a){return"median"===t?Object.keys(e[a][l.Vk]).sort(((t,n)=>r.i2o(e[a][l.Vk][t][l.Zl])-r.i2o(e[a][l.Vk][n][l.Zl]))):"deliveries"===t?Object.keys(e[a][l.Vk]).sort(((t,n)=>r.T9B(e[a][l.Vk][t][l.Zl])-r.T9B(e[a][l.Vk][n][l.Zl]))):void 0}n()}catch(h){n(h)}}))}}]);
//# sourceMappingURL=704.adec7324.chunk.js.map