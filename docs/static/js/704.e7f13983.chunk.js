"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[704],{704:(t,e,r)=>{r.a(t,(async(t,a)=>{try{r.r(e),r.d(e,{default:()=>v});var n=r(43),o=r(63),c=r(639),s=r(92),l=r(111),i=r(684),u=r(579),d=t([o,c]);[o,c]=d.then?(await d)():d;const f="expl0000",p=0,m=.25,g=10,y={demand:s.m4Y([1,4]),carryover:s.m4Y([1,3]),priority:s.m4Y([1,2]),regs:s.m4Y([1,4]),minflow:s.m4Y([1,4])};function v(){const{current:t}=(0,n.useRef)(Object.keys(o.jx)),[e,r]=(0,n.useState)(f),[a,s]=(0,n.useState)(p),[i,d]=(0,n.useState)(m),[h,v]=(0,n.useState)(m),[x,j]=(0,n.useState)(m),[P,I]=(0,n.useState)(m),[E,V]=(0,n.useState)(m),S=(0,n.useMemo)((()=>k(t[a],e)),[e,a]);(0,n.useEffect)((()=>{r(c.F[w(Math.round(y.demand(i)),Math.round(y.carryover(h)),Math.round(y.priority(x)),Math.round(y.regs(P)),Math.round(y.minflow(E)))])}),[i,h,x,P,E]);const Y=[{label:"demand [1, 0.9, 0.8, 0.7]",controlVar:"demand",val:i,setter:d},{label:"carryover [1.0, 1.1, 1.2]",controlVar:"carryover",val:h,setter:v},{label:"priority [0, 1]",controlVar:"priority",val:x,setter:j},{label:"regs [1, 2, 3, 4]",controlVar:"regs",val:P,setter:I},{label:"minflow [0, 0.4, 0.6, 0.8]",controlVar:"minflow",val:E,setter:V}];return(0,u.jsx)(u.Fragment,{children:(0,u.jsxs)("div",{className:"editor",children:[(0,u.jsxs)("div",{className:"sliders",children:[(0,u.jsx)("select",{value:a,onChange:t=>s(parseInt(t.target.value)),children:t.map(((t,e)=>(0,u.jsx)("option",{name:e,value:e,children:t})))}),Y.map((e=>{let{label:r,controlVar:n,val:o,setter:c}=e;return(0,u.jsxs)("div",{children:[(0,u.jsx)("span",{children:r}),(0,u.jsx)(M,{data:b({demand:i,carryover:h,priority:x,regs:P,minflow:E},n,t[a]),val:o,setVal:c})]})}))]}),(0,u.jsxs)("div",{children:[(0,u.jsx)(l.A,{levelInterp:S,width:300,height:400,resolution:g}),(0,u.jsx)("span",{style:{display:"block",textAlign:"center"},children:e})]})]})})}const x={top:0,right:0,bottom:0,left:0};function M(t){let{data:e,val:r,setVal:a,width:o=400,height:c=50}=t;const l=(0,n.useRef)(),i=s.m4Y().range([0,o]),d=s.m4Y().range([c,0]);return(0,n.useEffect)((()=>{l.current.attr("width",o+x.left+x.right).attr("height",c+x.top+x.bottom).style("border","1px solid lightgrey").call((t=>t.node().addEventListener("mousedown",(t=>a(s.m4Y().domain([x.left,o+x.left]).clamp(!0)(t.offsetX)))))).append("g").attr("class","graph-area").attr("transform","translate(".concat(x.left,",").concat(x.top,")")).call((t=>t.selectAll("path").data(e).join("path").attr("fill",((t,r)=>s.dM(r/e.length))))).append("rect").attr("fill","red").attr("width",5).attr("height",c)}),[]),(0,n.useEffect)((()=>{l.current.selectAll("path").data(e).attr("d",(t=>s.Wcw().x(((e,r)=>i(r/(t.length-1)))).y1((t=>d(t))).y0(d(0))(t)))}),[e]),(0,n.useEffect)((()=>{l.current.select("rect").attr("x",i(r))}),[r]),(0,u.jsx)("svg",{className:"line-slider",ref:t=>{l.current=s.Ltv(t)}})}function w(t,e,r,a,n){return"".concat(t).concat(e).concat(r).concat(a).concat(n)}function k(t,e){const r=o.jx[t][o.Vk][e][o.Zl];return s.m4Y().domain((0,i.kd)(0,1,r.length)).range(r.map((t=>Math.min(1,t/o.pk)||0))).clamp(!0)}function b(t,e,r){let{demand:a,carryover:n,priority:o,regs:l,minflow:u}=t,d=[];for(const i of"demand"!==e?[Math.round(y.demand(a))]:s.y17(y.demand.range()[0],y.demand.range()[1]+1))for(const t of"carryover"!==e?[Math.round(y.carryover(n))]:s.y17(y.carryover.range()[0],y.carryover.range()[1]+1))for(const r of"priority"!==e?[Math.round(y.priority(o))]:s.y17(y.priority.range()[0],y.priority.range()[1]+1))for(const a of"regs"!==e?[Math.round(y.regs(l))]:s.y17(y.regs.range()[0],y.regs.range()[1]+1))for(const n of"minflow"!==e?[Math.round(y.minflow(u))]:s.y17(y.minflow.range()[0],y.minflow.range()[1]+1))d.push(c.F[w(i,t,r,a,n)]);const h=[];for(const c of d)h.push(k(r,c));return(0,i.kd)(0,1,g+1).map((t=>h.map((e=>e(t)))))}a()}catch(h){a(h)}}))},111:(t,e,r)=>{r.d(e,{A:()=>u});var a=r(92),n=r(43),o=r(684),c=r(579);const s=40,l=10,i=3;function u(t){let{levelInterp:e,colorInterp:r=a.dM,width:u=200,height:d=400,resolution:h=l}=t;const f=(0,n.useId)(),p=(0,n.useRef)(),m=(0,n.useMemo)((()=>(0,o.kd)(0,1,h+1).map((t=>e(t)))),[e,h]),g=(0,o.ZC)(m),y=u-2*i,v=d-i;return(0,n.useLayoutEffect)((()=>{const t=p.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(i,", ").concat(i/2,")"));t.append("defs").append("clipPath").attr("id","bucket-mask-"+f).append("path").attr("class","bucket-mask-path"),t.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(f,")")),t.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",i).attr("fill","none")}),[f]),(0,n.useLayoutEffect)((()=>{const t=p.current.attr("width",u).attr("height",d).select(".svg-container");t.select(".bucket-mask-path").attr("d",(0,o.wh)(y,v)),t.select(".bucket-outline").attr("d",(0,o.wh)(y,v).split("z")[0])}),[u,d,y,v]),(0,n.useLayoutEffect)((()=>{const t=p.current.select(".graph-area").selectAll(".bucketBox").data(m).join("rect").attr("class","bucketBox").attr("width",2*y).attr("height",2*v).attr("x",-y/2).attr("fill",((t,e)=>r(e/l)));t.transition("liquidLevel").ease(a.guX.period(.6)).delay(((t,e)=>e*(100/h))).duration(1e3).attr("y",(t=>v-t*v)),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(a.I1g).attrTween("transform",(function(t,e){const r=g?Math.abs(g[e]-t):0;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*r+.5),4*Math.PI))*r*s*(1-t),", ").concat(y/2,", ",0,")")}))}),[m,g,u,d,y,v,h,r]),(0,c.jsx)("div",{className:"bucket-wrapper",children:(0,c.jsx)("svg",{ref:t=>{p.current=a.Ltv(t)}})})}},684:(t,e,r)=>{r.d(e,{Q2:()=>s,ZC:()=>l,kd:()=>o,wh:()=>c});var a=r(92),n=r(43);function o(t,e,r){return a.y17(r).map((a=>a/(r-1)*(e-t)+t))}function c(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,n=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,o=t*n+t*(1-n)/2,c=t*(1-n)/2,s=[{x:a.GWP(o,t)(r),y:a.GWP(e,0)(r)},{x:o,y:e},{x:c,y:e},{x:a.GWP(c,0)(r),y:a.GWP(e,0)(r)}];return a.n8j().x((function(t){return t.x})).y((function(t){return t.y}))(s)+"z"}function s(t,e,r){let n=t.map((t=>Math.round(t.length/e))),o=a.czq(n);for(;o>r;)n[a.z94(t,((t,r)=>0!==t.length?t.length/e-n[r]:1/0))]-=1,o=a.czq(n);for(;o<r;)n[a.P2Z(t,((t,r)=>0!==t.length?t.length/e-n[r]:-1/0))]+=1,o=a.czq(n);return n}function l(t,e){const r=(0,n.useRef)({value:t,prev:null}),a=r.current.value;return(e?e(t,a):t===a)||(r.current={value:t,prev:a}),r.current.prev}},639:(t,e,r)=>{r.a(t,(async(t,a)=>{try{r.d(e,{F:()=>t});const t=await async function(){const t=await(await fetch("./factors.json")).json();return console.log("DATA: loading factors data"),t}();a()}catch(n){a(n)}}),1)},63:(t,e,r)=>{r.a(t,(async(t,a)=>{try{r.d(e,{Vk:()=>o,Zl:()=>c,jx:()=>s,pk:()=>t});var n=r(829);const t=1200,o="scens",c="delivs",s=await async function(){const e=await(await fetch("./all_objectives.json")).json();for(const r of e){for(const e of r[o])e[c]=e[c].map((e=>Math.min(Math.max(0,e),t))).sort(((t,e)=>e-t));r[o]=(0,n.Et)(r[o],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,n.Et)(e,(t=>{let{obj:e}=t;return e}))}();a()}catch(o){a(o)}}),1)},829:(t,e,r)=>{r.d(e,{C5:()=>i,Et:()=>c,XC:()=>s,hh:()=>p,si:()=>l,xC:()=>u});var a=r(92),n=r(783),o=r.n(n);function c(t,e){const r=Object.groupBy(t,e);for(const a of Object.keys(r))r[a]=r[a][0];return r}const s={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.sqrt(2)/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}};function l(t){return(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.4}function i(t,e){return function(r){return e.map((function(e){return[e,a.i2o(r,(function(r){return t(e-r)}))]}))}}function u(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function d(t){const e=t/2,r=3*Math.PI/2/20,a=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let n=0;n<=20;n++)a.push({x:Math.cos(n*r-Math.PI/4)*e,y:Math.sin(n*r-Math.PI/4)*e});return a}const h=function(){const t=d(1.4),e=d(1),r=[];for(let a=0;a<t.length-1;a++)r.push([t[a],t[a+1],e[a+1],e[a]]);return r}();let f;function p(t,e,r){f=f||function(t,e){const r=o().Bounds.create(t),n=r.min.x,c=r.max.x,s=r.min.y,l=r.max.y,i=a.m4Y([n,c]),u=a.m4Y([s,l]),d=[];for(let a=0;a<e;a++)for(;;){const e=i(Math.random()),r=u(Math.random());if(o().Vertices.contains(t,{x:e,y:r})){d.push([e,r]);break}}return d}(d(1),r.length);const n=a.i2o(r.map((t=>{let{r:e}=t;return 2*e})))*Math.floor(Math.sqrt(r.length)),c=f.map((t=>{let[e,r]=t;return[e*n/2,r*n/2]})),s=o().Engine,l=o().Bodies,i=o().Composite,u=s.create(),p=c.sort(((t,e)=>e[1]-t[1])),m=r.map(((r,a)=>{let{r:n,id:o}=r;const[c,s]=p[a];return l.circle(c+t,s+e,2*n,{restitution:0,id:o})})),g=h.map((t=>o().Body.create({position:o().Vertices.centre(t),vertices:t,isStatic:!0}))),y=o().Body.create({isStatic:!0});o().Body.setParts(y,g),o().Body.scale(y,1.4*n,1.4*n),o().Body.translate(y,{x:t,y:e+n/2*.4}),i.add(u.world,[...m,y]);for(let a=0,o=60;a<1*o;a++)s.update(u,1e3/o);return m.map((t=>{let{position:e,id:r}=t;return{id:r,x:e.x,y:e.y}}))}}}]);
//# sourceMappingURL=704.e7f13983.chunk.js.map