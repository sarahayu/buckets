"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[687],{5111:(t,e,n)=>{n.d(e,{A:()=>h});var r=n(5760),a=n(5043),o=n(3408),s=n(1684),i=n(579);const c=10;function h(t){let{levelInterp:e,colorInterp:n=s.YW,width:h=200,height:u=400,resolution:l=c}=t;const f=h-6,d=u-3,m=(0,a.useRef)();return(0,a.useLayoutEffect)((function(){m.current.attr("width",h).attr("height",u).append("g").attr("class","bucket").attr("transform","translate(".concat(3,", ").concat(1.5,")")).call((0,o.Qj)(f,d,o.X1,o.hM))}),[]),(0,a.useLayoutEffect)((function(){const t=(0,s.kd)(0,1,l+1).map((t=>e(t))),r=(0,o.fq)(f,d),a=m.current.select(".graph-area").selectAll(".bucket-box").data(r(t)).join("rect").attr("class","bucket-box").attr("width",(t=>t.width)).attr("height",(t=>t.height)).attr("x",(t=>t.x)).attr("fill",((t,e)=>n(e/l)));(0,o.Uy)(a,200/u).attr("y",(t=>t.y))}),[e]),(0,i.jsx)("div",{className:"bucket-wrapper",children:(0,i.jsx)("svg",{ref:t=>{m.current=r.select(t)}})})}},3408:(t,e,n)=>{n.d(e,{Qj:()=>h,R1:()=>d,Uy:()=>c,X1:()=>u,fq:()=>i,hM:()=>l});var r=n(5760);const a=40,o=3;let s=0;function i(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:r.scaleLinear();return function(r){return r.map((r=>({x:-t,y:e-n(r)*e-e/2,width:2*t,height:2*e})))}}function c(t){let e=arguments.length>1&&void 0!==arguments[1]?arguments[1]:1;t.each((function(t){const e=r.select(this),n=e.attr("cur-level")||0;e.attr("prev-level",n),e.attr("cur-level",t.y)})),t.transition("liquidSway").duration(2e3).delay(((t,e)=>10*e)).ease(r.easeQuad).attrTween("transform",(function(t,n){const o=r.select(this),s=parseFloat(o.attr("prev-level")),i=Math.abs(s-t.y)/200*e;return t=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*t/(.5*i+.5),4*Math.PI))*i*a*(1-t),", ",0,", ",0,")")}));return t.transition("liquidLevel").ease(r.easeElasticOut.period(.6)).delay(((e,n)=>n*(100/t.size()))).duration(1e3)}function h(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:u,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:n;return function(i){const c=s++;i.append("defs").attr("class","clip-def").append("clipPath").attr("id","bucket-mask-"+c).append("path").attr("class","bucket-mask-path"),i.append("g").attr("class","graph-area").attr("transform","translate(".concat(t/2,", ").concat(e/2,")")).attr("clip-path","url(#bucket-mask-".concat(c,")")),i.append("path").attr("class","bucket-outline").attr("transform","translate(".concat(t/2,", ").concat(e/2,")")).attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",o).attr("fill","none"),i.call(function(t){let{drawFunc:e,drawOutlineFunc:n=e,width:a,height:o}=t;return function(t){const s=t=>{const e=r.path();return t(e,a,o),e.toString()};t.select(".bucket-mask-path").attr("d",s(e)),t.select(".bucket-outline").attr("d",s(n))}}({drawFunc:n,drawOutlineFunc:a,width:t,height:e}))}}function u(t,e,n){f(t,e,n,!0)}function l(t,e,n){f(t,e,n,!1)}function f(t,e,n,r){const a=.8*e/2,o=-.8*e/2;t.moveTo(e/2,-n/2),t.lineTo(a,n/2),t.lineTo(o,n/2),t.lineTo(-e/2,-n/2),r&&t.closePath()}function d(t,e,n){const r=Math.SQRT2,a=1/(1+1*r),o=Math.min(e/2,n*a),s=o/(1/r),i=o+s;t.moveTo(0,-i/2),t.lineTo(s/2,-i/2+s/2),t.arc(0,-i/2+s,o,-Math.PI/4,5*Math.PI/4),t.closePath()}},2991:(t,e,n)=>{n.d(e,{Q:()=>o});var r=n(5760),a=n(1684);function o(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:void 0,o=arguments.length>3&&void 0!==arguments[3]?arguments[3]:void 0;return function(s){n=n||1,o=o||r.extent(s);const i=s.length/n,c=r.bin().value((t=>t)).domain(o).thresholds(function(t,e,n){return r.range(n).map((r=>r/(n-1)*(e-t)+t))}(...o,Math.ceil(t/(e/i))))(s),h=(0,a.E3)(c,n,i),u=[];for(let t=0;t<h.length;t++)for(let e=0;e<h[t];e++)u.push([(c[t].x1+c[t].x0)/2,(e+.5)/i*s.length]);return u}}},1684:(t,e,n)=>{n.d(e,{E3:()=>o,YW:()=>s,kd:()=>c,m8:()=>i,wh:()=>h});var r=n(5760),a=n(3408);function o(t,e,n){let a=t.map((t=>Math.round(t.length/e))),o=r.sum(a);for(;o>n;)a[r.minIndex(t,((t,n)=>0!==t.length?t.length/e-a[n]:1/0))]-=1,o=r.sum(a);for(;o<n;)a[r.maxIndex(t,((t,n)=>0!==t.length?t.length/e-a[n]:-1/0))]+=1,o=r.sum(a);return a}const s=t=>r.interpolateBlues(r.scaleLinear([.2,1])(t));function i(t){return t-=.0088,Math.min(1,Math.max(0,(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.2326))}function c(t,e,n){return r.range(n).map((r=>r/(n-1)*(e-t)+t))}function h(t,e){return(n=>{const a=r.path();return n(a,t,e),a.toString()})(a.X1)}},63:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{Vk:()=>i,Xe:()=>f,Zl:()=>c,iL:()=>l,jx:()=>u,pk:()=>s,sQ:()=>h});var a=n(9985),o=t([a]);a=(o.then?(await o)():o)[0];const s=1200,i="scens",c="delivs",h="delivs_unord",u=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const e of t){e[i]=e[i];for(const t of e[i]){const e=t[c].map((t=>Math.min(Math.max(0,t),s)));t[h]=e,t[c]=Array.from(e).sort(((t,e)=>e-t))}e[i]=(0,a.Et)(e[i],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(t=>{let{obj:e}=t;return e}))}(),l=Object.keys(u),f=Object.keys(Object.values(u)[0][i]);r()}catch(s){r(s)}}),1)},9985:(t,e,n)=>{n.a(t,(async(t,r)=>{try{n.d(e,{C5:()=>T,Et:()=>d,Ft:()=>H,Ng:()=>S,Ul:()=>_,XC:()=>m,Yb:()=>z,bp:()=>P,cv:()=>q,hh:()=>B,i7:()=>U,iJ:()=>N,js:()=>p,nC:()=>R,si:()=>g,u:()=>Y,xC:()=>I});var a=n(3981),o=n(5760),s=n(3783),i=n.n(s),c=n(5043),h=n(63),u=n(1684),l=t([h]);function d(t,e){const n=Object.groupBy(t,e);for(const r of Object.keys(n))n[r]=n[r][0];return n}h=(l.then?(await l)():l)[0];const m={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}},p="M0,-1L0.5,-0.5A0.707,0.707,0,1,1,-0.5,-0.5L0,-1Z";function g(t){return t-=.0088,Math.min(1,Math.max(0,(3.1304*t**3-4.2384*t**2+3.3471*t+.0298)/2.2326))}const M=Math.SQRT1_2,v=1,y=M+M,k=v+M,x=.75;function b(t){if(t>=x){return Math.SQRT1_2*(1-t)/(1-x)}const e=2*(1-t/(y/k))-1,n=Math.acos(e);return Math.sin(n)}function w(t){return(t-M/k)*(1+Math.SQRT2)}function j(t){return t/(1+Math.SQRT2)+M/k}function P(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const r=n/2/v*M,a=.1,o=[],s=[];let i,c,h,u;for(let p=1;p<=Math.ceil(10)&&(i=b(t+(p-1)*a),c=w(t+(p-1)*a),h=b(t+p*a),u=w(t+p*a),!(j(u)>=e));p++){const t=[-i*r,-c*r],e=[i*r,-c*r],n=[h*r,-u*r],a=[-h*r,-u*r];o.push(e,n),s.push(t,a)}h=b(e),u=w(e);const l=[-i*r,-c*r],f=[i*r,-c*r],d=[h*r,-u*r],m=[-h*r,-u*r];return o.push(f,d),s.push(l,m),o.push(...s.reverse()),o}function S(t,e){let n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:2;if(Math.abs(t-e)<.01)return[];const r=n/2/v*M,a=.1,o=[];let s,i,c,h;for(let m=1;m<=Math.ceil(10)&&(s=b(t+(m-1)*a),i=w(t+(m-1)*a),c=b(t+m*a),h=w(t+m*a),!(j(h)>=e));m++){const t=[-s*r,-i*r],e=[s*r,-i*r],n=[c*r,-h*r],a=[-c*r,-h*r];o.push([t,e,n]),o.push([t,n,a])}c=b(e),h=w(e);const u=[-s*r,-i*r],l=[s*r,-i*r],f=[c*r,-h*r],d=[-c*r,-h*r];return o.push([u,l,f]),o.push([u,f,d]),o}function T(t,e){return function(n){return e.map((function(e){return[e,o.mean(n,(function(n){return t(e-n)}))]}))}}function I(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function C(t){const e=t/2,n=3*Math.PI/2/16,r=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let a=0;a<=16;a++)r.push({x:Math.cos(a*n-Math.PI/4)*e,y:Math.sin(a*n-Math.PI/4)*e});return r}function F(t,e){const n=i().Bounds.create(t),r=n.min.x,a=n.max.x,s=n.min.y,c=n.max.y,h=o.scaleLinear([r,a]),u=o.scaleLinear([s,c]),l=[];for(let o=0;o<e;o++)for(;;){const e=h(Math.random()),n=u(Math.random());if(i().Vertices.contains(t,{x:e,y:n})){l.push([e,n]);break}}return l}const Z=function(){const t=C(3),e=C(1),n=[];for(let r=0;r<t.length-2;r++)n.push([t[r],t[r+(r<2?1:2)],e[r+(r<2?1:2)],e[r]]);return n}();let O,E,Q,V;function L(t){const e=o.sum(t.map((t=>t**2*3.14)));return Math.floor(2*Math.sqrt(e/3.14)/2)}function B(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]&&arguments[3];if(r&&Q&&n.length===V)return Q;O&&n.length===E||(O=o.range(4).map((()=>F(C(1),E=n.length))));const a=L(n.map((t=>{let{r:e}=t;return e}))),s=O[Math.floor(Math.random()*O.length)].map((t=>{let[e,n]=t;return[e*a,n*a]})),c=i().Engine,h=i().Bodies,u=i().Composite,l=c.create(),f=s.sort(((t,e)=>e[1]-t[1])),d=n.map(((t,e)=>{let{r:n,id:r}=t;const[a,o]=f[e];return h.circle(a,o,n,{restitution:0,id:r})})),m=Z.map((t=>i().Body.create({position:i().Vertices.centre(t),vertices:t,isStatic:!0}))),p=i().Body.create({isStatic:!0});i().Body.setParts(p,m),i().Body.setCentre(p,{x:0,y:0}),i().Body.scale(p,a,a),u.add(l.world,[...d,p]);for(let o=0,i=60,M=.1;o<i*M;o++)c.update(l,1e3/i);const g=d.map((n=>{let{position:r,id:a}=n;return{id:a,x:r.x+t,y:r.y+e}}));return g.height=a/2/M*k,!r||Q&&g.length===V||(Q=g,V=g.length),g}function R(t,e){const[n,r]=(0,c.useState)(t);return[(0,c.useMemo)((()=>e(n)),[n]),(0,c.useCallback)((t=>{r(e(t))}),[])]}function q(t,e,n,r){const a=n[t][h.Vk][e][h.Zl];return o.scaleLinear().domain((0,u.kd)(0,1,a.length)).range(a.map((t=>Math.min(1,t/r)))).clamp(!0)}function z(t,e,n){return"median"===t?Object.keys(e[n][h.Vk]).sort(((t,r)=>o.mean(e[n][h.Vk][t][h.Zl])-o.mean(e[n][h.Vk][r][h.Zl]))):"deliveries"===t?Object.keys(e[n][h.Vk]).sort(((t,r)=>o.max(e[n][h.Vk][t][h.Zl])-o.max(e[n][h.Vk][r][h.Zl]))):"alphabetical"===t?Object.keys(e[n][h.Vk]).sort():void 0}function A(t,e,n){var r;const a=e.split(".");for(let o of a){if(!t)return n;t=t[o]}return null!==(r=t)&&void 0!==r?r:n}function X(t){return"string"===typeof t?e=>A(e,t):t}function _(t,e){return e=X(e),t.sort(((t,n)=>{const r=e(t),a=e(n);return r<a?-1:r>a?1:0}))}function G(t){return t*Math.PI/180}class U{constructor(t){let{fov:e,near:n,far:r,width:s,height:i,domElement:c,zoomFn:h}=t;this.raycaster=new a.tBo,this.fov=e,this.near=n,this.far=r,this.width=s,this.height=i,this.camera=new a.ubm(e,s/i,n,r+1),this.camera.position.set(0,0,this.far),this.zoom=o.zoom().scaleExtent([this.getScaleFromZ(this.far),this.getScaleFromZ(this.near)]).on("zoom",(t=>{this.d3ZoomHandler(t),this.curTransform=t.transform,h&&h(t)})),this.view=o.select(c),this.view.call(this.zoom),this.zoom.transform(this.view,o.zoomIdentity.translate(this.width/2,this.height/2).scale(this.getScaleFromZ(this.far)))}d3ZoomHandler(t){const e=t.transform.k,n=-(t.transform.x-this.width/2)/e,r=(t.transform.y-this.height/2)/e,a=this.getZFromScale(e);this.camera.position.set(n,r,a)}getScaleFromZ(t){const e=G(this.fov/2),n=2*(Math.tan(e)*t);return this.height/n}getZFromScale(t){const e=G(this.fov/2);return this.height/t/(2*Math.tan(e))}intersectObject(t,e,n){return this.raycaster.setFromCamera({x:t,y:e},this.camera),this.raycaster.intersectObject(n)}}class Y{constructor(){this.threeGeom=new a.V23,this.idx=0}addMeshCoords(t,e,n){let r=arguments.length>3&&void 0!==arguments[3]?arguments[3]:0;const o=[];for(let s=0;s<t.length;s++){const[i,c,h]=t[s],u=new a.Pq0(e.x+i[0],e.y-i[1],r),l=new a.Pq0(e.x+c[0],e.y-c[1],r),f=new a.Pq0(e.x+h[0],e.y-h[1],r);this.threeGeom.vertices.push(u,l,f);const d=new a.nFj(3*this.idx+0,3*this.idx+1,3*this.idx+2);n&&(d.vertexColors.push(n),d.vertexColors.push(n),d.vertexColors.push(n)),this.threeGeom.faces.push(d),o.push(this.idx++)}return o}}function H(t,e,n,r){return{x:t/n*2-1,y:-e/r*2+1}}function N(t){const[e,n]=(0,c.useState)(t),r=(0,c.useRef)(t);(0,c.useEffect)((()=>{r.current=e}),[e]);const a=(0,c.useCallback)((t=>{n(r.current=t)}),[]);return[e,a,r]}r()}catch(f){r(f)}}))}}]);
//# sourceMappingURL=687.2ce67955.chunk.js.map