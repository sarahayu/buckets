"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[91],{5091:(e,n,r)=>{r.a(e,(async(e,t)=>{try{r.r(n),r.d(n,{default:()=>f});var s=r(5043),a=r(5760),c=r(63),l=r(1684),i=r(5111),o=r(2267),d=r(6058),u=r(8139),m=r.n(u),h=r(7343),v=r(579),p=e([c,o,d,h]);[c,o,d,h]=p.then?(await p)():p;const j=200,N="DEL_CVP_PAG_N",S="expl0000",k="median",b=(0,s.createContext)({});function f(e){let{data:n=c.jx}=e;const{current:r}=(0,s.useRef)(Object.keys(n)),{goal:t,showScens:a,sortMode:l,curObjectiveName:d,curScenName:u,curScenNamePreview:m,setGoal:h,setShowScens:p,setSortMode:x,setCurObjectiveName:j,setCurScenName:N,setCurScenNamePreview:S}=y(),{curDelivInterps:k,curOrderedScenNames:f}=C(n,r,d,u,m,l),P=(0,s.useMemo)((()=>k[d]),[d,k]),A=m||u;return(0,v.jsxs)(b.Provider,{value:{data:n,goal:t,curObjectiveName:d,curScenName:u,curScenNamePreview:m,curOrderedScenNames:f},children:[(0,v.jsxs)("div",{className:"old-dashboard",children:[(0,v.jsx)("div",{className:"old-slider-container",children:(0,v.jsx)(w,{setCurScenName:N,setShowScens:p})}),(0,v.jsxs)("div",{className:"old-bucket-map-container",children:[(0,v.jsx)(M,{levelInterp:P}),(0,v.jsx)("div",{className:"old-other-buckets-container",children:r.map((e=>(0,v.jsx)(g,{label:e,active:e!==d,onClick:()=>{j(e)},children:(0,v.jsx)(i.A,{levelInterp:k[e],width:50,height:50})},e)))})]}),(0,v.jsx)("div",{className:"old-pdf-container",children:(0,v.jsx)(o.A,{data:n[d][c.Vk][A][c.Zl],goal:t,setGoal:h})})]}),a&&(0,v.jsx)(O,{sortMode:l,setSortMode:x,setCurScenName:N,setCurScenNamePreview:S})]})}function y(){const[e,n]=(0,s.useState)(j),[r,t]=(0,s.useState)(!1),[a,c]=(0,s.useState)(k),[l,i]=(0,s.useState)(N),[o,d]=(0,s.useState)(S),[u,m]=(0,s.useState)(null);return{goal:e,setGoal:n,showScens:r,setShowScens:t,sortMode:a,setSortMode:c,curObjectiveName:l,setCurObjectiveName:i,curScenName:o,setCurScenName:d,curScenNamePreview:u,setCurScenNamePreview:m}}function C(e,n,r,t,a,c){const l=(0,s.useMemo)((()=>(0,h.Yb)(c,e,r)),[c,r]);return{curDelivInterps:(0,s.useMemo)((()=>A(e,n,a||t)),[t,a]),curOrderedScenNames:l}}function g(e){let{label:n,active:r,onClick:t,children:s}=e;return(0,v.jsxs)("div",{className:m()("old-bucket-and-label",{"old-cur-obj":!r}),onClick:t,title:n,children:[(0,v.jsx)("span",{children:n}),s]})}function w(e){let{setCurScenName:n,setShowScens:r}=e;const{curScenName:t,curScenNamePreview:a,curOrderedScenNames:c}=(0,s.useContext)(b),l=a||t;return(0,v.jsxs)(v.Fragment,{children:[(0,v.jsx)("input",{className:"old-input-range",orient:"vertical",type:"range",value:c.indexOf(l),min:"0",max:c.length-1,onChange:e=>{n(c[parseInt(e.target.value)])}}),(0,v.jsxs)("div",{className:"old-scen-name",children:[(0,v.jsx)("span",{children:"Current Scenario"}),(0,v.jsx)("span",{children:l}),(0,v.jsx)("span",{className:m()("old-preview-indic",{"old-visible":null!==a}),children:"Previewing"}),(0,v.jsx)("button",{onClick:()=>{r((e=>!e))},children:"See Overview"})]})]})}function M(e){let{levelInterp:n}=e;const{curObjectiveName:r,goal:t}=(0,s.useContext)(b);return(0,v.jsx)("div",{className:"old-bucket-viz",children:(0,v.jsxs)("div",{className:"old-bucket-viz-container",children:[(0,v.jsx)("span",{className:"old-main-bucket-label",children:r}),(0,v.jsx)(i.A,{levelInterp:n,width:100,height:100}),(0,v.jsxs)("div",{className:"old-bucket-razor",style:{top:a.scaleLinear().domain([0,c.pk]).range([100,0])(t)+"px"},children:[(0,v.jsx)("p",{children:"Goal"}),(0,v.jsxs)("p",{children:[a.format(".0f")(t)," ",(0,v.jsx)("span",{children:"TAF"})]})]})]})})}function O(e){let{sortMode:n,setSortMode:r,setCurScenName:t,setCurScenNamePreview:i}=e;const{data:o,curObjectiveName:u,curScenName:h,curScenNamePreview:p,curOrderedScenNames:x,goal:j}=(0,s.useContext)(b),N=(0,s.useMemo)((()=>Array.from(x).reverse().filter(((e,n)=>e===h||(0,l.kd)(0,.9,20).map((e=>Math.floor((e+.05)*x.length))).includes(n)))),[x,h]);return(0,v.jsxs)("div",{className:"old-ridgeline-overlay",children:[(0,v.jsxs)("div",{className:"old-sort-types",children:[(0,v.jsx)("input",{type:"radio",name:"sort-type",value:"median",id:"median",checked:"median"===n,onChange:()=>{r("median")}}),(0,v.jsx)("label",{htmlFor:"median",children:"Median"}),(0,v.jsx)("input",{type:"radio",name:"sort-type",value:"deliveries",id:"deliveries",checked:"deliveries"===n,onChange:()=>{r("deliveries")}}),(0,v.jsx)("label",{htmlFor:"deliveries",children:"Max. Deliveries"}),(0,v.jsx)("input",{type:"radio",name:"sort-type",value:"alphabetical",id:"alphabetical",checked:"alphabetical"===n,onChange:()=>{r("alphabetical")}}),(0,v.jsx)("label",{htmlFor:"alphabetical",children:"Alphabetical"})]}),(0,v.jsxs)("div",{className:m()("old-overlay-container",{"old-previewing":null!==p}),onMouseLeave:()=>i(null),children:[(0,v.jsx)(P,{keyList:N,children:N.map((e=>(0,v.jsxs)("div",{className:m()({"old-previewing":e===p,"old-current-scene":e===h}),onMouseEnter:()=>i(e),onClick:()=>{t(e)},children:[(0,v.jsx)(d.A,{data:o[u][c.Vk][e][c.Zl],goal:j,width:300,height:200}),(0,v.jsx)("span",{children:e})]},e)))}),(0,v.jsx)("div",{className:"old-dot-overlay-razor",style:{left:a.scaleLinear().domain([0,c.pk]).range([0,300])(j)+"px"}})]})]})}function P(e){let{keyList:n,children:r}=e;const t=(0,s.useRef)({}),a=(0,s.useRef)({}),c=(0,s.useRef)({});return(0,s.useLayoutEffect)((()=>{a.current={};for(const e in t.current)a.current[e]=t.current[e];t.current={};for(const e in c.current)t.current[e]=c.current[e].getBoundingClientRect();Object.keys(a.current).length&&s.Children.forEach(r,(e=>{const n=t.current[e.key],r=a.current[e.key];if(void 0===r||void 0===n)return;const s=n.top-r.top;s&&requestAnimationFrame((()=>{c.current[e.key].style.transform="translateY(".concat(-s,"px)"),c.current[e.key].style.transition="transform 0s",requestAnimationFrame((()=>{c.current[e.key].style.transform="",c.current[e.key].style.transition="transform 500ms"}))}))}))}),[n]),c.current={},s.Children.map(r,(e=>s.cloneElement(e,{ref:n=>{n&&(c.current[e.key]=n)}})))}function A(e,n,r){const t={};return n.forEach((n=>{const s=e[n][c.Vk][r][c.Zl];t[n]=a.scaleLinear().domain((0,l.kd)(0,1,s.length)).range(s.map((e=>Math.min(1,e/c.pk)||0))).clamp(!0)})),t}t()}catch(x){t(x)}}))}}]);
//# sourceMappingURL=91.411f32ad.chunk.js.map