/*! For license information please see 988.cd33e543.chunk.js.LICENSE.txt */
(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[988],{267:(e,t,r)=>{"use strict";r.a(e,(async(e,n)=>{try{r.d(t,{A:()=>m});var a=r(92),s=r(43),c=r(987),l=r(829),o=r(63),i=r(579),u=e([o]);o=(u.then?(await u)():u)[0];const h=20,p={top:10,right:30,bottom:50,left:50},f=[0,o.pk];function m(e){let{data:t,goal:r,setGoal:n,width:o=600,height:u=400}=e;const d=(0,s.useRef)(),m=(0,s.useMemo)((()=>(0,c.u)(t,f,t.length/h,o,u)),[t]),v=[0,t.length],g=a.m4Y().domain(f).range([0,o]),x=a.m4Y().domain(v).range([u,0]),y=m.filter((e=>e[0]>r)).length;return(0,s.useEffect)((()=>{d.current.attr("width",o+p.left+p.right).attr("height",u+p.top+p.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(p.left,",").concat(p.top,")")).append("g").attr("transform","translate(0, ".concat(u,")")).call(a.l78().scale(a.m4Y().domain(f).range([0,o]))).call((e=>{e.selectAll("line").attr("stroke","gray"),e.selectAll("path").attr("stroke","gray"),e.selectAll("text").attr("fill","gray")})).append("text").attr("fill","black").attr("transform","translate(".concat(o/2,", ",30,")")).text("Delivery (TAF)");const e=document.querySelector("#pdf-razor");e.style.transform="translateX(".concat(a.m4Y().domain(f).range([p.left,o+p.left]).clamp(!0)(r),"px)");const t=e=>e.preventDefault();let s=!1;document.querySelector("#pdf-razor").addEventListener("mousedown",(()=>{s=!0,window.addEventListener("selectstart",t)})),document.addEventListener("mouseup",(()=>{s=!1,window.removeEventListener("selectstart",t)})),document.querySelector("#pdf-wrapper").addEventListener("mousemove",(t=>{s&&"pdf-wrapper"===t.target.id&&(e.style.transform="translateX(".concat(Math.min(Math.max(t.offsetX,p.left),p.left+o),"px)\n            "),n(a.m4Y().domain([p.left,o+p.left]).range(f).clamp(!0)(t.offsetX)))}))}),[]),(0,s.useEffect)((()=>{const e=d.current.select(".graph-area").selectAll(".icons").data(m).join((e=>e.append("g").call((e=>e.append("path"))))).attr("class","icons").call((e=>{e.selectAll("path").attr("d",a.HRO(l.XC,u/h))}));e.transition("position").delay((e=>100*a.m4Y(v).invert(e[1]))).duration(500).attr("transform",(e=>"translate(".concat(g(e[0]),",").concat(x(e[1]),")"))),e.transition("color").delay((e=>100*a.m4Y(v).invert(e[1]))).duration(0).attr("fill",(e=>e[0]>r?"steelblue":"black"))}),[r,m]),(0,i.jsxs)("div",{className:"dot-pdf-wrapper",id:"pdf-wrapper",children:[(0,i.jsx)("div",{className:"pdf-razor",id:"pdf-razor",children:(0,i.jsxs)("div",{children:[(0,i.jsxs)("span",{children:[m.length-y," out of ",h," years WILL NOT meet demand"]}),(0,i.jsxs)("span",{children:[y," out of ",h," years WILL meet demand"]})]})}),(0,i.jsx)("svg",{ref:e=>{d.current=a.Ltv(e)}})]})}n()}catch(d){n(d)}}))},58:(e,t,r)=>{"use strict";r.a(e,(async(e,n)=>{try{r.d(t,{A:()=>m});var a=r(92),s=r(43),c=r(987),l=r(829),o=r(63),i=r(579),u=e([o]);o=(u.then?(await u)():u)[0];const h=20,p={top:10,right:10,bottom:3,left:0},f=[0,o.pk];function m(e){let{data:t,goal:r,width:n=600,height:u=400}=e;const d=(0,s.useRef)(),m=(0,s.useMemo)((()=>(0,c.u)(t,f,t.length/h,n,u)),[t]);return(0,s.useEffect)((()=>{const e=d.current.attr("width",n+p.left+p.right).attr("height",u+p.top+p.bottom).style("pointer-events","none").append("g").attr("class","graph-area").attr("transform","translate(".concat(p.left,",").concat(p.top,")"));e.append("g").attr("transform","translate(0, ".concat(u,")")).call((e=>{e.selectAll("line").attr("stroke","gray"),e.selectAll("path").attr("stroke","gray")})),e.append("path").attr("class","ridgeline").attr("fill","none").attr("stroke","steelblue")}),[]),(0,s.useEffect)((()=>{const e=a.m4Y().domain(f).range([0,n]),r=a.m4Y().domain([0,.05]).range([u,0]).clamp(!0),s=(0,l.C5)((0,l.xC)(20),e.ticks(o.pk/4));d.current.select(".graph-area").select(".ridgeline").datum(s(t)).attr("d",a.n8j().curve(a.qrM).x((t=>e(t[0]))).y((e=>r(e[1]))))}),[t]),(0,s.useEffect)((()=>{const e=a.m4Y().domain(f).range([0,n]),s=a.m4Y().domain([0,t.length]).range([u,0]);d.current.select(".graph-area").selectAll(".icons").data(m).join((e=>e.append("g").attr("class","icons").call((e=>e.append("path"))))).call((e=>{e.select("path").attr("d",a.HRO(l.XC,u/h))})).attr("transform",(t=>"translate(".concat(e(t[0]),",").concat(s(t[1]),")"))).attr("fill",(e=>e[0]>r?"steelblue":"black"))}),[r,m]),(0,i.jsx)("svg",{className:"dot-pdf-shadowed",ref:e=>{d.current=a.Ltv(e)}})}n()}catch(d){n(d)}}))},988:(e,t,r)=>{"use strict";r.a(e,(async(e,n)=>{try{r.r(t),r.d(t,{default:()=>k});var a=r(43),s=r(92),c=r(63),l=r(684),o=r(111),i=r(267),u=r(58),d=r(139),h=r.n(d),p=r(579),f=e([c,i,u]);[c,i,u]=f.then?(await f)():f;const v=200,g=13,x="median",y=(0,a.createContext)({});function k(e){let{data:t=c.jx}=e;const{current:r}=(0,a.useRef)(Object.keys(t)),[n,s]=(0,a.useState)(v),[u,d]=(0,a.useState)(!1),[h,f]=(0,a.useState)(x),[m,k]=(0,a.useState)(r[g]),[I,C]=(0,a.useState)(0),[P,A]=(0,a.useState)(null),{curDelivInterps:E,curPercentileScens:N,curOrderedScenIDs:O}=j(t,r,m,I,P,h),D=(0,a.useMemo)((()=>E[m]),[I,P]),L=(0,l.ZC)(O[I]),Y=O[I],z=null!==P?O[P]:null,q=z||Y;return(0,a.useEffect)((()=>{L&&C(O.indexOf(L))}),[h,m]),(0,p.jsxs)(y.Provider,{value:{data:t,objectiveIDs:r,sortMode:h,curObjectiveID:m,curScenIdx:I,curScenPreviewIdx:P,curScenID:q,curScenIDPreview:z,curScenIDActual:Y,curPercentileScens:N,goal:n,showScens:u,curOrderedScenIDs:O},children:[(0,p.jsxs)("div",{className:"dashboard",children:[(0,p.jsx)("div",{className:"slider-container",children:(0,p.jsx)(w,{setCurScenIdx:C,setShowScens:d})}),(0,p.jsxs)("div",{className:"bucket-map-container",children:[(0,p.jsx)(S,{levelInterp:D}),(0,p.jsx)("div",{className:"other-buckets-container",children:r.map((e=>(0,p.jsx)(b,{label:e,active:e!==m,onClick:()=>k(e),children:(0,p.jsx)(o.A,{levelInterp:E[e],width:50,height:50})},e)))})]}),(0,p.jsx)("div",{className:"pdf-container",children:(0,p.jsx)(i.A,{data:t[m][c.Vk][q][c.Zl],goal:n,setGoal:s})})]}),u&&(0,p.jsx)(M,{setSortMode:f,setCurScenIdx:C,setCurScenPreviewIdx:A})]})}function j(e,t,r,n,s,c){const o=(0,a.useMemo)((()=>P(c,e,r)),[c,r]),i=o[n],u=(null!==s?o[s]:null)||i;return{curDelivInterps:(0,a.useMemo)((()=>C(e,t,u)),[n,s]),curPercentileScens:(0,a.useMemo)((()=>Array.from(o).reverse().filter(((e,t)=>e===u||(0,l.kd)(0,.9,20).map((e=>Math.floor((e+.05)*o.length))).includes(t)))),[n]),curOrderedScenIDs:o}}function b(e){let{label:t,active:r,onClick:n,children:a}=e;return(0,p.jsxs)("div",{className:h()("bucket-and-label",{"cur-obj":!r}),onClick:n,children:[(0,p.jsx)("span",{children:t}),a]})}function w(e){let{setCurScenIdx:t,setShowScens:r}=e;const{curScenPreviewIdx:n,curScenIdx:s,curOrderedScenIDs:c,curScenID:l}=(0,a.useContext)(y);return(0,p.jsxs)(p.Fragment,{children:[(0,p.jsx)("input",{className:"input-range",orient:"vertical",type:"range",value:null===n?s:n,min:"0",max:c.length-1,onChange:e=>{t(e.target.value)}}),(0,p.jsxs)("div",{className:"scen-name",children:[(0,p.jsx)("span",{children:"Current Scenario"}),(0,p.jsx)("span",{children:l}),(0,p.jsx)("span",{className:h()("preview-indic",{visible:null!==n}),children:"Previewing"}),(0,p.jsx)("button",{onClick:()=>{r((e=>!e))},children:"See Overview"})]})]})}function S(e){let{levelInterp:t}=e;const{curObjectiveID:r,goal:n}=(0,a.useContext)(y);return(0,p.jsx)("div",{className:"bucket-viz",children:(0,p.jsxs)("div",{className:"bucket-viz-container",children:[(0,p.jsx)("span",{className:"main-bucket-label",children:r}),(0,p.jsx)(o.A,{levelInterp:t,width:100,height:100}),(0,p.jsxs)("div",{className:"bucket-razor",style:{top:s.m4Y().domain([0,c.pk]).range([100,0])(n)+"px"},children:[(0,p.jsx)("p",{children:"Goal"}),(0,p.jsxs)("p",{children:[s.GPZ(".0f")(n)," ",(0,p.jsx)("span",{children:"TAF"})]})]})]})})}function M(e){let{setSortMode:t,setCurScenIdx:r,setCurScenPreviewIdx:n}=e;const{data:l,sortMode:o,curObjectiveID:i,curScenPreviewIdx:d,curScenIDPreview:f,curScenIDActual:m,curOrderedScenIDs:v,goal:g,curPercentileScens:x}=(0,a.useContext)(y);return(0,p.jsxs)("div",{className:"ridgeline-overlay",children:[(0,p.jsxs)("div",{className:"sort-types",children:[(0,p.jsx)("input",{type:"radio",name:"sort-type",value:"median",id:"median",checked:"median"===o,onChange:()=>{t("median")}}),(0,p.jsx)("label",{htmlFor:"median",children:"Median"}),(0,p.jsx)("input",{type:"radio",name:"sort-type",value:"deliveries",id:"deliveries",checked:"deliveries"===o,onChange:()=>{t("deliveries")}}),(0,p.jsx)("label",{htmlFor:"deliveries",children:"Max. Deliveries"})]}),(0,p.jsxs)("div",{className:h()("overlay-container",{previewing:null!==d}),onMouseLeave:()=>n(null),children:[(0,p.jsx)(I,{keyList:x,children:x.map((e=>(0,p.jsxs)("div",{className:h()({previewing:e===f,"current-scene":e===m}),onMouseEnter:()=>n(v.indexOf(e)),onClick:()=>{r(v.indexOf(e))},children:[(0,p.jsx)(u.A,{data:l[i][c.Vk][e][c.Zl],goal:g,width:300,height:200}),(0,p.jsx)("span",{children:e})]},e)))}),(0,p.jsx)("div",{className:"dot-overlay-razor",style:{left:s.m4Y().domain([0,c.pk]).range([0,300])(g)+"px"}})]})]})}function I(e){let{keyList:t,children:r}=e;const n=(0,a.useRef)({}),s=(0,a.useRef)({}),c=(0,a.useRef)({});return(0,a.useLayoutEffect)((()=>{s.current={};for(const e in n.current)s.current[e]=n.current[e];n.current={};for(const e in c.current)n.current[e]=c.current[e].getBoundingClientRect();Object.keys(s.current).length&&a.Children.forEach(r,(e=>{const t=n.current[e.key],r=s.current[e.key];if(void 0===r||void 0===t)return;const a=t.top-r.top;a&&requestAnimationFrame((()=>{c.current[e.key].style.transform="translateY(".concat(-a,"px)"),c.current[e.key].style.transition="transform 0s",requestAnimationFrame((()=>{c.current[e.key].style.transform="",c.current[e.key].style.transition="transform 500ms"}))}))}))}),[t]),c.current={},a.Children.map(r,(e=>a.cloneElement(e,{ref:t=>{t&&(c.current[e.key]=t)}})))}function C(e,t,r){const n={};return t.forEach((t=>{const a=e[t][c.Vk][r][c.Zl];n[t]=s.m4Y().domain((0,l.kd)(0,1,a.length)).range(a.map((e=>Math.min(1,e/c.pk)||0))).clamp(!0)})),n}function P(e,t,r){return"median"===e?Object.keys(t[r][c.Vk]).sort(((e,n)=>s.i2o(t[r][c.Vk][e][c.Zl])-s.i2o(t[r][c.Vk][n][c.Zl]))):"deliveries"===e?Object.keys(t[r][c.Vk]).sort(((e,n)=>s.T9B(t[r][c.Vk][e][c.Zl])-s.T9B(t[r][c.Vk][n][c.Zl]))):void 0}n()}catch(m){n(m)}}))},111:(e,t,r)=>{"use strict";r.d(t,{A:()=>u});var n=r(92),a=r(43),s=r(684),c=r(579);const l=40,o=10,i=3;function u(e){let{levelInterp:t,colorInterp:r=n.dM,width:u=200,height:d=400,resolution:h=o}=e;const p=(0,a.useId)(),f=(0,a.useRef)(),m=(0,a.useMemo)((()=>(0,s.kd)(0,1,h+1).map((e=>t(e)))),[t,h]),v=(0,s.ZC)(m),g=u-2*i,x=d-i;return(0,a.useLayoutEffect)((()=>{const e=f.current.append("g").attr("class","svg-container").attr("transform","translate(".concat(i,", ").concat(i/2,")"));e.append("defs").append("clipPath").attr("id","bucket-mask-"+p).append("path").attr("class","bucket-mask-path"),e.append("g").attr("class","graph-area").attr("clip-path","url(#bucket-mask-".concat(p,")")),e.append("g").append("path").attr("class","bucket-outline").attr("stroke","lightgray").attr("stroke-linecap","round").attr("stroke-width",i).attr("fill","none")}),[p]),(0,a.useLayoutEffect)((()=>{const e=f.current.attr("width",u).attr("height",d).select(".svg-container");e.select(".bucket-mask-path").attr("d",(0,s.wh)(g,x)),e.select(".bucket-outline").attr("d",(0,s.wh)(g,x).split("z")[0])}),[u,d,g,x]),(0,a.useLayoutEffect)((()=>{const e=f.current.select(".graph-area").selectAll(".bucketBox").data(m).join("rect").attr("class","bucketBox").attr("width",2*g).attr("height",2*x).attr("x",-g/2).attr("fill",((e,t)=>r(t/o)));e.transition("liquidLevel").ease(n.guX.period(.6)).delay(((e,t)=>t*(100/h))).duration(1e3).attr("y",(e=>x-e*x)),e.transition("liquidSway").duration(2e3).delay(((e,t)=>10*t)).ease(n.I1g).attrTween("transform",(function(e,t){const r=v?Math.abs(v[t]-e):0;return e=>"rotate(".concat(Math.sin(Math.min(4*Math.PI*e/(.5*r+.5),4*Math.PI))*r*l*(1-e),", ").concat(g/2,", ",0,")")}))}),[m,v,u,d,g,x,h,r]),(0,c.jsx)("div",{className:"bucket-wrapper",children:(0,c.jsx)("svg",{ref:e=>{f.current=n.Ltv(e)}})})}},987:(e,t,r)=>{"use strict";r.d(t,{u:()=>s});var n=r(92),a=r(684);function s(e,t,r,s,c){const l=e.length/r;let o=n.JWi().value((e=>e)).domain(t).thresholds((0,a.kd)(...t,Math.ceil(s/(c/l))))(e),i=(0,a.Q2)(o,r,l),u=[];for(let n=0;n<i.length;n++)for(let t=0;t<i[n];t++)u.push([(o[n].x1+o[n].x0)/2,(t+.5)/l*e.length]);return u}},684:(e,t,r)=>{"use strict";r.d(t,{Q2:()=>l,ZC:()=>o,kd:()=>s,wh:()=>c});var n=r(92),a=r(43);function s(e,t,r){return n.y17(r).map((n=>n/(r-1)*(t-e)+e))}function c(e,t){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,s=e*a+e*(1-a)/2,c=e*(1-a)/2,l=[{x:n.GWP(s,e)(r),y:n.GWP(t,0)(r)},{x:s,y:t},{x:c,y:t},{x:n.GWP(c,0)(r),y:n.GWP(t,0)(r)}];return n.n8j().x((function(e){return e.x})).y((function(e){return e.y}))(l)+"z"}function l(e,t,r){let a=e.map((e=>Math.round(e.length/t))),s=n.czq(a);for(;s>r;)a[n.z94(e,((e,r)=>0!==e.length?e.length/t-a[r]:1/0))]-=1,s=n.czq(a);for(;s<r;)a[n.P2Z(e,((e,r)=>0!==e.length?e.length/t-a[r]:-1/0))]+=1,s=n.czq(a);return a}function o(e,t){const r=(0,a.useRef)({value:e,prev:null}),n=r.current.value;return(t?t(e,n):e===n)||(r.current={value:e,prev:n}),r.current.prev}},63:(e,t,r)=>{"use strict";r.a(e,(async(e,n)=>{try{r.d(t,{Vk:()=>s,Zl:()=>c,jx:()=>l,pk:()=>e});var a=r(829);const e=1200,s="scens",c="delivs",l=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const r of t){for(const t of r[s])t[c]=t[c].map((t=>Math.min(Math.max(0,t),e))).sort(((e,t)=>t-e));r[s]=(0,a.Et)(r[s],(e=>{let{name:t}=e;return t}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(e=>{let{obj:t}=e;return t}))}();n()}catch(s){n(s)}}),1)},829:(e,t,r)=>{"use strict";r.d(t,{C5:()=>i,Et:()=>c,XC:()=>l,hh:()=>f,si:()=>o,xC:()=>u});var n=r(92),a=r(783),s=r.n(a);function c(e,t){const r=Object.groupBy(e,t);for(const n of Object.keys(r))r[n]=r[n][0];return r}const l={draw:function(e,t){e.moveTo(0,-t/2),e.lineTo(t/4,-t/4),e.arc(0,0,t/Math.sqrt(2)/2,-Math.PI/4,5*Math.PI/4),e.lineTo(0,-t/2),e.closePath()}};function o(e){return(3.1304*e**3-4.2384*e**2+3.3471*e+.0298)/2.4}function i(e,t){return function(r){return t.map((function(t){return[t,n.i2o(r,(function(r){return e(t-r)}))]}))}}function u(e){return function(t){return Math.abs(t/=e)<=1?.75*(1-t*t)/e:0}}function d(e){const t=e/2,r=3*Math.PI/2/20,n=[{x:Math.cos(5*Math.PI/4)*t,y:Math.sin(5*Math.PI/4)*t},{x:0,y:-Math.SQRT2*t}];for(let a=0;a<=20;a++)n.push({x:Math.cos(a*r-Math.PI/4)*t,y:Math.sin(a*r-Math.PI/4)*t});return n}const h=function(){const e=d(1.4),t=d(1),r=[];for(let n=0;n<e.length-1;n++)r.push([e[n],e[n+1],t[n+1],t[n]]);return r}();let p;function f(e,t,r){p=p||function(e,t){const r=s().Bounds.create(e),a=r.min.x,c=r.max.x,l=r.min.y,o=r.max.y,i=n.m4Y([a,c]),u=n.m4Y([l,o]),d=[];for(let n=0;n<t;n++)for(;;){const t=i(Math.random()),r=u(Math.random());if(s().Vertices.contains(e,{x:t,y:r})){d.push([t,r]);break}}return d}(d(1),r.length);const a=n.i2o(r.map((e=>{let{r:t}=e;return 2*t})))*Math.floor(Math.sqrt(r.length)),c=p.map((e=>{let[t,r]=e;return[t*a/2,r*a/2]})),l=s().Engine,o=s().Bodies,i=s().Composite,u=l.create(),f=c.sort(((e,t)=>t[1]-e[1])),m=r.map(((r,n)=>{let{r:a,id:s}=r;const[c,l]=f[n];return o.circle(c+e,l+t,2*a,{restitution:0,id:s})})),v=h.map((e=>s().Body.create({position:s().Vertices.centre(e),vertices:e,isStatic:!0}))),g=s().Body.create({isStatic:!0});s().Body.setParts(g,v),s().Body.scale(g,1.4*a,1.4*a),s().Body.translate(g,{x:e,y:t+a/2*.4}),i.add(u.world,[...m,g]);for(let n=0,s=60;n<1*s;n++)l.update(u,1e3/s);return m.map((e=>{let{position:t,id:r}=e;return{id:r,x:t.x,y:t.y}}))}},139:(e,t)=>{var r;!function(){"use strict";var n={}.hasOwnProperty;function a(){for(var e="",t=0;t<arguments.length;t++){var r=arguments[t];r&&(e=c(e,s(r)))}return e}function s(e){if("string"===typeof e||"number"===typeof e)return e;if("object"!==typeof e)return"";if(Array.isArray(e))return a.apply(null,e);if(e.toString!==Object.prototype.toString&&!e.toString.toString().includes("[native code]"))return e.toString();var t="";for(var r in e)n.call(e,r)&&e[r]&&(t=c(t,r));return t}function c(e,t){return t?e?e+" "+t:e+t:e}e.exports?(a.default=a,e.exports=a):void 0===(r=function(){return a}.apply(t,[]))||(e.exports=r)}()}}]);
//# sourceMappingURL=988.cd33e543.chunk.js.map