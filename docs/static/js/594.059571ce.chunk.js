"use strict";(self.webpackChunkbuckets=self.webpackChunkbuckets||[]).push([[594],{594:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.r(e),r.d(e,{default:()=>g});var a=r(53),c=r(43),o=r(684),s=r(63),l=r(829),i=r(216),u=r(579),h=t([s,l]);[s,l]=h.then?(await h)():h;const p=5,f=3,m=.1,y=20,x=1.5;function g(t){let{watercolor:e=!1}=t;const{current:r}=(0,c.useRef)(Object.keys(s.jx)),n=(0,i.Zp)(),h=(0,c.useRef)(),[d,g]=(0,c.useState)(!1),v=(0,c.useRef)(),b=(0,c.useMemo)((()=>{const t={},e={};r.forEach((e=>t[e]=(0,l.Yb)("median",s.jx,e).filter(((t,e)=>e%y==0)).reverse()));const n=Math.floor(t[r[0]].length/2);return r.sort(((e,r)=>a.JZy(s.jx[e][s.Vk][t[e][n]][s.Zl])-a.JZy(s.jx[r][s.Vk][t[r][n]][s.Zl]))).forEach((r=>{e[r]=t[r]})),e}),[]),M=(0,c.useMemo)((()=>{const t={};return r.forEach((e=>{t[e]=b[e].map((t=>{const r=(0,l.cv)(e,t,s.jx,s.pk);return(0,o.kd)(0,1,p+1).map((t=>r(t)))}))})),t}),[]),j=(0,c.useRef)();return(0,c.useLayoutEffect)((()=>{h.current={width:window.innerWidth,height:window.innerHeight},j.current=a.s_O().scaleExtent([1,10]).translateExtent([[-h.current.width/2,-h.current.height/2],[1.5*h.current.width,1.5*h.current.height]]).on("zoom",(function(t){v.current.select(".svg-trans").attr("transform",t.transform),v.current.selectAll(".text-scale").attr("transform","scale(".concat(1/t.transform.k,")"))})).on("start",(t=>"wheel"!==(t.sourceEvent||{}).type&&v.current.style("cursor","grabbing"))).on("end",(()=>v.current.style("cursor","grab"))),v.current.attr("width",h.current.width).attr("height",h.current.height).style("cursor","grab").call((t=>t.append("g").attr("class","svg-trans"))).call(j.current)}),[]),(0,c.useLayoutEffect)((()=>{const t=h.current.width,e=h.current.height;v.current.call(j.current.transform,a.GSI);const r=Object.keys(M).map((t=>(0,l.hh)(0,0,M[t].map(((t,e)=>({r:Math.max(2,1*(d?1:Math.max(t[0],m))*f*x),id:e})))).map((e=>{let{id:r,x:n,y:a}=e;return{levs:M[t][r].map(((e,n)=>1*Math.max(e,0==n?m:0)*(d?1/Math.max(M[t][r][0],m):1)*f)),maxLev:(d?1:1*Math.max(M[t][r][0],m))*f,tilt:50*Math.random()-25,dur:100*Math.random()+400,startX:n,startY:a,obj:t}})))).reverse(),c={},s=(0,l.hh)(0,0,r.map(((t,e)=>({r:c[e]=Math.max(1,8*Math.sqrt(a.czq(t.map((t=>t.maxLev)))/Math.PI)),id:e})))).map(((t,e)=>{let{x:r,y:n}=t;return{x:r,y:n,tilt:50*Math.random()-25,r:c[e]}}));v.current.select(".svg-trans").selectAll(".largeDrop").data(r,((t,e)=>t[0].obj)).join((t=>t.append("g").each((function(t,e){const r=a.Ltv(this);a.Ltv(this.parentNode).append("g").attr("id","drop-".concat(e)).append("g").attr("class","text-scale").append("text").style("font-size",16).attr("text-anchor","middle"),r.append("g").attr("class","rotateClass"),r.append("rect").attr("class","bbox").style("visibility","hidden"),r.on("mouseover",(function(){v.current.selectAll(".largeDrop").style("opacity",.5),r.style("opacity",1),v.current.select("#drop-".concat(e)).style("opacity",1)})).on("mouseout",(function(){v.current.selectAll(".largeDrop").style("opacity",1),v.current.select("#drop-".concat(e)).style("opacity",0)}))})))).attr("class","largeDrop").attr("transform",((r,n)=>"translate(".concat(s[n].x+t/2,", ").concat(s[n].y+e/2,")"))).each((function(t,e){const r=a.Ltv(this);a.Ltv("#drop-".concat(e)).style("opacity",0).select("text").text(t[0].obj),a.Ltv(this).select(".rotateClass").attr("transform","rotate(".concat(s[e].tilt,")")).selectAll(".smallDrop").data(t,((t,e)=>e)).join((t=>t.append("g").attr("class","smallDrop").each((function(t,r){let{levs:n}=t;const c=a.Ltv(this).append("defs").append("linearGradient").attr("id","drop-fill-".concat(e,"-").concat(r)).attr("x1","0%").attr("x2","0%").attr("y1","0%").attr("y2","100%");n.forEach(((t,e)=>{c.append("stop").attr("stop-color",(0,o.YW)(e/p)),c.append("stop").attr("stop-color",(0,o.YW)(e/p))})),a.Ltv(this).append("path").attr("d",l.js).attr("fill","url(#drop-fill-".concat(e,"-").concat(r,")"))})))).attr("transform",(t=>{let{startX:e,startY:r,tilt:n}=t;return"translate(".concat(e,", ").concat(r,") rotate(").concat(n,")")})).each((function(t){let{levs:e,maxLev:r}=t;a.Ltv(this).selectAll("path").attr("transform","scale(".concat(r,")")),a.Ltv(this).selectAll("stop").each((function(t,n){let c=Math.floor(n/2);0===n%2&&(c-=1),-1===c?a.Ltv(this).attr("offset","".concat(0,"%")):a.Ltv(this).attr("offset","".concat(100*(1-e[c]/r),"%"))}))}));const c=r.select(".rotateClass");r.on("click",(function(){n("/RecursiveDropletsBasicApp?obj=".concat(t[0].obj,"&norm=").concat(d?"true":"false"))})),r.select(".bbox").attr("x",c.node().getBBox().x).attr("y",c.node().getBBox().y).attr("width",c.node().getBBox().width).attr("height",c.node().getBBox().height),v.current.select("#drop-".concat(e)).attr("transform","translate(".concat(c.node().getBoundingClientRect().x+c.node().getBoundingClientRect().width/2,", ").concat(c.node().getBoundingClientRect().y,")"))}))}),[M,d]),(0,u.jsxs)("div",{className:"bubbles-wrapper",children:[(0,u.jsxs)("div",{className:"bubbles-input-area",children:[(0,u.jsx)("input",{type:"checkbox",id:"norm",checked:d,onChange:()=>{g((t=>!t))}}),(0,u.jsx)("label",{htmlFor:"norm",children:"normalize"})]}),(0,u.jsx)("div",{className:"bubbles-svg-wrapper"+(e?"-painter":""),children:(0,u.jsx)("svg",{className:"bubbles-svg"+(e?"-painter":""),ref:t=>{v.current=a.Ltv(t)}})})]})}n()}catch(d){n(d)}}))},684:(t,e,r)=>{r.d(e,{Q2:()=>s,YW:()=>i,ZC:()=>l,kd:()=>c,wh:()=>o});var n=r(53),a=r(43);function c(t,e,r){return n.y17(r).map((n=>n/(r-1)*(e-t)+t))}function o(t,e){let r=arguments.length>2&&void 0!==arguments[2]?arguments[2]:1,a=arguments.length>3&&void 0!==arguments[3]?arguments[3]:.8,c=t*a+t*(1-a)/2,o=t*(1-a)/2,s=[{x:n.GWP(c,t)(r),y:n.GWP(e,0)(r)},{x:c,y:e},{x:o,y:e},{x:n.GWP(o,0)(r),y:n.GWP(e,0)(r)}];return n.n8j().x((function(t){return t.x})).y((function(t){return t.y}))(s)+"z"}function s(t,e,r){let a=t.map((t=>Math.round(t.length/e))),c=n.czq(a);for(;c>r;)a[n.z94(t,((t,r)=>0!==t.length?t.length/e-a[r]:1/0))]-=1,c=n.czq(a);for(;c<r;)a[n.P2Z(t,((t,r)=>0!==t.length?t.length/e-a[r]:-1/0))]+=1,c=n.czq(a);return a}function l(t,e){const r=(0,a.useRef)({value:t,prev:null}),n=r.current.value;return(e?e(t,n):t===n)||(r.current={value:t,prev:n}),r.current.prev}const i=t=>n.dM(n.m4Y([.2,1])(t))},63:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{Vk:()=>s,Zl:()=>l,jx:()=>i,pk:()=>o});var a=r(829),c=t([a]);a=(c.then?(await c)():c)[0];const o=1200,s="scens",l="delivs",i=await async function(){const t=await(await fetch("./all_objectives.json")).json();for(const e of t){e[s]=e[s];for(const t of e[s])t[l]=t[l].map((t=>Math.min(Math.max(0,t),o))).sort(((t,e)=>e-t));e[s]=(0,a.Et)(e[s],(t=>{let{name:e}=t;return e}))}return console.log("DATA: loading objectives data"),(0,a.Et)(t,(t=>{let{obj:e}=t;return e}))}();n()}catch(o){n(o)}}),1)},829:(t,e,r)=>{r.a(t,(async(t,n)=>{try{r.d(e,{C5:()=>m,Et:()=>d,XC:()=>p,Yb:()=>B,cv:()=>w,hh:()=>j,js:()=>f,nC:()=>k,xC:()=>y});var a=r(53),c=r(783),o=r.n(c),s=r(43),l=r(63),i=r(684),u=t([l]);function d(t,e){const r=Object.groupBy(t,e);for(const n of Object.keys(r))r[n]=r[n][0];return r}l=(u.then?(await u)():u)[0];const p={draw:function(t,e){t.moveTo(0,-e/2),t.lineTo(e/4,-e/4),t.arc(0,0,e/Math.SQRT2/2,-Math.PI/4,5*Math.PI/4),t.lineTo(0,-e/2),t.closePath()}},f="M0,-1L0.5,-0.5A0.707,0.707,0,1,1,-0.5,-0.5L0,-1Z";function m(t,e){return function(r){return e.map((function(e){return[e,a.i2o(r,(function(r){return t(e-r)}))]}))}}function y(t){return function(e){return Math.abs(e/=t)<=1?.75*(1-e*e)/t:0}}function x(t){const e=t/2,r=3*Math.PI/2/16,n=[{x:Math.cos(5*Math.PI/4)*e,y:Math.sin(5*Math.PI/4)*e},{x:0,y:-Math.SQRT2*e}];for(let a=0;a<=16;a++)n.push({x:Math.cos(a*r-Math.PI/4)*e,y:Math.sin(a*r-Math.PI/4)*e});return n}function g(t,e){const r=o().Bounds.create(t),n=r.min.x,c=r.max.x,s=r.min.y,l=r.max.y,i=a.m4Y([n,c]),u=a.m4Y([s,l]),h=[];for(let a=0;a<e;a++)for(;;){const e=i(Math.random()),r=u(Math.random());if(o().Vertices.contains(t,{x:e,y:r})){h.push([e,r]);break}}return h}const v=function(){const t=x(3),e=x(1),r=[];for(let n=0;n<t.length-2;n++)r.push([t[n],t[n+(n<2?1:2)],e[n+(n<2?1:2)],e[n]]);return r}();let b,M;function j(t,e,r){b&&r.length===M||(b=a.y17(4).map((()=>g(x(1),M=r.length))));const n=a.czq(r.map((t=>{let{r:e}=t;return e**2*3.14}))),c=Math.floor(2*Math.sqrt(n/3.14)/2),s=b[Math.floor(Math.random()*b.length)].map((t=>{let[e,r]=t;return[e*c,r*c]})),l=o().Engine,i=o().Bodies,u=o().Composite,h=l.create(),d=s.sort(((t,e)=>e[1]-t[1])),p=r.map(((t,e)=>{let{r:r,id:n}=t;const[a,c]=d[e];return i.circle(a,c,r,{restitution:0,id:n})})),f=v.map((t=>o().Body.create({position:o().Vertices.centre(t),vertices:t,isStatic:!0}))),m=o().Body.create({isStatic:!0});o().Body.setParts(m,f),o().Body.setCentre(m,{x:0,y:0}),o().Body.scale(m,1.1*c,1.1*c),u.add(h.world,[...p,m]);for(let a=0,o=60,y=.3;a<o*y;a++)l.update(h,1e3/o);return p.map((r=>{let{position:n,id:a}=r;return{id:a,x:n.x+t,y:n.y+e+.1*c}}))}function k(t,e){const[r,n]=(0,s.useState)(t);return[(0,s.useMemo)((()=>e(r)),[r]),(0,s.useCallback)((t=>{n(e(t))}),[])]}function w(t,e,r,n){const c=r[t][l.Vk][e][l.Zl];return a.m4Y().domain((0,i.kd)(0,1,c.length)).range(c.map((t=>Math.min(1,t/n)||0))).clamp(!0)}function B(t,e,r){return"median"===t?Object.keys(e[r][l.Vk]).sort(((t,n)=>a.i2o(e[r][l.Vk][t][l.Zl])-a.i2o(e[r][l.Vk][n][l.Zl]))):"deliveries"===t?Object.keys(e[r][l.Vk]).sort(((t,n)=>a.T9B(e[r][l.Vk][t][l.Zl])-a.T9B(e[r][l.Vk][n][l.Zl]))):"alphabetical"===t?Object.keys(e[r][l.Vk]).sort():void 0}n()}catch(h){n(h)}}))}}]);
//# sourceMappingURL=594.059571ce.chunk.js.map